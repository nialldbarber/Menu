d45ea4b177b35b05fb0ca33976375767
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _objectWithoutProperties2 = _interopRequireDefault2(require("@babel/runtime/helpers/objectWithoutProperties"));

var _excluded = ["height", "minHeight", "maxHeight", "backgroundColor", "borderBottomColor", "borderBottomEndRadius", "borderBottomLeftRadius", "borderBottomRightRadius", "borderBottomStartRadius", "borderBottomWidth", "borderColor", "borderEndColor", "borderEndWidth", "borderLeftColor", "borderLeftWidth", "borderRadius", "borderRightColor", "borderRightWidth", "borderStartColor", "borderStartWidth", "borderStyle", "borderTopColor", "borderTopEndRadius", "borderTopLeftRadius", "borderTopRightRadius", "borderTopStartRadius", "borderTopWidth", "borderWidth", "boxShadow", "elevation", "shadowColor", "shadowOffset", "shadowOpacity", "shadowRadius", "opacity", "transform"];
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = Header;

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _reactNativeSafeAreaContext = require("react-native-safe-area-context");

var _getDefaultHeaderHeight = _interopRequireDefault(require("./getDefaultHeaderHeight"));

var _HeaderBackground = _interopRequireDefault(require("./HeaderBackground"));

var _HeaderShownContext = _interopRequireDefault(require("./HeaderShownContext"));

var _HeaderTitle = _interopRequireDefault(require("./HeaderTitle"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _getRequireWildcardCache(nodeInterop) {
  if (typeof WeakMap !== "function") return null;
  var cacheBabelInterop = new WeakMap();
  var cacheNodeInterop = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {
    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
  })(nodeInterop);
}

function _interopRequireWildcard(obj, nodeInterop) {
  if (!nodeInterop && obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache(nodeInterop);

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

var warnIfHeaderStylesDefined = function warnIfHeaderStylesDefined(styles) {
  Object.keys(styles).forEach(function (styleProp) {
    var value = styles[styleProp];

    if (styleProp === 'position' && value === 'absolute') {
      console.warn("position: 'absolute' is not supported on headerStyle. If you would like to render content under the header, use the 'headerTransparent' option.");
    } else if (value !== undefined) {
      console.warn(styleProp + " was given a value of " + value + ", this has no effect on headerStyle.");
    }
  });
};

function Header(props) {
  var insets = (0, _reactNativeSafeAreaContext.useSafeAreaInsets)();
  var frame = (0, _reactNativeSafeAreaContext.useSafeAreaFrame)();
  var isParentHeaderShown = React.useContext(_HeaderShownContext.default);
  var _props$layout = props.layout,
      layout = _props$layout === void 0 ? frame : _props$layout,
      _props$modal = props.modal,
      modal = _props$modal === void 0 ? false : _props$modal,
      title = props.title,
      customTitle = props.headerTitle,
      _props$headerTitleAli = props.headerTitleAlign,
      headerTitleAlign = _props$headerTitleAli === void 0 ? _reactNative.Platform.select({
    ios: 'center',
    default: 'left'
  }) : _props$headerTitleAli,
      headerLeft = props.headerLeft,
      headerLeftLabelVisible = props.headerLeftLabelVisible,
      headerTransparent = props.headerTransparent,
      headerTintColor = props.headerTintColor,
      headerBackground = props.headerBackground,
      headerRight = props.headerRight,
      titleAllowFontScaling = props.headerTitleAllowFontScaling,
      titleStyle = props.headerTitleStyle,
      leftContainerStyle = props.headerLeftContainerStyle,
      rightContainerStyle = props.headerRightContainerStyle,
      titleContainerStyle = props.headerTitleContainerStyle,
      backgroundContainerStyle = props.headerBackgroundContainerStyle,
      customHeaderStyle = props.headerStyle,
      headerShadowVisible = props.headerShadowVisible,
      headerPressColor = props.headerPressColor,
      headerPressOpacity = props.headerPressOpacity,
      _props$headerStatusBa = props.headerStatusBarHeight,
      headerStatusBarHeight = _props$headerStatusBa === void 0 ? isParentHeaderShown ? 0 : insets.top : _props$headerStatusBa;
  var defaultHeight = (0, _getDefaultHeaderHeight.default)(layout, modal, headerStatusBarHeight);

  var _reactNative$StyleShe = _reactNative.StyleSheet.flatten(customHeaderStyle || {}),
      _reactNative$StyleShe2 = _reactNative$StyleShe.height,
      height = _reactNative$StyleShe2 === void 0 ? defaultHeight : _reactNative$StyleShe2,
      minHeight = _reactNative$StyleShe.minHeight,
      maxHeight = _reactNative$StyleShe.maxHeight,
      backgroundColor = _reactNative$StyleShe.backgroundColor,
      borderBottomColor = _reactNative$StyleShe.borderBottomColor,
      borderBottomEndRadius = _reactNative$StyleShe.borderBottomEndRadius,
      borderBottomLeftRadius = _reactNative$StyleShe.borderBottomLeftRadius,
      borderBottomRightRadius = _reactNative$StyleShe.borderBottomRightRadius,
      borderBottomStartRadius = _reactNative$StyleShe.borderBottomStartRadius,
      borderBottomWidth = _reactNative$StyleShe.borderBottomWidth,
      borderColor = _reactNative$StyleShe.borderColor,
      borderEndColor = _reactNative$StyleShe.borderEndColor,
      borderEndWidth = _reactNative$StyleShe.borderEndWidth,
      borderLeftColor = _reactNative$StyleShe.borderLeftColor,
      borderLeftWidth = _reactNative$StyleShe.borderLeftWidth,
      borderRadius = _reactNative$StyleShe.borderRadius,
      borderRightColor = _reactNative$StyleShe.borderRightColor,
      borderRightWidth = _reactNative$StyleShe.borderRightWidth,
      borderStartColor = _reactNative$StyleShe.borderStartColor,
      borderStartWidth = _reactNative$StyleShe.borderStartWidth,
      borderStyle = _reactNative$StyleShe.borderStyle,
      borderTopColor = _reactNative$StyleShe.borderTopColor,
      borderTopEndRadius = _reactNative$StyleShe.borderTopEndRadius,
      borderTopLeftRadius = _reactNative$StyleShe.borderTopLeftRadius,
      borderTopRightRadius = _reactNative$StyleShe.borderTopRightRadius,
      borderTopStartRadius = _reactNative$StyleShe.borderTopStartRadius,
      borderTopWidth = _reactNative$StyleShe.borderTopWidth,
      borderWidth = _reactNative$StyleShe.borderWidth,
      boxShadow = _reactNative$StyleShe.boxShadow,
      elevation = _reactNative$StyleShe.elevation,
      shadowColor = _reactNative$StyleShe.shadowColor,
      shadowOffset = _reactNative$StyleShe.shadowOffset,
      shadowOpacity = _reactNative$StyleShe.shadowOpacity,
      shadowRadius = _reactNative$StyleShe.shadowRadius,
      opacity = _reactNative$StyleShe.opacity,
      transform = _reactNative$StyleShe.transform,
      unsafeStyles = (0, _objectWithoutProperties2.default)(_reactNative$StyleShe, _excluded);

  if (process.env.NODE_ENV !== 'production') {
    warnIfHeaderStylesDefined(unsafeStyles);
  }

  var safeStyles = {
    backgroundColor: backgroundColor,
    borderBottomColor: borderBottomColor,
    borderBottomEndRadius: borderBottomEndRadius,
    borderBottomLeftRadius: borderBottomLeftRadius,
    borderBottomRightRadius: borderBottomRightRadius,
    borderBottomStartRadius: borderBottomStartRadius,
    borderBottomWidth: borderBottomWidth,
    borderColor: borderColor,
    borderEndColor: borderEndColor,
    borderEndWidth: borderEndWidth,
    borderLeftColor: borderLeftColor,
    borderLeftWidth: borderLeftWidth,
    borderRadius: borderRadius,
    borderRightColor: borderRightColor,
    borderRightWidth: borderRightWidth,
    borderStartColor: borderStartColor,
    borderStartWidth: borderStartWidth,
    borderStyle: borderStyle,
    borderTopColor: borderTopColor,
    borderTopEndRadius: borderTopEndRadius,
    borderTopLeftRadius: borderTopLeftRadius,
    borderTopRightRadius: borderTopRightRadius,
    borderTopStartRadius: borderTopStartRadius,
    borderTopWidth: borderTopWidth,
    borderWidth: borderWidth,
    boxShadow: boxShadow,
    elevation: elevation,
    shadowColor: shadowColor,
    shadowOffset: shadowOffset,
    shadowOpacity: shadowOpacity,
    shadowRadius: shadowRadius,
    opacity: opacity,
    transform: transform
  };

  for (var styleProp in safeStyles) {
    if (safeStyles[styleProp] === undefined) {
      delete safeStyles[styleProp];
    }
  }

  var backgroundStyle = [safeStyles, headerShadowVisible === false && {
    elevation: 0,
    shadowOpacity: 0,
    borderBottomWidth: 0
  }];
  var leftButton = headerLeft ? headerLeft({
    tintColor: headerTintColor,
    pressColor: headerPressColor,
    pressOpacity: headerPressOpacity,
    labelVisible: headerLeftLabelVisible
  }) : null;
  var rightButton = headerRight ? headerRight({
    tintColor: headerTintColor,
    pressColor: headerPressColor,
    pressOpacity: headerPressOpacity
  }) : null;
  var headerTitle = typeof customTitle !== 'function' ? function (props) {
    return React.createElement(_HeaderTitle.default, props);
  } : customTitle;
  return React.createElement(React.Fragment, null, React.createElement(_reactNative.Animated.View, {
    pointerEvents: "box-none",
    style: [_reactNative.StyleSheet.absoluteFill, {
      zIndex: 0
    }, backgroundContainerStyle]
  }, headerBackground ? headerBackground({
    style: backgroundStyle
  }) : headerTransparent ? null : React.createElement(_HeaderBackground.default, {
    style: backgroundStyle
  })), React.createElement(_reactNative.Animated.View, {
    pointerEvents: "box-none",
    style: [{
      height: height,
      minHeight: minHeight,
      maxHeight: maxHeight,
      opacity: opacity,
      transform: transform
    }]
  }, React.createElement(_reactNative.View, {
    pointerEvents: "none",
    style: {
      height: headerStatusBarHeight
    }
  }), React.createElement(_reactNative.View, {
    pointerEvents: "box-none",
    style: styles.content
  }, React.createElement(_reactNative.Animated.View, {
    pointerEvents: "box-none",
    style: [styles.left, headerTitleAlign === 'center' && styles.expand, {
      marginStart: insets.left
    }, leftContainerStyle]
  }, leftButton), React.createElement(_reactNative.Animated.View, {
    pointerEvents: "box-none",
    style: [styles.title, {
      maxWidth: headerTitleAlign === 'center' ? layout.width - ((leftButton ? headerLeftLabelVisible !== false ? 80 : 32 : 16) + Math.max(insets.left, insets.right)) * 2 : layout.width - ((leftButton ? 72 : 16) + (rightButton ? 72 : 16) + insets.left - insets.right)
    }, titleContainerStyle]
  }, headerTitle({
    children: title,
    allowFontScaling: titleAllowFontScaling,
    tintColor: headerTintColor,
    style: titleStyle
  })), React.createElement(_reactNative.Animated.View, {
    pointerEvents: "box-none",
    style: [styles.right, styles.expand, {
      marginEnd: insets.right
    }, rightContainerStyle]
  }, rightButton))));
}

var styles = _reactNative.StyleSheet.create({
  content: {
    flex: 1,
    flexDirection: 'row',
    alignItems: 'stretch'
  },
  title: {
    marginHorizontal: 16,
    justifyContent: 'center'
  },
  left: {
    justifyContent: 'center',
    alignItems: 'flex-start'
  },
  right: {
    justifyContent: 'center',
    alignItems: 'flex-end'
  },
  expand: {
    flexGrow: 1,
    flexBasis: 0
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkhlYWRlci50c3giXSwibmFtZXMiOlsid2FybklmSGVhZGVyU3R5bGVzRGVmaW5lZCIsInN0eWxlcyIsIk9iamVjdCIsInN0eWxlUHJvcCIsInZhbHVlIiwiY29uc29sZSIsImluc2V0cyIsImZyYW1lIiwiaXNQYXJlbnRIZWFkZXJTaG93biIsIlJlYWN0IiwiSGVhZGVyU2hvd25Db250ZXh0IiwibGF5b3V0IiwibW9kYWwiLCJoZWFkZXJUaXRsZSIsImhlYWRlclRpdGxlQWxpZ24iLCJpb3MiLCJkZWZhdWx0IiwiaGVhZGVyVGl0bGVBbGxvd0ZvbnRTY2FsaW5nIiwiaGVhZGVyVGl0bGVTdHlsZSIsImhlYWRlckxlZnRDb250YWluZXJTdHlsZSIsImhlYWRlclJpZ2h0Q29udGFpbmVyU3R5bGUiLCJoZWFkZXJUaXRsZUNvbnRhaW5lclN0eWxlIiwiaGVhZGVyQmFja2dyb3VuZENvbnRhaW5lclN0eWxlIiwiaGVhZGVyU3R5bGUiLCJoZWFkZXJTdGF0dXNCYXJIZWlnaHQiLCJ0b3AiLCJkZWZhdWx0SGVpZ2h0IiwiaGVpZ2h0IiwidW5zYWZlU3R5bGVzIiwiU3R5bGVTaGVldCIsImN1c3RvbUhlYWRlclN0eWxlIiwicHJvY2VzcyIsInNhZmVTdHlsZXMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJCb3R0b21Db2xvciIsImJvcmRlckJvdHRvbUVuZFJhZGl1cyIsImJvcmRlckJvdHRvbUxlZnRSYWRpdXMiLCJib3JkZXJCb3R0b21SaWdodFJhZGl1cyIsImJvcmRlckJvdHRvbVN0YXJ0UmFkaXVzIiwiYm9yZGVyQm90dG9tV2lkdGgiLCJib3JkZXJDb2xvciIsImJvcmRlckVuZENvbG9yIiwiYm9yZGVyRW5kV2lkdGgiLCJib3JkZXJMZWZ0Q29sb3IiLCJib3JkZXJMZWZ0V2lkdGgiLCJib3JkZXJSYWRpdXMiLCJib3JkZXJSaWdodENvbG9yIiwiYm9yZGVyUmlnaHRXaWR0aCIsImJvcmRlclN0YXJ0Q29sb3IiLCJib3JkZXJTdGFydFdpZHRoIiwiYm9yZGVyU3R5bGUiLCJib3JkZXJUb3BDb2xvciIsImJvcmRlclRvcEVuZFJhZGl1cyIsImJvcmRlclRvcExlZnRSYWRpdXMiLCJib3JkZXJUb3BSaWdodFJhZGl1cyIsImJvcmRlclRvcFN0YXJ0UmFkaXVzIiwiYm9yZGVyVG9wV2lkdGgiLCJib3JkZXJXaWR0aCIsImJveFNoYWRvdyIsImVsZXZhdGlvbiIsInNoYWRvd0NvbG9yIiwic2hhZG93T2Zmc2V0Iiwic2hhZG93T3BhY2l0eSIsInNoYWRvd1JhZGl1cyIsIm9wYWNpdHkiLCJ0cmFuc2Zvcm0iLCJiYWNrZ3JvdW5kU3R5bGUiLCJoZWFkZXJTaGFkb3dWaXNpYmxlIiwibGVmdEJ1dHRvbiIsImhlYWRlckxlZnQiLCJ0aW50Q29sb3IiLCJwcmVzc0NvbG9yIiwicHJlc3NPcGFjaXR5IiwibGFiZWxWaXNpYmxlIiwiaGVhZGVyTGVmdExhYmVsVmlzaWJsZSIsInJpZ2h0QnV0dG9uIiwiaGVhZGVyUmlnaHQiLCJoZWFkZXJQcmVzc09wYWNpdHkiLCJwcm9wcyIsInpJbmRleCIsImhlYWRlckJhY2tncm91bmQiLCJzdHlsZSIsImhlYWRlclRyYW5zcGFyZW50IiwibWluSGVpZ2h0IiwibWF4SGVpZ2h0IiwiY29udGVudCIsIm1hcmdpblN0YXJ0IiwibGVmdCIsIm1heFdpZHRoIiwiTWF0aCIsImNoaWxkcmVuIiwiYWxsb3dGb250U2NhbGluZyIsInRpdGxlU3R5bGUiLCJtYXJnaW5FbmQiLCJyaWdodCIsImZsZXgiLCJmbGV4RGlyZWN0aW9uIiwiYWxpZ25JdGVtcyIsInRpdGxlIiwibWFyZ2luSG9yaXpvbnRhbCIsImp1c3RpZnlDb250ZW50IiwiZXhwYW5kIiwiZmxleEdyb3ciLCJmbGV4QmFzaXMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLElBQUEsS0FBQSxHQUFBLHVCQUFBLENBQUEsT0FBQSxDQUFBLE9BQUEsQ0FBQSxDQUFBOztBQUNBLElBQUEsWUFBQSxHQUFBLE9BQUEsQ0FBQSxjQUFBLENBQUE7O0FBQ0EsSUFBQSwyQkFBQSxH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O0FBQUU0RixNQUFBQSxTQUFTLEVBQUV2RixNQUFNLENBQUN3RjtBQUFwQixLQUhLLEVBQUEsbUJBQUE7QUFGVCxHQUFBLEVBakVSLFdBaUVRLENBNUNGLENBTEYsQ0FmRixDQURGO0FBZ0ZEOztBQUVELElBQU03RixNQUFNLEdBQUcsWUFBQSxDQUFBLFVBQUEsQ0FBQSxNQUFBLENBQWtCO0FBQy9Cb0YsRUFBQUEsT0FBTyxFQUFFO0FBQ1BVLElBQUFBLElBQUksRUFERyxDQUFBO0FBRVBDLElBQUFBLGFBQWEsRUFGTixLQUFBO0FBR1BDLElBQUFBLFVBQVUsRUFBRTtBQUhMLEdBRHNCO0FBTS9CQyxFQUFBQSxLQUFLLEVBQUU7QUFDTEMsSUFBQUEsZ0JBQWdCLEVBRFgsRUFBQTtBQUVMQyxJQUFBQSxjQUFjLEVBQUU7QUFGWCxHQU53QjtBQVUvQmIsRUFBQUEsSUFBSSxFQUFFO0FBQ0phLElBQUFBLGNBQWMsRUFEVixRQUFBO0FBRUpILElBQUFBLFVBQVUsRUFBRTtBQUZSLEdBVnlCO0FBYy9CSCxFQUFBQSxLQUFLLEVBQUU7QUFDTE0sSUFBQUEsY0FBYyxFQURULFFBQUE7QUFFTEgsSUFBQUEsVUFBVSxFQUFFO0FBRlAsR0Fkd0I7QUFrQi9CSSxFQUFBQSxNQUFNLEVBQUU7QUFDTkMsSUFBQUEsUUFBUSxFQURGLENBQUE7QUFFTkMsSUFBQUEsU0FBUyxFQUFFO0FBRkw7QUFsQnVCLENBQWxCLENBQWYiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBBbmltYXRlZCwgUGxhdGZvcm0sIFN0eWxlU2hlZXQsIFZpZXcsIFZpZXdTdHlsZSB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5pbXBvcnQge1xuICB1c2VTYWZlQXJlYUZyYW1lLFxuICB1c2VTYWZlQXJlYUluc2V0cyxcbn0gZnJvbSAncmVhY3QtbmF0aXZlLXNhZmUtYXJlYS1jb250ZXh0JztcblxuaW1wb3J0IHR5cGUgeyBIZWFkZXJPcHRpb25zLCBMYXlvdXQgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgZ2V0RGVmYXVsdEhlYWRlckhlaWdodCBmcm9tICcuL2dldERlZmF1bHRIZWFkZXJIZWlnaHQnO1xuaW1wb3J0IEhlYWRlckJhY2tncm91bmQgZnJvbSAnLi9IZWFkZXJCYWNrZ3JvdW5kJztcbmltcG9ydCBIZWFkZXJTaG93bkNvbnRleHQgZnJvbSAnLi9IZWFkZXJTaG93bkNvbnRleHQnO1xuaW1wb3J0IEhlYWRlclRpdGxlIGZyb20gJy4vSGVhZGVyVGl0bGUnO1xuXG50eXBlIFByb3BzID0gSGVhZGVyT3B0aW9ucyAmIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGhlYWRlciBpcyBpbiBhIG1vZGFsXG4gICAqL1xuICBtb2RhbD86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBMYXlvdXQgb2YgdGhlIHNjcmVlbi5cbiAgICovXG4gIGxheW91dD86IExheW91dDtcbiAgLyoqXG4gICAqIFRpdGxlIHRleHQgZm9yIHRoZSBoZWFkZXIuXG4gICAqL1xuICB0aXRsZTogc3RyaW5nO1xufTtcblxuY29uc3Qgd2FybklmSGVhZGVyU3R5bGVzRGVmaW5lZCA9IChzdHlsZXM6IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IHtcbiAgT2JqZWN0LmtleXMoc3R5bGVzKS5mb3JFYWNoKChzdHlsZVByb3ApID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IHN0eWxlc1tzdHlsZVByb3BdO1xuXG4gICAgaWYgKHN0eWxlUHJvcCA9PT0gJ3Bvc2l0aW9uJyAmJiB2YWx1ZSA9PT0gJ2Fic29sdXRlJykge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcInBvc2l0aW9uOiAnYWJzb2x1dGUnIGlzIG5vdCBzdXBwb3J0ZWQgb24gaGVhZGVyU3R5bGUuIElmIHlvdSB3b3VsZCBsaWtlIHRvIHJlbmRlciBjb250ZW50IHVuZGVyIHRoZSBoZWFkZXIsIHVzZSB0aGUgJ2hlYWRlclRyYW5zcGFyZW50JyBvcHRpb24uXCJcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGAke3N0eWxlUHJvcH0gd2FzIGdpdmVuIGEgdmFsdWUgb2YgJHt2YWx1ZX0sIHRoaXMgaGFzIG5vIGVmZmVjdCBvbiBoZWFkZXJTdHlsZS5gXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIZWFkZXIocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IGluc2V0cyA9IHVzZVNhZmVBcmVhSW5zZXRzKCk7XG4gIGNvbnN0IGZyYW1lID0gdXNlU2FmZUFyZWFGcmFtZSgpO1xuXG4gIGNvbnN0IGlzUGFyZW50SGVhZGVyU2hvd24gPSBSZWFjdC51c2VDb250ZXh0KEhlYWRlclNob3duQ29udGV4dCk7XG5cbiAgY29uc3Qge1xuICAgIGxheW91dCA9IGZyYW1lLFxuICAgIG1vZGFsID0gZmFsc2UsXG4gICAgdGl0bGUsXG4gICAgaGVhZGVyVGl0bGU6IGN1c3RvbVRpdGxlLFxuICAgIGhlYWRlclRpdGxlQWxpZ24gPSBQbGF0Zm9ybS5zZWxlY3Qoe1xuICAgICAgaW9zOiAnY2VudGVyJyxcbiAgICAgIGRlZmF1bHQ6ICdsZWZ0JyxcbiAgICB9KSxcbiAgICBoZWFkZXJMZWZ0LFxuICAgIGhlYWRlckxlZnRMYWJlbFZpc2libGUsXG4gICAgaGVhZGVyVHJhbnNwYXJlbnQsXG4gICAgaGVhZGVyVGludENvbG9yLFxuICAgIGhlYWRlckJhY2tncm91bmQsXG4gICAgaGVhZGVyUmlnaHQsXG4gICAgaGVhZGVyVGl0bGVBbGxvd0ZvbnRTY2FsaW5nOiB0aXRsZUFsbG93Rm9udFNjYWxpbmcsXG4gICAgaGVhZGVyVGl0bGVTdHlsZTogdGl0bGVTdHlsZSxcbiAgICBoZWFkZXJMZWZ0Q29udGFpbmVyU3R5bGU6IGxlZnRDb250YWluZXJTdHlsZSxcbiAgICBoZWFkZXJSaWdodENvbnRhaW5lclN0eWxlOiByaWdodENvbnRhaW5lclN0eWxlLFxuICAgIGhlYWRlclRpdGxlQ29udGFpbmVyU3R5bGU6IHRpdGxlQ29udGFpbmVyU3R5bGUsXG4gICAgaGVhZGVyQmFja2dyb3VuZENvbnRhaW5lclN0eWxlOiBiYWNrZ3JvdW5kQ29udGFpbmVyU3R5bGUsXG4gICAgaGVhZGVyU3R5bGU6IGN1c3RvbUhlYWRlclN0eWxlLFxuICAgIGhlYWRlclNoYWRvd1Zpc2libGUsXG4gICAgaGVhZGVyUHJlc3NDb2xvcixcbiAgICBoZWFkZXJQcmVzc09wYWNpdHksXG4gICAgaGVhZGVyU3RhdHVzQmFySGVpZ2h0ID0gaXNQYXJlbnRIZWFkZXJTaG93biA/IDAgOiBpbnNldHMudG9wLFxuICB9ID0gcHJvcHM7XG5cbiAgY29uc3QgZGVmYXVsdEhlaWdodCA9IGdldERlZmF1bHRIZWFkZXJIZWlnaHQoXG4gICAgbGF5b3V0LFxuICAgIG1vZGFsLFxuICAgIGhlYWRlclN0YXR1c0JhckhlaWdodFxuICApO1xuXG4gIGNvbnN0IHtcbiAgICBoZWlnaHQgPSBkZWZhdWx0SGVpZ2h0LFxuICAgIG1pbkhlaWdodCxcbiAgICBtYXhIZWlnaHQsXG4gICAgYmFja2dyb3VuZENvbG9yLFxuICAgIGJvcmRlckJvdHRvbUNvbG9yLFxuICAgIGJvcmRlckJvdHRvbUVuZFJhZGl1cyxcbiAgICBib3JkZXJCb3R0b21MZWZ0UmFkaXVzLFxuICAgIGJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzLFxuICAgIGJvcmRlckJvdHRvbVN0YXJ0UmFkaXVzLFxuICAgIGJvcmRlckJvdHRvbVdpZHRoLFxuICAgIGJvcmRlckNvbG9yLFxuICAgIGJvcmRlckVuZENvbG9yLFxuICAgIGJvcmRlckVuZFdpZHRoLFxuICAgIGJvcmRlckxlZnRDb2xvcixcbiAgICBib3JkZXJMZWZ0V2lkdGgsXG4gICAgYm9yZGVyUmFkaXVzLFxuICAgIGJvcmRlclJpZ2h0Q29sb3IsXG4gICAgYm9yZGVyUmlnaHRXaWR0aCxcbiAgICBib3JkZXJTdGFydENvbG9yLFxuICAgIGJvcmRlclN0YXJ0V2lkdGgsXG4gICAgYm9yZGVyU3R5bGUsXG4gICAgYm9yZGVyVG9wQ29sb3IsXG4gICAgYm9yZGVyVG9wRW5kUmFkaXVzLFxuICAgIGJvcmRlclRvcExlZnRSYWRpdXMsXG4gICAgYm9yZGVyVG9wUmlnaHRSYWRpdXMsXG4gICAgYm9yZGVyVG9wU3RhcnRSYWRpdXMsXG4gICAgYm9yZGVyVG9wV2lkdGgsXG4gICAgYm9yZGVyV2lkdGgsXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogd2ViIHN1cHBvcnQgZm9yIHNoYWRvd1xuICAgIGJveFNoYWRvdyxcbiAgICBlbGV2YXRpb24sXG4gICAgc2hhZG93Q29sb3IsXG4gICAgc2hhZG93T2Zmc2V0LFxuICAgIHNoYWRvd09wYWNpdHksXG4gICAgc2hhZG93UmFkaXVzLFxuICAgIG9wYWNpdHksXG4gICAgdHJhbnNmb3JtLFxuICAgIC4uLnVuc2FmZVN0eWxlc1xuICB9ID0gU3R5bGVTaGVldC5mbGF0dGVuKGN1c3RvbUhlYWRlclN0eWxlIHx8IHt9KSBhcyBWaWV3U3R5bGU7XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB3YXJuSWZIZWFkZXJTdHlsZXNEZWZpbmVkKHVuc2FmZVN0eWxlcyk7XG4gIH1cblxuICBjb25zdCBzYWZlU3R5bGVzOiBWaWV3U3R5bGUgPSB7XG4gICAgYmFja2dyb3VuZENvbG9yLFxuICAgIGJvcmRlckJvdHRvbUNvbG9yLFxuICAgIGJvcmRlckJvdHRvbUVuZFJhZGl1cyxcbiAgICBib3JkZXJCb3R0b21MZWZ0UmFkaXVzLFxuICAgIGJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzLFxuICAgIGJvcmRlckJvdHRvbVN0YXJ0UmFkaXVzLFxuICAgIGJvcmRlckJvdHRvbVdpZHRoLFxuICAgIGJvcmRlckNvbG9yLFxuICAgIGJvcmRlckVuZENvbG9yLFxuICAgIGJvcmRlckVuZFdpZHRoLFxuICAgIGJvcmRlckxlZnRDb2xvcixcbiAgICBib3JkZXJMZWZ0V2lkdGgsXG4gICAgYm9yZGVyUmFkaXVzLFxuICAgIGJvcmRlclJpZ2h0Q29sb3IsXG4gICAgYm9yZGVyUmlnaHRXaWR0aCxcbiAgICBib3JkZXJTdGFydENvbG9yLFxuICAgIGJvcmRlclN0YXJ0V2lkdGgsXG4gICAgYm9yZGVyU3R5bGUsXG4gICAgYm9yZGVyVG9wQ29sb3IsXG4gICAgYm9yZGVyVG9wRW5kUmFkaXVzLFxuICAgIGJvcmRlclRvcExlZnRSYWRpdXMsXG4gICAgYm9yZGVyVG9wUmlnaHRSYWRpdXMsXG4gICAgYm9yZGVyVG9wU3RhcnRSYWRpdXMsXG4gICAgYm9yZGVyVG9wV2lkdGgsXG4gICAgYm9yZGVyV2lkdGgsXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogYm94U2hhZG93IGlzIG9ubHkgZm9yIFdlYlxuICAgIGJveFNoYWRvdyxcbiAgICBlbGV2YXRpb24sXG4gICAgc2hhZG93Q29sb3IsXG4gICAgc2hhZG93T2Zmc2V0LFxuICAgIHNoYWRvd09wYWNpdHksXG4gICAgc2hhZG93UmFkaXVzLFxuICAgIG9wYWNpdHksXG4gICAgdHJhbnNmb3JtLFxuICB9O1xuXG4gIC8vIFNldHRpbmcgYSBwcm9wZXJ0eSB0byB1bmRlZmluZWQgdHJpZ2dlcnMgZGVmYXVsdCBzdHlsZVxuICAvLyBTbyB3ZSBuZWVkIHRvIGZpbHRlciB0aGVtIG91dFxuICAvLyBVc2VycyBjYW4gdXNlIGBudWxsYCBpbnN0ZWFkXG4gIGZvciAoY29uc3Qgc3R5bGVQcm9wIGluIHNhZmVTdHlsZXMpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiB0eXBlc2NyaXB0IHdyb25nbHkgY29tcGxhaW5zIHRoYXQgc3R5bGVQcm9wIGNhbm5vdCBiZSB1c2VkIHRvIGluZGV4IHNhZmVTdHlsZXNcbiAgICBpZiAoc2FmZVN0eWxlc1tzdHlsZVByb3BdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZHluYW1pYy1kZWxldGVcbiAgICAgIGRlbGV0ZSBzYWZlU3R5bGVzW3N0eWxlUHJvcF07XG4gICAgfVxuICB9XG5cbiAgY29uc3QgYmFja2dyb3VuZFN0eWxlID0gW1xuICAgIHNhZmVTdHlsZXMsXG4gICAgaGVhZGVyU2hhZG93VmlzaWJsZSA9PT0gZmFsc2UgJiYge1xuICAgICAgZWxldmF0aW9uOiAwLFxuICAgICAgc2hhZG93T3BhY2l0eTogMCxcbiAgICAgIGJvcmRlckJvdHRvbVdpZHRoOiAwLFxuICAgIH0sXG4gIF07XG5cbiAgY29uc3QgbGVmdEJ1dHRvbiA9IGhlYWRlckxlZnRcbiAgICA/IGhlYWRlckxlZnQoe1xuICAgICAgICB0aW50Q29sb3I6IGhlYWRlclRpbnRDb2xvcixcbiAgICAgICAgcHJlc3NDb2xvcjogaGVhZGVyUHJlc3NDb2xvcixcbiAgICAgICAgcHJlc3NPcGFjaXR5OiBoZWFkZXJQcmVzc09wYWNpdHksXG4gICAgICAgIGxhYmVsVmlzaWJsZTogaGVhZGVyTGVmdExhYmVsVmlzaWJsZSxcbiAgICAgIH0pXG4gICAgOiBudWxsO1xuXG4gIGNvbnN0IHJpZ2h0QnV0dG9uID0gaGVhZGVyUmlnaHRcbiAgICA/IGhlYWRlclJpZ2h0KHtcbiAgICAgICAgdGludENvbG9yOiBoZWFkZXJUaW50Q29sb3IsXG4gICAgICAgIHByZXNzQ29sb3I6IGhlYWRlclByZXNzQ29sb3IsXG4gICAgICAgIHByZXNzT3BhY2l0eTogaGVhZGVyUHJlc3NPcGFjaXR5LFxuICAgICAgfSlcbiAgICA6IG51bGw7XG5cbiAgY29uc3QgaGVhZGVyVGl0bGUgPVxuICAgIHR5cGVvZiBjdXN0b21UaXRsZSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgPyAocHJvcHM6IFJlYWN0LkNvbXBvbmVudFByb3BzPHR5cGVvZiBIZWFkZXJUaXRsZT4pID0+IChcbiAgICAgICAgICA8SGVhZGVyVGl0bGUgey4uLnByb3BzfSAvPlxuICAgICAgICApXG4gICAgICA6IGN1c3RvbVRpdGxlO1xuXG4gIHJldHVybiAoXG4gICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgPEFuaW1hdGVkLlZpZXdcbiAgICAgICAgcG9pbnRlckV2ZW50cz1cImJveC1ub25lXCJcbiAgICAgICAgc3R5bGU9e1tcbiAgICAgICAgICBTdHlsZVNoZWV0LmFic29sdXRlRmlsbCxcbiAgICAgICAgICB7IHpJbmRleDogMCB9LFxuICAgICAgICAgIGJhY2tncm91bmRDb250YWluZXJTdHlsZSxcbiAgICAgICAgXX1cbiAgICAgID5cbiAgICAgICAge2hlYWRlckJhY2tncm91bmQgPyAoXG4gICAgICAgICAgaGVhZGVyQmFja2dyb3VuZCh7IHN0eWxlOiBiYWNrZ3JvdW5kU3R5bGUgfSlcbiAgICAgICAgKSA6IGhlYWRlclRyYW5zcGFyZW50ID8gbnVsbCA6IChcbiAgICAgICAgICA8SGVhZGVyQmFja2dyb3VuZCBzdHlsZT17YmFja2dyb3VuZFN0eWxlfSAvPlxuICAgICAgICApfVxuICAgICAgPC9BbmltYXRlZC5WaWV3PlxuICAgICAgPEFuaW1hdGVkLlZpZXdcbiAgICAgICAgcG9pbnRlckV2ZW50cz1cImJveC1ub25lXCJcbiAgICAgICAgc3R5bGU9e1t7IGhlaWdodCwgbWluSGVpZ2h0LCBtYXhIZWlnaHQsIG9wYWNpdHksIHRyYW5zZm9ybSB9XX1cbiAgICAgID5cbiAgICAgICAgPFZpZXcgcG9pbnRlckV2ZW50cz1cIm5vbmVcIiBzdHlsZT17eyBoZWlnaHQ6IGhlYWRlclN0YXR1c0JhckhlaWdodCB9fSAvPlxuICAgICAgICA8VmlldyBwb2ludGVyRXZlbnRzPVwiYm94LW5vbmVcIiBzdHlsZT17c3R5bGVzLmNvbnRlbnR9PlxuICAgICAgICAgIDxBbmltYXRlZC5WaWV3XG4gICAgICAgICAgICBwb2ludGVyRXZlbnRzPVwiYm94LW5vbmVcIlxuICAgICAgICAgICAgc3R5bGU9e1tcbiAgICAgICAgICAgICAgc3R5bGVzLmxlZnQsXG4gICAgICAgICAgICAgIGhlYWRlclRpdGxlQWxpZ24gPT09ICdjZW50ZXInICYmIHN0eWxlcy5leHBhbmQsXG4gICAgICAgICAgICAgIHsgbWFyZ2luU3RhcnQ6IGluc2V0cy5sZWZ0IH0sXG4gICAgICAgICAgICAgIGxlZnRDb250YWluZXJTdHlsZSxcbiAgICAgICAgICAgIF19XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2xlZnRCdXR0b259XG4gICAgICAgICAgPC9BbmltYXRlZC5WaWV3PlxuICAgICAgICAgIDxBbmltYXRlZC5WaWV3XG4gICAgICAgICAgICBwb2ludGVyRXZlbnRzPVwiYm94LW5vbmVcIlxuICAgICAgICAgICAgc3R5bGU9e1tcbiAgICAgICAgICAgICAgc3R5bGVzLnRpdGxlLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gQXZvaWQgdGhlIHRpdGxlIGZyb20gZ29pbmcgb2Zmc2NyZWVuIG9yIG92ZXJsYXBwaW5nIGJ1dHRvbnNcbiAgICAgICAgICAgICAgICBtYXhXaWR0aDpcbiAgICAgICAgICAgICAgICAgIGhlYWRlclRpdGxlQWxpZ24gPT09ICdjZW50ZXInXG4gICAgICAgICAgICAgICAgICAgID8gbGF5b3V0LndpZHRoIC1cbiAgICAgICAgICAgICAgICAgICAgICAoKGxlZnRCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgID8gaGVhZGVyTGVmdExhYmVsVmlzaWJsZSAhPT0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyA4MFxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IDMyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IDE2KSArXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChpbnNldHMubGVmdCwgaW5zZXRzLnJpZ2h0KSkgKlxuICAgICAgICAgICAgICAgICAgICAgICAgMlxuICAgICAgICAgICAgICAgICAgICA6IGxheW91dC53aWR0aCAtXG4gICAgICAgICAgICAgICAgICAgICAgKChsZWZ0QnV0dG9uID8gNzIgOiAxNikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgKHJpZ2h0QnV0dG9uID8gNzIgOiAxNikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXRzLmxlZnQgLVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXRzLnJpZ2h0KSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdGl0bGVDb250YWluZXJTdHlsZSxcbiAgICAgICAgICAgIF19XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2hlYWRlclRpdGxlKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IHRpdGxlLFxuICAgICAgICAgICAgICBhbGxvd0ZvbnRTY2FsaW5nOiB0aXRsZUFsbG93Rm9udFNjYWxpbmcsXG4gICAgICAgICAgICAgIHRpbnRDb2xvcjogaGVhZGVyVGludENvbG9yLFxuICAgICAgICAgICAgICBzdHlsZTogdGl0bGVTdHlsZSxcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvQW5pbWF0ZWQuVmlldz5cbiAgICAgICAgICA8QW5pbWF0ZWQuVmlld1xuICAgICAgICAgICAgcG9pbnRlckV2ZW50cz1cImJveC1ub25lXCJcbiAgICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICAgIHN0eWxlcy5yaWdodCxcbiAgICAgICAgICAgICAgc3R5bGVzLmV4cGFuZCxcbiAgICAgICAgICAgICAgeyBtYXJnaW5FbmQ6IGluc2V0cy5yaWdodCB9LFxuICAgICAgICAgICAgICByaWdodENvbnRhaW5lclN0eWxlLFxuICAgICAgICAgICAgXX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7cmlnaHRCdXR0b259XG4gICAgICAgICAgPC9BbmltYXRlZC5WaWV3PlxuICAgICAgICA8L1ZpZXc+XG4gICAgICA8L0FuaW1hdGVkLlZpZXc+XG4gICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgKTtcbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICBjb250ZW50OiB7XG4gICAgZmxleDogMSxcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICBhbGlnbkl0ZW1zOiAnc3RyZXRjaCcsXG4gIH0sXG4gIHRpdGxlOiB7XG4gICAgbWFyZ2luSG9yaXpvbnRhbDogMTYsXG4gICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICB9LFxuICBsZWZ0OiB7XG4gICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgIGFsaWduSXRlbXM6ICdmbGV4LXN0YXJ0JyxcbiAgfSxcbiAgcmlnaHQ6IHtcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgYWxpZ25JdGVtczogJ2ZsZXgtZW5kJyxcbiAgfSxcbiAgZXhwYW5kOiB7XG4gICAgZmxleEdyb3c6IDEsXG4gICAgZmxleEJhc2lzOiAwLFxuICB9LFxufSk7XG4iXX0=