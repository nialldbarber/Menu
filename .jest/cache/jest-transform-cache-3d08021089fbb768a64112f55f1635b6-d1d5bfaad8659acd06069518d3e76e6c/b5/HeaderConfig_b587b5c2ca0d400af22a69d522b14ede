a72ac6ab6219ee1c895f943260d21b4d
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = HeaderConfig;

var _elements = require("@react-navigation/elements");

var _native = require("@react-navigation/native");

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _reactNativeSafeAreaContext = require("react-native-safe-area-context");

var _reactNativeScreens = require("react-native-screens");

var _FontProcessor = require("./FontProcessor");

function _getRequireWildcardCache(nodeInterop) {
  if (typeof WeakMap !== "function") return null;
  var cacheBabelInterop = new WeakMap();
  var cacheNodeInterop = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {
    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
  })(nodeInterop);
}

function _interopRequireWildcard(obj, nodeInterop) {
  if (!nodeInterop && obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache(nodeInterop);

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function HeaderConfig(_ref2) {
  var headerBackImageSource = _ref2.headerBackImageSource,
      headerBackButtonMenuEnabled = _ref2.headerBackButtonMenuEnabled,
      headerBackTitle = _ref2.headerBackTitle,
      headerBackTitleStyle = _ref2.headerBackTitleStyle,
      _ref2$headerBackTitle = _ref2.headerBackTitleVisible,
      headerBackTitleVisible = _ref2$headerBackTitle === void 0 ? true : _ref2$headerBackTitle,
      headerBackVisible = _ref2.headerBackVisible,
      headerShadowVisible = _ref2.headerShadowVisible,
      headerLargeStyle = _ref2.headerLargeStyle,
      headerLargeTitle = _ref2.headerLargeTitle,
      headerLargeTitleShadowVisible = _ref2.headerLargeTitleShadowVisible,
      headerLargeTitleStyle = _ref2.headerLargeTitleStyle,
      headerLeft = _ref2.headerLeft,
      headerRight = _ref2.headerRight,
      headerShown = _ref2.headerShown,
      headerStyle = _ref2.headerStyle,
      headerBlurEffect = _ref2.headerBlurEffect,
      headerTintColor = _ref2.headerTintColor,
      headerTitle = _ref2.headerTitle,
      headerTitleAlign = _ref2.headerTitleAlign,
      headerTitleStyle = _ref2.headerTitleStyle,
      headerTransparent = _ref2.headerTransparent,
      headerSearchBarOptions = _ref2.headerSearchBarOptions,
      route = _ref2.route,
      title = _ref2.title,
      canGoBack = _ref2.canGoBack;

  var _ref, _headerTitleStyleFlat, _headerStyleFlattened;

  var insets = (0, _reactNativeSafeAreaContext.useSafeAreaInsets)();

  var _ref3 = (0, _native.useTheme)(),
      colors = _ref3.colors;

  var tintColor = headerTintColor !== null && headerTintColor !== void 0 ? headerTintColor : _reactNative.Platform.OS === 'ios' ? colors.primary : colors.text;
  var headerBackTitleStyleFlattened = _reactNative.StyleSheet.flatten(headerBackTitleStyle) || {};
  var headerLargeTitleStyleFlattened = _reactNative.StyleSheet.flatten(headerLargeTitleStyle) || {};
  var headerTitleStyleFlattened = _reactNative.StyleSheet.flatten(headerTitleStyle) || {};
  var headerStyleFlattened = _reactNative.StyleSheet.flatten(headerStyle) || {};
  var headerLargeStyleFlattened = _reactNative.StyleSheet.flatten(headerLargeStyle) || {};

  var _ref4 = (0, _FontProcessor.processFonts)([headerBackTitleStyleFlattened.fontFamily, headerLargeTitleStyleFlattened.fontFamily, headerTitleStyleFlattened.fontFamily]),
      _ref5 = (0, _slicedToArray2.default)(_ref4, 3),
      backTitleFontFamily = _ref5[0],
      largeTitleFontFamily = _ref5[1],
      titleFontFamily = _ref5[2];

  var titleText = title !== undefined ? title : route.name;
  var titleColor = (_ref = (_headerTitleStyleFlat = headerTitleStyleFlattened.color) !== null && _headerTitleStyleFlat !== void 0 ? _headerTitleStyleFlat : headerTintColor) !== null && _ref !== void 0 ? _ref : colors.text;
  var titleFontSize = headerTitleStyleFlattened.fontSize;
  var titleFontWeight = headerTitleStyleFlattened.fontWeight;
  var headerTitleStyleSupported = {
    color: titleColor
  };

  if (headerTitleStyleFlattened.fontFamily != null) {
    headerTitleStyleSupported.fontFamily = headerTitleStyleFlattened.fontFamily;
  }

  if (titleFontSize != null) {
    headerTitleStyleSupported.fontSize = titleFontSize;
  }

  if (titleFontWeight != null) {
    headerTitleStyleSupported.fontWeight = titleFontWeight;
  }

  var headerLeftElement = headerLeft === null || headerLeft === void 0 ? void 0 : headerLeft({
    tintColor: tintColor,
    label: headerBackTitle,
    canGoBack: canGoBack
  });
  var headerRightElement = headerRight === null || headerRight === void 0 ? void 0 : headerRight({
    tintColor: tintColor
  });
  var headerTitleElement = typeof headerTitle === 'function' ? headerTitle({
    tintColor: tintColor,
    children: titleText
  }) : null;

  if (_reactNative.Platform.OS === 'ios' && headerSearchBarOptions != null && _reactNativeScreens.SearchBar == null) {
    throw new Error("The current version of 'react-native-screens' doesn't support SearchBar in the header. Please update to the latest version to use this option.");
  }

  var backButtonInCustomView = headerBackVisible ? headerLeftElement != null : _reactNative.Platform.OS === 'android' && headerTitleElement != null;
  return React.createElement(_reactNativeScreens.ScreenStackHeaderConfig, {
    backButtonInCustomView: backButtonInCustomView,
    backgroundColor: (_headerStyleFlattened = headerStyleFlattened.backgroundColor) !== null && _headerStyleFlattened !== void 0 ? _headerStyleFlattened : headerTransparent ? 'transparent' : colors.card,
    backTitle: headerBackTitleVisible ? headerBackTitle : ' ',
    backTitleFontFamily: backTitleFontFamily,
    backTitleFontSize: headerBackTitleStyleFlattened.fontSize,
    blurEffect: headerBlurEffect,
    color: tintColor,
    direction: _reactNative.I18nManager.isRTL ? 'rtl' : 'ltr',
    disableBackButtonMenu: headerBackButtonMenuEnabled === false,
    hidden: headerShown === false,
    hideBackButton: headerBackVisible === false,
    hideShadow: headerShadowVisible === false,
    largeTitle: headerLargeTitle,
    largeTitleBackgroundColor: headerLargeStyleFlattened.backgroundColor,
    largeTitleColor: headerLargeTitleStyleFlattened.color,
    largeTitleFontFamily: largeTitleFontFamily,
    largeTitleFontSize: headerLargeTitleStyleFlattened.fontSize,
    largeTitleFontWeight: headerLargeTitleStyleFlattened.fontWeight,
    largeTitleHideShadow: headerLargeTitleShadowVisible === false,
    title: typeof headerTitle === 'string' ? headerTitle : titleText,
    titleColor: titleColor,
    titleFontFamily: titleFontFamily,
    titleFontSize: titleFontSize,
    titleFontWeight: titleFontWeight,
    topInsetEnabled: insets.top !== 0,
    translucent: headerTransparent === true
  }, _reactNative.Platform.OS === 'ios' ? React.createElement(React.Fragment, null, headerLeftElement != null ? React.createElement(_reactNativeScreens.ScreenStackHeaderLeftView, null, headerLeftElement) : null, headerTitleElement != null ? React.createElement(_reactNativeScreens.ScreenStackHeaderCenterView, null, headerTitleElement) : null) : React.createElement(React.Fragment, null, headerLeftElement != null || typeof headerTitle === 'function' ? React.createElement(_reactNativeScreens.ScreenStackHeaderLeftView, null, React.createElement(_reactNative.View, {
    style: styles.row
  }, headerLeftElement, headerTitleAlign !== 'center' ? typeof headerTitle === 'function' ? headerTitleElement : React.createElement(_elements.HeaderTitle, {
    tintColor: tintColor,
    style: headerTitleStyleSupported
  }, titleText) : null)) : null, headerTitleAlign === 'center' ? React.createElement(_reactNativeScreens.ScreenStackHeaderCenterView, null, typeof headerTitle === 'function' ? headerTitleElement : React.createElement(_elements.HeaderTitle, {
    tintColor: tintColor,
    style: headerTitleStyleSupported
  }, titleText)) : null), headerBackImageSource !== undefined ? React.createElement(_reactNativeScreens.ScreenStackHeaderBackButtonImage, {
    source: headerBackImageSource
  }) : null, headerRightElement != null ? React.createElement(_reactNativeScreens.ScreenStackHeaderRightView, null, headerRightElement) : null, _reactNative.Platform.OS === 'ios' && headerSearchBarOptions != null ? React.createElement(_reactNativeScreens.ScreenStackHeaderSearchBarView, null, React.createElement(_reactNativeScreens.SearchBar, headerSearchBarOptions)) : null);
}

var styles = _reactNative.StyleSheet.create({
  row: {
    flexDirection: 'row',
    alignItems: 'center'
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkhlYWRlckNvbmZpZy50c3giXSwibmFtZXMiOlsiaGVhZGVyQmFja1RpdGxlVmlzaWJsZSIsImNhbkdvQmFjayIsImluc2V0cyIsImNvbG9ycyIsInRpbnRDb2xvciIsImhlYWRlclRpbnRDb2xvciIsIlBsYXRmb3JtIiwiaGVhZGVyQmFja1RpdGxlU3R5bGVGbGF0dGVuZWQiLCJTdHlsZVNoZWV0IiwiaGVhZGVyTGFyZ2VUaXRsZVN0eWxlRmxhdHRlbmVkIiwiaGVhZGVyVGl0bGVTdHlsZUZsYXR0ZW5lZCIsImhlYWRlclN0eWxlRmxhdHRlbmVkIiwiaGVhZGVyTGFyZ2VTdHlsZUZsYXR0ZW5lZCIsInRpdGxlVGV4dCIsInRpdGxlIiwicm91dGUiLCJ0aXRsZUNvbG9yIiwidGl0bGVGb250U2l6ZSIsInRpdGxlRm9udFdlaWdodCIsImhlYWRlclRpdGxlU3R5bGVTdXBwb3J0ZWQiLCJjb2xvciIsImhlYWRlckxlZnRFbGVtZW50IiwiaGVhZGVyTGVmdCIsImxhYmVsIiwiaGVhZGVyUmlnaHRFbGVtZW50IiwiaGVhZGVyUmlnaHQiLCJoZWFkZXJUaXRsZUVsZW1lbnQiLCJoZWFkZXJUaXRsZSIsImNoaWxkcmVuIiwiaGVhZGVyU2VhcmNoQmFyT3B0aW9ucyIsIlNlYXJjaEJhciIsImJhY2tCdXR0b25JbkN1c3RvbVZpZXciLCJoZWFkZXJCYWNrVmlzaWJsZSIsImhlYWRlclRyYW5zcGFyZW50IiwiSTE4bk1hbmFnZXIiLCJoZWFkZXJCYWNrQnV0dG9uTWVudUVuYWJsZWQiLCJoZWFkZXJTaG93biIsImhlYWRlclNoYWRvd1Zpc2libGUiLCJoZWFkZXJMYXJnZVRpdGxlU2hhZG93VmlzaWJsZSIsInN0eWxlcyIsInJvdyIsImhlYWRlckJhY2tJbWFnZVNvdXJjZSIsImZsZXhEaXJlY3Rpb24iLCJhbGlnbkl0ZW1zIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLElBQUEsU0FBQSxHQUFBLE9BQUEsQ0FBQSw0QkFBQSxDQUFBOztBQUNBLElBQUEsT0FB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ZSB9IGZyb20gJ0ByZWFjdC1uYXZpZ2F0aW9uL2VsZW1lbnRzJztcbmltcG9ydCB7IFJvdXRlLCB1c2VUaGVtZSB9IGZyb20gJ0ByZWFjdC1uYXZpZ2F0aW9uL25hdGl2ZSc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICBJMThuTWFuYWdlcixcbiAgUGxhdGZvcm0sXG4gIFN0eWxlU2hlZXQsXG4gIFRleHRTdHlsZSxcbiAgVmlldyxcbn0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCB7IHVzZVNhZmVBcmVhSW5zZXRzIH0gZnJvbSAncmVhY3QtbmF0aXZlLXNhZmUtYXJlYS1jb250ZXh0JztcbmltcG9ydCB7XG4gIFNjcmVlblN0YWNrSGVhZGVyQmFja0J1dHRvbkltYWdlLFxuICBTY3JlZW5TdGFja0hlYWRlckNlbnRlclZpZXcsXG4gIFNjcmVlblN0YWNrSGVhZGVyQ29uZmlnLFxuICBTY3JlZW5TdGFja0hlYWRlckxlZnRWaWV3LFxuICBTY3JlZW5TdGFja0hlYWRlclJpZ2h0VmlldyxcbiAgU2NyZWVuU3RhY2tIZWFkZXJTZWFyY2hCYXJWaWV3LFxuICBTZWFyY2hCYXIsXG59IGZyb20gJ3JlYWN0LW5hdGl2ZS1zY3JlZW5zJztcblxuaW1wb3J0IHR5cGUgeyBOYXRpdmVTdGFja05hdmlnYXRpb25PcHRpb25zIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgcHJvY2Vzc0ZvbnRzIH0gZnJvbSAnLi9Gb250UHJvY2Vzc29yJztcblxudHlwZSBQcm9wcyA9IE5hdGl2ZVN0YWNrTmF2aWdhdGlvbk9wdGlvbnMgJiB7XG4gIHJvdXRlOiBSb3V0ZTxzdHJpbmc+O1xuICBjYW5Hb0JhY2s6IGJvb2xlYW47XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIZWFkZXJDb25maWcoe1xuICBoZWFkZXJCYWNrSW1hZ2VTb3VyY2UsXG4gIGhlYWRlckJhY2tCdXR0b25NZW51RW5hYmxlZCxcbiAgaGVhZGVyQmFja1RpdGxlLFxuICBoZWFkZXJCYWNrVGl0bGVTdHlsZSxcbiAgaGVhZGVyQmFja1RpdGxlVmlzaWJsZSA9IHRydWUsXG4gIGhlYWRlckJhY2tWaXNpYmxlLFxuICBoZWFkZXJTaGFkb3dWaXNpYmxlLFxuICBoZWFkZXJMYXJnZVN0eWxlLFxuICBoZWFkZXJMYXJnZVRpdGxlLFxuICBoZWFkZXJMYXJnZVRpdGxlU2hhZG93VmlzaWJsZSxcbiAgaGVhZGVyTGFyZ2VUaXRsZVN0eWxlLFxuICBoZWFkZXJMZWZ0LFxuICBoZWFkZXJSaWdodCxcbiAgaGVhZGVyU2hvd24sXG4gIGhlYWRlclN0eWxlLFxuICBoZWFkZXJCbHVyRWZmZWN0LFxuICBoZWFkZXJUaW50Q29sb3IsXG4gIGhlYWRlclRpdGxlLFxuICBoZWFkZXJUaXRsZUFsaWduLFxuICBoZWFkZXJUaXRsZVN0eWxlLFxuICBoZWFkZXJUcmFuc3BhcmVudCxcbiAgaGVhZGVyU2VhcmNoQmFyT3B0aW9ucyxcbiAgcm91dGUsXG4gIHRpdGxlLFxuICBjYW5Hb0JhY2ssXG59OiBQcm9wcyk6IEpTWC5FbGVtZW50IHtcbiAgY29uc3QgaW5zZXRzID0gdXNlU2FmZUFyZWFJbnNldHMoKTtcbiAgY29uc3QgeyBjb2xvcnMgfSA9IHVzZVRoZW1lKCk7XG4gIGNvbnN0IHRpbnRDb2xvciA9XG4gICAgaGVhZGVyVGludENvbG9yID8/IChQbGF0Zm9ybS5PUyA9PT0gJ2lvcycgPyBjb2xvcnMucHJpbWFyeSA6IGNvbG9ycy50ZXh0KTtcblxuICBjb25zdCBoZWFkZXJCYWNrVGl0bGVTdHlsZUZsYXR0ZW5lZCA9XG4gICAgU3R5bGVTaGVldC5mbGF0dGVuKGhlYWRlckJhY2tUaXRsZVN0eWxlKSB8fCB7fTtcbiAgY29uc3QgaGVhZGVyTGFyZ2VUaXRsZVN0eWxlRmxhdHRlbmVkID1cbiAgICBTdHlsZVNoZWV0LmZsYXR0ZW4oaGVhZGVyTGFyZ2VUaXRsZVN0eWxlKSB8fCB7fTtcbiAgY29uc3QgaGVhZGVyVGl0bGVTdHlsZUZsYXR0ZW5lZCA9IFN0eWxlU2hlZXQuZmxhdHRlbihoZWFkZXJUaXRsZVN0eWxlKSB8fCB7fTtcbiAgY29uc3QgaGVhZGVyU3R5bGVGbGF0dGVuZWQgPSBTdHlsZVNoZWV0LmZsYXR0ZW4oaGVhZGVyU3R5bGUpIHx8IHt9O1xuICBjb25zdCBoZWFkZXJMYXJnZVN0eWxlRmxhdHRlbmVkID0gU3R5bGVTaGVldC5mbGF0dGVuKGhlYWRlckxhcmdlU3R5bGUpIHx8IHt9O1xuXG4gIGNvbnN0IFtiYWNrVGl0bGVGb250RmFtaWx5LCBsYXJnZVRpdGxlRm9udEZhbWlseSwgdGl0bGVGb250RmFtaWx5XSA9XG4gICAgcHJvY2Vzc0ZvbnRzKFtcbiAgICAgIGhlYWRlckJhY2tUaXRsZVN0eWxlRmxhdHRlbmVkLmZvbnRGYW1pbHksXG4gICAgICBoZWFkZXJMYXJnZVRpdGxlU3R5bGVGbGF0dGVuZWQuZm9udEZhbWlseSxcbiAgICAgIGhlYWRlclRpdGxlU3R5bGVGbGF0dGVuZWQuZm9udEZhbWlseSxcbiAgICBdKTtcblxuICBjb25zdCB0aXRsZVRleHQgPSB0aXRsZSAhPT0gdW5kZWZpbmVkID8gdGl0bGUgOiByb3V0ZS5uYW1lO1xuICBjb25zdCB0aXRsZUNvbG9yID1cbiAgICBoZWFkZXJUaXRsZVN0eWxlRmxhdHRlbmVkLmNvbG9yID8/IGhlYWRlclRpbnRDb2xvciA/PyBjb2xvcnMudGV4dDtcbiAgY29uc3QgdGl0bGVGb250U2l6ZSA9IGhlYWRlclRpdGxlU3R5bGVGbGF0dGVuZWQuZm9udFNpemU7XG4gIGNvbnN0IHRpdGxlRm9udFdlaWdodCA9IGhlYWRlclRpdGxlU3R5bGVGbGF0dGVuZWQuZm9udFdlaWdodDtcblxuICBjb25zdCBoZWFkZXJUaXRsZVN0eWxlU3VwcG9ydGVkOiBUZXh0U3R5bGUgPSB7IGNvbG9yOiB0aXRsZUNvbG9yIH07XG5cbiAgaWYgKGhlYWRlclRpdGxlU3R5bGVGbGF0dGVuZWQuZm9udEZhbWlseSAhPSBudWxsKSB7XG4gICAgaGVhZGVyVGl0bGVTdHlsZVN1cHBvcnRlZC5mb250RmFtaWx5ID0gaGVhZGVyVGl0bGVTdHlsZUZsYXR0ZW5lZC5mb250RmFtaWx5O1xuICB9XG5cbiAgaWYgKHRpdGxlRm9udFNpemUgIT0gbnVsbCkge1xuICAgIGhlYWRlclRpdGxlU3R5bGVTdXBwb3J0ZWQuZm9udFNpemUgPSB0aXRsZUZvbnRTaXplO1xuICB9XG5cbiAgaWYgKHRpdGxlRm9udFdlaWdodCAhPSBudWxsKSB7XG4gICAgaGVhZGVyVGl0bGVTdHlsZVN1cHBvcnRlZC5mb250V2VpZ2h0ID0gdGl0bGVGb250V2VpZ2h0O1xuICB9XG5cbiAgY29uc3QgaGVhZGVyTGVmdEVsZW1lbnQgPSBoZWFkZXJMZWZ0Py4oe1xuICAgIHRpbnRDb2xvcixcbiAgICBsYWJlbDogaGVhZGVyQmFja1RpdGxlLFxuICAgIGNhbkdvQmFjayxcbiAgfSk7XG4gIGNvbnN0IGhlYWRlclJpZ2h0RWxlbWVudCA9IGhlYWRlclJpZ2h0Py4oeyB0aW50Q29sb3IgfSk7XG4gIGNvbnN0IGhlYWRlclRpdGxlRWxlbWVudCA9XG4gICAgdHlwZW9mIGhlYWRlclRpdGxlID09PSAnZnVuY3Rpb24nXG4gICAgICA/IGhlYWRlclRpdGxlKHsgdGludENvbG9yLCBjaGlsZHJlbjogdGl0bGVUZXh0IH0pXG4gICAgICA6IG51bGw7XG5cbiAgaWYgKFxuICAgIFBsYXRmb3JtLk9TID09PSAnaW9zJyAmJlxuICAgIGhlYWRlclNlYXJjaEJhck9wdGlvbnMgIT0gbnVsbCAmJlxuICAgIFNlYXJjaEJhciA9PSBudWxsXG4gICkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBUaGUgY3VycmVudCB2ZXJzaW9uIG9mICdyZWFjdC1uYXRpdmUtc2NyZWVucycgZG9lc24ndCBzdXBwb3J0IFNlYXJjaEJhciBpbiB0aGUgaGVhZGVyLiBQbGVhc2UgdXBkYXRlIHRvIHRoZSBsYXRlc3QgdmVyc2lvbiB0byB1c2UgdGhpcyBvcHRpb24uYFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogV2UgbmVlZCB0byBzZXQgdGhpcyBpbiBpZjpcbiAgICogLSBCYWNrIGJ1dHRvbiBzaG91bGQgc3RheSB2aXNpYmxlIHdoZW4gYGhlYWRlckxlZnRgIGlzIHNwZWNpZmllZFxuICAgKiAtIElmIGBoZWFkZXJUaXRsZWAgZm9yIEFuZHJvaWQgaXMgc3BlY2lmaWVkLCBzbyB3ZSBvbmx5IG5lZWQgdG8gcmVtb3ZlIHRoZSB0aXRsZSBhbmQga2VlcCB0aGUgYmFjayBidXR0b25cbiAgICovXG4gIGNvbnN0IGJhY2tCdXR0b25JbkN1c3RvbVZpZXcgPSBoZWFkZXJCYWNrVmlzaWJsZVxuICAgID8gaGVhZGVyTGVmdEVsZW1lbnQgIT0gbnVsbFxuICAgIDogUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJyAmJiBoZWFkZXJUaXRsZUVsZW1lbnQgIT0gbnVsbDtcblxuICByZXR1cm4gKFxuICAgIDxTY3JlZW5TdGFja0hlYWRlckNvbmZpZ1xuICAgICAgYmFja0J1dHRvbkluQ3VzdG9tVmlldz17YmFja0J1dHRvbkluQ3VzdG9tVmlld31cbiAgICAgIGJhY2tncm91bmRDb2xvcj17XG4gICAgICAgIGhlYWRlclN0eWxlRmxhdHRlbmVkLmJhY2tncm91bmRDb2xvciA/P1xuICAgICAgICAoaGVhZGVyVHJhbnNwYXJlbnQgPyAndHJhbnNwYXJlbnQnIDogY29sb3JzLmNhcmQpXG4gICAgICB9XG4gICAgICBiYWNrVGl0bGU9e2hlYWRlckJhY2tUaXRsZVZpc2libGUgPyBoZWFkZXJCYWNrVGl0bGUgOiAnICd9XG4gICAgICBiYWNrVGl0bGVGb250RmFtaWx5PXtiYWNrVGl0bGVGb250RmFtaWx5fVxuICAgICAgYmFja1RpdGxlRm9udFNpemU9e2hlYWRlckJhY2tUaXRsZVN0eWxlRmxhdHRlbmVkLmZvbnRTaXplfVxuICAgICAgYmx1ckVmZmVjdD17aGVhZGVyQmx1ckVmZmVjdH1cbiAgICAgIGNvbG9yPXt0aW50Q29sb3J9XG4gICAgICBkaXJlY3Rpb249e0kxOG5NYW5hZ2VyLmlzUlRMID8gJ3J0bCcgOiAnbHRyJ31cbiAgICAgIGRpc2FibGVCYWNrQnV0dG9uTWVudT17aGVhZGVyQmFja0J1dHRvbk1lbnVFbmFibGVkID09PSBmYWxzZX1cbiAgICAgIGhpZGRlbj17aGVhZGVyU2hvd24gPT09IGZhbHNlfVxuICAgICAgaGlkZUJhY2tCdXR0b249e2hlYWRlckJhY2tWaXNpYmxlID09PSBmYWxzZX1cbiAgICAgIGhpZGVTaGFkb3c9e2hlYWRlclNoYWRvd1Zpc2libGUgPT09IGZhbHNlfVxuICAgICAgbGFyZ2VUaXRsZT17aGVhZGVyTGFyZ2VUaXRsZX1cbiAgICAgIGxhcmdlVGl0bGVCYWNrZ3JvdW5kQ29sb3I9e2hlYWRlckxhcmdlU3R5bGVGbGF0dGVuZWQuYmFja2dyb3VuZENvbG9yfVxuICAgICAgbGFyZ2VUaXRsZUNvbG9yPXtoZWFkZXJMYXJnZVRpdGxlU3R5bGVGbGF0dGVuZWQuY29sb3J9XG4gICAgICBsYXJnZVRpdGxlRm9udEZhbWlseT17bGFyZ2VUaXRsZUZvbnRGYW1pbHl9XG4gICAgICBsYXJnZVRpdGxlRm9udFNpemU9e2hlYWRlckxhcmdlVGl0bGVTdHlsZUZsYXR0ZW5lZC5mb250U2l6ZX1cbiAgICAgIGxhcmdlVGl0bGVGb250V2VpZ2h0PXtoZWFkZXJMYXJnZVRpdGxlU3R5bGVGbGF0dGVuZWQuZm9udFdlaWdodH1cbiAgICAgIGxhcmdlVGl0bGVIaWRlU2hhZG93PXtoZWFkZXJMYXJnZVRpdGxlU2hhZG93VmlzaWJsZSA9PT0gZmFsc2V9XG4gICAgICB0aXRsZT17dHlwZW9mIGhlYWRlclRpdGxlID09PSAnc3RyaW5nJyA/IGhlYWRlclRpdGxlIDogdGl0bGVUZXh0fVxuICAgICAgdGl0bGVDb2xvcj17dGl0bGVDb2xvcn1cbiAgICAgIHRpdGxlRm9udEZhbWlseT17dGl0bGVGb250RmFtaWx5fVxuICAgICAgdGl0bGVGb250U2l6ZT17dGl0bGVGb250U2l6ZX1cbiAgICAgIHRpdGxlRm9udFdlaWdodD17dGl0bGVGb250V2VpZ2h0fVxuICAgICAgdG9wSW5zZXRFbmFibGVkPXtpbnNldHMudG9wICE9PSAwfVxuICAgICAgdHJhbnNsdWNlbnQ9e1xuICAgICAgICAvLyBUaGlzIGRlZmF1bHRzIHRvIGB0cnVlYCwgc28gd2UgY2FuJ3QgcGFzcyBgdW5kZWZpbmVkYFxuICAgICAgICBoZWFkZXJUcmFuc3BhcmVudCA9PT0gdHJ1ZVxuICAgICAgfVxuICAgID5cbiAgICAgIHtQbGF0Zm9ybS5PUyA9PT0gJ2lvcycgPyAoXG4gICAgICAgIDw+XG4gICAgICAgICAge2hlYWRlckxlZnRFbGVtZW50ICE9IG51bGwgPyAoXG4gICAgICAgICAgICA8U2NyZWVuU3RhY2tIZWFkZXJMZWZ0Vmlldz5cbiAgICAgICAgICAgICAge2hlYWRlckxlZnRFbGVtZW50fVxuICAgICAgICAgICAgPC9TY3JlZW5TdGFja0hlYWRlckxlZnRWaWV3PlxuICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgIHtoZWFkZXJUaXRsZUVsZW1lbnQgIT0gbnVsbCA/IChcbiAgICAgICAgICAgIDxTY3JlZW5TdGFja0hlYWRlckNlbnRlclZpZXc+XG4gICAgICAgICAgICAgIHtoZWFkZXJUaXRsZUVsZW1lbnR9XG4gICAgICAgICAgICA8L1NjcmVlblN0YWNrSGVhZGVyQ2VudGVyVmlldz5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPC8+XG4gICAgICApIDogKFxuICAgICAgICA8PlxuICAgICAgICAgIHtoZWFkZXJMZWZ0RWxlbWVudCAhPSBudWxsIHx8IHR5cGVvZiBoZWFkZXJUaXRsZSA9PT0gJ2Z1bmN0aW9uJyA/IChcbiAgICAgICAgICAgIDxTY3JlZW5TdGFja0hlYWRlckxlZnRWaWV3PlxuICAgICAgICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLnJvd30+XG4gICAgICAgICAgICAgICAge2hlYWRlckxlZnRFbGVtZW50fVxuICAgICAgICAgICAgICAgIHtoZWFkZXJUaXRsZUFsaWduICE9PSAnY2VudGVyJyA/IChcbiAgICAgICAgICAgICAgICAgIHR5cGVvZiBoZWFkZXJUaXRsZSA9PT0gJ2Z1bmN0aW9uJyA/IChcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyVGl0bGVFbGVtZW50XG4gICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICA8SGVhZGVyVGl0bGVcbiAgICAgICAgICAgICAgICAgICAgICB0aW50Q29sb3I9e3RpbnRDb2xvcn1cbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17aGVhZGVyVGl0bGVTdHlsZVN1cHBvcnRlZH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIHt0aXRsZVRleHR9XG4gICAgICAgICAgICAgICAgICAgIDwvSGVhZGVyVGl0bGU+XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgICAgIDwvU2NyZWVuU3RhY2tIZWFkZXJMZWZ0Vmlldz5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICB7aGVhZGVyVGl0bGVBbGlnbiA9PT0gJ2NlbnRlcicgPyAoXG4gICAgICAgICAgICA8U2NyZWVuU3RhY2tIZWFkZXJDZW50ZXJWaWV3PlxuICAgICAgICAgICAgICB7dHlwZW9mIGhlYWRlclRpdGxlID09PSAnZnVuY3Rpb24nID8gKFxuICAgICAgICAgICAgICAgIGhlYWRlclRpdGxlRWxlbWVudFxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxIZWFkZXJUaXRsZVxuICAgICAgICAgICAgICAgICAgdGludENvbG9yPXt0aW50Q29sb3J9XG4gICAgICAgICAgICAgICAgICBzdHlsZT17aGVhZGVyVGl0bGVTdHlsZVN1cHBvcnRlZH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7dGl0bGVUZXh0fVxuICAgICAgICAgICAgICAgIDwvSGVhZGVyVGl0bGU+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L1NjcmVlblN0YWNrSGVhZGVyQ2VudGVyVmlldz5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPC8+XG4gICAgICApfVxuICAgICAge2hlYWRlckJhY2tJbWFnZVNvdXJjZSAhPT0gdW5kZWZpbmVkID8gKFxuICAgICAgICA8U2NyZWVuU3RhY2tIZWFkZXJCYWNrQnV0dG9uSW1hZ2Ugc291cmNlPXtoZWFkZXJCYWNrSW1hZ2VTb3VyY2V9IC8+XG4gICAgICApIDogbnVsbH1cbiAgICAgIHtoZWFkZXJSaWdodEVsZW1lbnQgIT0gbnVsbCA/IChcbiAgICAgICAgPFNjcmVlblN0YWNrSGVhZGVyUmlnaHRWaWV3PlxuICAgICAgICAgIHtoZWFkZXJSaWdodEVsZW1lbnR9XG4gICAgICAgIDwvU2NyZWVuU3RhY2tIZWFkZXJSaWdodFZpZXc+XG4gICAgICApIDogbnVsbH1cbiAgICAgIHtQbGF0Zm9ybS5PUyA9PT0gJ2lvcycgJiYgaGVhZGVyU2VhcmNoQmFyT3B0aW9ucyAhPSBudWxsID8gKFxuICAgICAgICA8U2NyZWVuU3RhY2tIZWFkZXJTZWFyY2hCYXJWaWV3PlxuICAgICAgICAgIDxTZWFyY2hCYXIgey4uLmhlYWRlclNlYXJjaEJhck9wdGlvbnN9IC8+XG4gICAgICAgIDwvU2NyZWVuU3RhY2tIZWFkZXJTZWFyY2hCYXJWaWV3PlxuICAgICAgKSA6IG51bGx9XG4gICAgPC9TY3JlZW5TdGFja0hlYWRlckNvbmZpZz5cbiAgKTtcbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICByb3c6IHtcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgfSxcbn0pO1xuIl19