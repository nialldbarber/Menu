ea7dd17bf8987be004e7d9b29261eaf8
function _interopDefault(ex) {
  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;
}

var React = require('react');

var React__default = _interopDefault(React);

function Suspender(_ref) {
  var freeze = _ref.freeze,
      children = _ref.children;
  var promiseCache = React.useRef({}).current;

  if (freeze && !promiseCache.promise) {
    promiseCache.promise = new Promise(function (res) {
      promiseCache.resolve = res;
    });
    throw promiseCache.promise;
  } else if (freeze) {
    throw promiseCache.promise;
  } else if (promiseCache.promise) {
    promiseCache.resolve();
    promiseCache.promise = undefined;
  }

  return React__default.createElement(React.Fragment, null, children);
}

function Freeze(_ref2) {
  var freeze = _ref2.freeze,
      children = _ref2.children,
      _ref2$placeholder = _ref2.placeholder,
      placeholder = _ref2$placeholder === void 0 ? null : _ref2$placeholder;
  return React__default.createElement(React.Suspense, {
    fallback: placeholder
  }, React__default.createElement(Suspender, {
    freeze: freeze
  }, children));
}

exports.Freeze = Freeze;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC50c3giXSwibmFtZXMiOlsiZnJlZXplIiwiY2hpbGRyZW4iLCJwcm9taXNlQ2FjaGUiLCJ1c2VSZWYiLCJSZWFjdCIsIkZyYWdtZW50IiwiRnJlZXplIiwicGxhY2Vob2xkZXIiLCJTdXNwZW5zZSIsImZhbGxiYWNrIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQU9BLFNBQUEsU0FBQSxDQUFBLElBQUEsRUFBQTtNQUNFQSxNQUFBQSxHQUFBQSxJQUFBQSxDQUFBQSxNO01BQ0FDLFFBQUFBLEdBQUFBLElBQUFBLENBQUFBLFE7QUFLQSxNQUFNQyxZQUFZLEdBQUdDLEtBQUFBLENBQUFBLE1BQUFBLENBQUFBLEVBQUFBLEVBQXJCLE9BQUE7O0FBQ0EsTUFBSUgsTUFBTSxJQUFJLENBQUNFLFlBQVksQ0FBM0IsT0FBQSxFQUFxQztBQUNuQ0EsSUFBQUEsWUFBWSxDQUFaQSxPQUFBQSxHQUF1QixJQUFBLE9BQUEsQ0FBWSxVQUFBLEdBQUEsRUFBQTtBQUNqQ0EsTUFBQUEsWUFBWSxDQUFaQSxPQUFBQSxHQUFBQSxHQUFBQTtBQURGQSxLQUF1QixDQUF2QkE7QUFHQSxVQUFNQSxZQUFZLENBQWxCLE9BQUE7QUFKRixHQUFBLE1BS08sSUFBQSxNQUFBLEVBQVk7QUFDakIsVUFBTUEsWUFBWSxDQUFsQixPQUFBO0FBREssR0FBQSxNQUVBLElBQUlBLFlBQVksQ0FBaEIsT0FBQSxFQUEwQjtBQUMvQkEsSUFBQUEsWUFBWSxDQUFaQSxPQUFBQTtBQUNBQSxJQUFBQSxZQUFZLENBQVpBLE9BQUFBLEdBQUFBLFNBQUFBO0FBQ0Q7O0FBRUQsU0FBT0UsY0FBQUEsQ0FBQUEsYUFBQUEsQ0FBQ0MsS0FBQUEsQ0FBREQsUUFBQUEsRUFBQUEsSUFBQUEsRUFBUCxRQUFPQSxDQUFQO0FBQ0Q7O1NBUWVFLE0sQ0FBQUEsSyxFQUFBQTtNQUFTTixNQUFBQSxHQUFBQSxLQUFBQSxDQUFBQSxNO01BQVFDLFFBQUFBLEdBQUFBLEtBQUFBLENBQUFBLFE7Z0NBQVVNLFc7TUFBQUEsV0FBQUEsR0FBQUEsaUJBQUFBLEtBQUFBLEtBQUFBLENBQUFBLEdBQWMsSUFBZEEsR0FBYyxpQjtBQUN2RCxTQUNFLGNBQUEsQ0FBQSxhQUFBLENBQUNDLEtBQUFBLENBQUQsUUFBQSxFQUFBO0FBQVVDLElBQUFBLFFBQVEsRUFBRUY7QUFBcEIsR0FBQSxFQUNFLGNBQUEsQ0FBQSxhQUFBLENBQUEsU0FBQSxFQUFBO0FBQVdQLElBQUFBLE1BQU0sRUFBRUE7QUFBbkIsR0FBQSxFQUZKLFFBRUksQ0FERixDQURGO0FBS0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlUmVmLCBTdXNwZW5zZSwgRnJhZ21lbnQgfSBmcm9tIFwicmVhY3RcIjtcblxuaW50ZXJmYWNlIFN0b3JhZ2VSZWYge1xuICBwcm9taXNlPzogUHJvbWlzZTx2b2lkPjtcbiAgcmVzb2x2ZT86ICh2YWx1ZTogdm9pZCB8IFByb21pc2VMaWtlPHZvaWQ+KSA9PiB2b2lkO1xufVxuXG5mdW5jdGlvbiBTdXNwZW5kZXIoe1xuICBmcmVlemUsXG4gIGNoaWxkcmVuLFxufToge1xuICBmcmVlemU6IGJvb2xlYW47XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG59KSB7XG4gIGNvbnN0IHByb21pc2VDYWNoZSA9IHVzZVJlZjxTdG9yYWdlUmVmPih7fSkuY3VycmVudDtcbiAgaWYgKGZyZWV6ZSAmJiAhcHJvbWlzZUNhY2hlLnByb21pc2UpIHtcbiAgICBwcm9taXNlQ2FjaGUucHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXMpID0+IHtcbiAgICAgIHByb21pc2VDYWNoZS5yZXNvbHZlID0gcmVzO1xuICAgIH0pO1xuICAgIHRocm93IHByb21pc2VDYWNoZS5wcm9taXNlO1xuICB9IGVsc2UgaWYgKGZyZWV6ZSkge1xuICAgIHRocm93IHByb21pc2VDYWNoZS5wcm9taXNlO1xuICB9IGVsc2UgaWYgKHByb21pc2VDYWNoZS5wcm9taXNlKSB7XG4gICAgcHJvbWlzZUNhY2hlLnJlc29sdmUhKCk7XG4gICAgcHJvbWlzZUNhY2hlLnByb21pc2UgPSB1bmRlZmluZWQ7XG4gIH1cblxuICByZXR1cm4gPEZyYWdtZW50PntjaGlsZHJlbn08L0ZyYWdtZW50Pjtcbn1cblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgZnJlZXplOiBib29sZWFuO1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xuICBwbGFjZWhvbGRlcj86IFJlYWN0LlJlYWN0Tm9kZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEZyZWV6ZSh7IGZyZWV6ZSwgY2hpbGRyZW4sIHBsYWNlaG9sZGVyID0gbnVsbCB9OiBQcm9wcykge1xuICByZXR1cm4gKFxuICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17cGxhY2Vob2xkZXJ9PlxuICAgICAgPFN1c3BlbmRlciBmcmVlemU9e2ZyZWV6ZX0+e2NoaWxkcmVufTwvU3VzcGVuZGVyPlxuICAgIDwvU3VzcGVuc2U+XG4gICk7XG59XG4iXX0=