{"version":3,"sources":["AppContainer.js"],"names":["AppContainer","state","inspector","mainKey","hasError","_subscription","rootTag","props","__DEV__","global","__RCTProfileIsProfiling","RCTDeviceEventEmitter","addListener","Inspector","require","_mainRef","updateInspectedView","setState","s","remove","logBox","internal_excludeLogBox","LogBoxNotificationContainer","default","innerView","styles","appContainer","ref","children","Wrapper","WrapperComponent","initialProps","fabric","showArchitectureIndicator","React","Component","getDerivedStateFromError","undefined","childContextTypes","PropTypes","number","StyleSheet","create","flex","LogBox","install","module","exports"],"mappings":"AAUA;;;;;;;;;;;;;;AAEA;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;;;;;;;;;IAoBMA,Y;;;;;;;;;;;;;;;UACJC,K,GAAe;AACbC,MAAAA,SAAS,EAAE,IADE;AAEbC,MAAAA,OAAO,EAAE,CAFI;AAGbC,MAAAA,QAAQ,EAAE;AAHG,K;UAMfC,a,GAAoC,I;;;;;;WAUpC,2BAA2B;AACzB,aAAO;AACLC,QAAAA,OAAO,EAAE,KAAKC,KAAL,CAAWD;AADf,OAAP;AAGD;;;WAED,6BAA0B;AAAA;;AACxB,UAAIE,OAAJ,EAAa;AACX,YAAI,CAACC,MAAM,CAACC,uBAAZ,EAAqC;AACnC,eAAKL,aAAL,GAAqBM,+BAAsBC,WAAtB,CACnB,wBADmB,EAEnB,YAAM;AACJ,gBAAMC,SAAS,GAAGC,OAAO,0BAAzB;;AACA,gBAAMZ,SAAS,GAAG,MAAI,CAACD,KAAL,CAAWC,SAAX,GAAuB,IAAvB,GAChB,qBAAC,SAAD;AACE,cAAA,aAAa,EAAE,MAAI,CAACa,QADtB;AAEE,cAAA,oBAAoB,EAAE,8BAAAC,mBAAmB,EAAI;AAC3C,gBAAA,MAAI,CAACC,QAAL,CACE,UAAAC,CAAC;AAAA,yBAAK;AAACf,oBAAAA,OAAO,EAAEe,CAAC,CAACf,OAAF,GAAY;AAAtB,mBAAL;AAAA,iBADH,EAEE;AAAA,yBAAMa,mBAAmB,CAAC,MAAI,CAACD,QAAN,CAAzB;AAAA,iBAFF;AAID;AAPH,cADF;;AAWA,YAAA,MAAI,CAACE,QAAL,CAAc;AAACf,cAAAA,SAAS,EAATA;AAAD,aAAd;AACD,WAhBkB,CAArB;AAkBD;AACF;AACF;;;WAED,gCAA6B;AAC3B,UAAI,KAAKG,aAAL,IAAsB,IAA1B,EAAgC;AAC9B,aAAKA,aAAL,CAAmBc,MAAnB;AACD;AACF;;;WAED,kBAAqB;AAAA;;AACnB,UAAIC,MAAM,GAAG,IAAb;;AACA,UAAIZ,OAAJ,EAAa;AACX,YACE,CAACC,MAAM,CAACC,uBAAR,IACA,CAAC,KAAKH,KAAL,CAAWc,sBAFd,EAGE;AACA,cAAMC,2BAA2B,GAAGR,OAAO,yCAAP,CACjCS,OADH;;AAEAH,UAAAA,MAAM,GAAG,qBAAC,2BAAD,KAAT;AACD;AACF;;AAED,UAAII,SAAS,GACX,qBAAC,aAAD;AACE,QAAA,WAAW,EAAE,CAAC,KAAKvB,KAAL,CAAWC,SAD3B;AAGE,QAAA,aAAa,EAAC,UAHhB;AAIE,QAAA,KAAK,EAAEuB,MAAM,CAACC,YAJhB;AAKE,QAAA,GAAG,EAAE,aAAAC,IAAG,EAAI;AACV,UAAA,MAAI,CAACZ,QAAL,GAAgBY,IAAhB;AACD,SAPH;AAAA,kBAQG,KAAKpB,KAAL,CAAWqB;AARd,SAEO,KAAK3B,KAAL,CAAWE,OAFlB,CADF;AAaA,UAAM0B,OAAO,GAAG,KAAKtB,KAAL,CAAWuB,gBAA3B;;AACA,UAAID,OAAO,IAAI,IAAf,EAAqB;AACnBL,QAAAA,SAAS,GACP,qBAAC,OAAD;AACE,UAAA,YAAY,EAAE,KAAKjB,KAAL,CAAWwB,YAD3B;AAEE,UAAA,MAAM,EAAE,KAAKxB,KAAL,CAAWyB,MAAX,KAAsB,IAFhC;AAGE,UAAA,yBAAyB,EACvB,KAAKzB,KAAL,CAAW0B,yBAAX,KAAyC,IAJ7C;AAAA,oBAMGT;AANH,UADF;AAUD;;AACD,aACE,qBAAC,uBAAD,CAAgB,QAAhB;AAAyB,QAAA,KAAK,EAAE,4BAAc,KAAKjB,KAAL,CAAWD,OAAzB,CAAhC;AAAA,kBACE,sBAAC,aAAD;AAAM,UAAA,KAAK,EAAEmB,MAAM,CAACC,YAApB;AAAkC,UAAA,aAAa,EAAC,UAAhD;AAAA,qBACG,CAAC,KAAKzB,KAAL,CAAWG,QAAZ,IAAwBoB,SAD3B,EAEG,KAAKvB,KAAL,CAAWC,SAFd,EAGGkB,MAHH;AAAA;AADF,QADF;AASD;;;EAtGwBc,KAAK,CAACC,S;;AAA3BnC,Y,CASGoC,wB,GAAgCC,S;AATnCrC,Y,CAWGsC,iB,GAE6C;AAClDhC,EAAAA,OAAO,EAAEiC,mBAAUC;AAD+B,C;;AA4FtD,IAAMf,MAAM,GAAGgB,oBAAWC,MAAX,CAAkB;AAC/BhB,EAAAA,YAAY,EAAE;AACZiB,IAAAA,IAAI,EAAE;AADM;AADiB,CAAlB,CAAf;;AAMA,IAAInC,OAAJ,EAAa;AACX,MAAI,CAACC,MAAM,CAACC,uBAAZ,EAAqC;AACnC,QAAMkC,MAAM,GAAG9B,OAAO,oBAAtB;;AACA8B,IAAAA,MAAM,CAACC,OAAP;AACD;AACF;;AAEDC,MAAM,CAACC,OAAP,GAAiB/C,YAAjB","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow\n */\n\n'use strict';\n\nimport View from '../Components/View/View';\nimport RCTDeviceEventEmitter from '../EventEmitter/RCTDeviceEventEmitter';\nimport StyleSheet from '../StyleSheet/StyleSheet';\nimport {type EventSubscription} from '../vendor/emitter/EventEmitter';\nimport {RootTagContext, createRootTag} from './RootTag';\nimport PropTypes from 'prop-types';\nimport * as React from 'react';\n\ntype Context = {rootTag: number, ...};\n\ntype Props = $ReadOnly<{|\n  children?: React.Node,\n  fabric?: boolean,\n  rootTag: number,\n  initialProps?: {...},\n  showArchitectureIndicator?: boolean,\n  WrapperComponent?: ?React.ComponentType<any>,\n  internal_excludeLogBox?: ?boolean,\n|}>;\n\ntype State = {|\n  inspector: ?React.Node,\n  mainKey: number,\n  hasError: boolean,\n|};\n\nclass AppContainer extends React.Component<Props, State> {\n  state: State = {\n    inspector: null,\n    mainKey: 1,\n    hasError: false,\n  };\n  _mainRef: ?React.ElementRef<typeof View>;\n  _subscription: ?EventSubscription = null;\n\n  static getDerivedStateFromError: any = undefined;\n\n  static childContextTypes:\n    | any\n    | {|rootTag: React$PropType$Primitive<number>|} = {\n    rootTag: PropTypes.number,\n  };\n\n  getChildContext(): Context {\n    return {\n      rootTag: this.props.rootTag,\n    };\n  }\n\n  componentDidMount(): void {\n    if (__DEV__) {\n      if (!global.__RCTProfileIsProfiling) {\n        this._subscription = RCTDeviceEventEmitter.addListener(\n          'toggleElementInspector',\n          () => {\n            const Inspector = require('../Inspector/Inspector');\n            const inspector = this.state.inspector ? null : (\n              <Inspector\n                inspectedView={this._mainRef}\n                onRequestRerenderApp={updateInspectedView => {\n                  this.setState(\n                    s => ({mainKey: s.mainKey + 1}),\n                    () => updateInspectedView(this._mainRef),\n                  );\n                }}\n              />\n            );\n            this.setState({inspector});\n          },\n        );\n      }\n    }\n  }\n\n  componentWillUnmount(): void {\n    if (this._subscription != null) {\n      this._subscription.remove();\n    }\n  }\n\n  render(): React.Node {\n    let logBox = null;\n    if (__DEV__) {\n      if (\n        !global.__RCTProfileIsProfiling &&\n        !this.props.internal_excludeLogBox\n      ) {\n        const LogBoxNotificationContainer = require('../LogBox/LogBoxNotificationContainer')\n          .default;\n        logBox = <LogBoxNotificationContainer />;\n      }\n    }\n\n    let innerView = (\n      <View\n        collapsable={!this.state.inspector}\n        key={this.state.mainKey}\n        pointerEvents=\"box-none\"\n        style={styles.appContainer}\n        ref={ref => {\n          this._mainRef = ref;\n        }}>\n        {this.props.children}\n      </View>\n    );\n\n    const Wrapper = this.props.WrapperComponent;\n    if (Wrapper != null) {\n      innerView = (\n        <Wrapper\n          initialProps={this.props.initialProps}\n          fabric={this.props.fabric === true}\n          showArchitectureIndicator={\n            this.props.showArchitectureIndicator === true\n          }>\n          {innerView}\n        </Wrapper>\n      );\n    }\n    return (\n      <RootTagContext.Provider value={createRootTag(this.props.rootTag)}>\n        <View style={styles.appContainer} pointerEvents=\"box-none\">\n          {!this.state.hasError && innerView}\n          {this.state.inspector}\n          {logBox}\n        </View>\n      </RootTagContext.Provider>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  appContainer: {\n    flex: 1,\n  },\n});\n\nif (__DEV__) {\n  if (!global.__RCTProfileIsProfiling) {\n    const LogBox = require('../LogBox/LogBox');\n    LogBox.install();\n  }\n}\n\nmodule.exports = AppContainer;\n"]}