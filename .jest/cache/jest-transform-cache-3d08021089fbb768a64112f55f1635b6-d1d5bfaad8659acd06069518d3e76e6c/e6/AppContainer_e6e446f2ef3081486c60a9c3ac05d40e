e8dd1b748beb8749c7959ac983e35d6c
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _View = _interopRequireDefault(require("../Components/View/View"));

var _RCTDeviceEventEmitter = _interopRequireDefault(require("../EventEmitter/RCTDeviceEventEmitter"));

var _StyleSheet = _interopRequireDefault(require("../StyleSheet/StyleSheet"));

var _RootTag = require("./RootTag");

var _propTypes = _interopRequireDefault(require("prop-types"));

var React = _interopRequireWildcard(require("react"));

var _jsxRuntime = require("react/jsx-runtime");

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AppContainer = function (_React$Component) {
  (0, _inherits2.default)(AppContainer, _React$Component);

  var _super = _createSuper(AppContainer);

  function AppContainer() {
    var _this;

    (0, _classCallCheck2.default)(this, AppContainer);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    _this.state = {
      inspector: null,
      mainKey: 1,
      hasError: false
    };
    _this._subscription = null;
    return _this;
  }

  (0, _createClass2.default)(AppContainer, [{
    key: "getChildContext",
    value: function getChildContext() {
      return {
        rootTag: this.props.rootTag
      };
    }
  }, {
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this2 = this;

      if (__DEV__) {
        if (!global.__RCTProfileIsProfiling) {
          this._subscription = _RCTDeviceEventEmitter.default.addListener('toggleElementInspector', function () {
            var Inspector = require("../Inspector/Inspector");

            var inspector = _this2.state.inspector ? null : (0, _jsxRuntime.jsx)(Inspector, {
              inspectedView: _this2._mainRef,
              onRequestRerenderApp: function onRequestRerenderApp(updateInspectedView) {
                _this2.setState(function (s) {
                  return {
                    mainKey: s.mainKey + 1
                  };
                }, function () {
                  return updateInspectedView(_this2._mainRef);
                });
              }
            });

            _this2.setState({
              inspector: inspector
            });
          });
        }
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this._subscription != null) {
        this._subscription.remove();
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;

      var logBox = null;

      if (__DEV__) {
        if (!global.__RCTProfileIsProfiling && !this.props.internal_excludeLogBox) {
          var LogBoxNotificationContainer = require("../LogBox/LogBoxNotificationContainer").default;

          logBox = (0, _jsxRuntime.jsx)(LogBoxNotificationContainer, {});
        }
      }

      var innerView = (0, _jsxRuntime.jsx)(_View.default, {
        collapsable: !this.state.inspector,
        pointerEvents: "box-none",
        style: styles.appContainer,
        ref: function ref(_ref) {
          _this3._mainRef = _ref;
        },
        children: this.props.children
      }, this.state.mainKey);
      var Wrapper = this.props.WrapperComponent;

      if (Wrapper != null) {
        innerView = (0, _jsxRuntime.jsx)(Wrapper, {
          initialProps: this.props.initialProps,
          fabric: this.props.fabric === true,
          showArchitectureIndicator: this.props.showArchitectureIndicator === true,
          children: innerView
        });
      }

      return (0, _jsxRuntime.jsx)(_RootTag.RootTagContext.Provider, {
        value: (0, _RootTag.createRootTag)(this.props.rootTag),
        children: (0, _jsxRuntime.jsxs)(_View.default, {
          style: styles.appContainer,
          pointerEvents: "box-none",
          children: [!this.state.hasError && innerView, this.state.inspector, logBox]
        })
      });
    }
  }]);
  return AppContainer;
}(React.Component);

AppContainer.getDerivedStateFromError = undefined;
AppContainer.childContextTypes = {
  rootTag: _propTypes.default.number
};

var styles = _StyleSheet.default.create({
  appContainer: {
    flex: 1
  }
});

if (__DEV__) {
  if (!global.__RCTProfileIsProfiling) {
    var LogBox = require("../LogBox/LogBox");

    LogBox.install();
  }
}

module.exports = AppContainer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFwcENvbnRhaW5lci5qcyJdLCJuYW1lcyI6WyJBcHBDb250YWluZXIiLCJzdGF0ZSIsImluc3BlY3RvciIsIm1haW5LZXkiLCJoYXNFcnJvciIsIl9zdWJzY3JpcHRpb24iLCJyb290VGFnIiwicHJvcHMiLCJfX0RFVl9fIiwiZ2xvYmFsIiwiX19SQ1RQcm9maWxlSXNQcm9maWxpbmciLCJSQ1REZXZpY2VFdmVudEVtaXR0ZXIiLCJhZGRMaXN0ZW5lciIsIkluc3BlY3RvciIsInJlcXVpcmUiLCJfbWFpblJlZiIsInVwZGF0ZUluc3BlY3RlZFZpZXciLCJzZXRTdGF0ZSIsInMiLCJyZW1vdmUiLCJsb2dCb3giLCJpbnRlcm5hbF9leGNsdWRlTG9nQm94IiwiTG9nQm94Tm90aWZpY2F0aW9uQ29udGFpbmVyIiwiZGVmYXVsdCIsImlubmVyVmlldyIsInN0eWxlcyIsImFwcENvbnRhaW5lciIsInJlZiIsImNoaWxkcmVuIiwiV3JhcHBlciIsIldyYXBwZXJDb21wb25lbnQiLCJpbml0aWFsUHJvcHMiLCJmYWJyaWMiLCJzaG93QXJjaGl0ZWN0dXJlSW5kaWNhdG9yIiwiUmVhY3QiLCJDb21wb25lbnQiLCJnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IiLCJ1bmRlZmluZWQiLCJjaGlsZENvbnRleHRUeXBlcyIsIlByb3BUeXBlcyIsIm51bWJlciIsIlN0eWxlU2hlZXQiLCJjcmVhdGUiLCJmbGV4IiwiTG9nQm94IiwiaW5zdGFsbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQVVBOzs7Ozs7Ozs7Ozs7OztBQUVBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOzs7Ozs7Ozs7Ozs7SUFvQk1BLFk7Ozs7Ozs7Ozs7Ozs7OztVQUNKQyxLLEdBQWU7QUFDYkMsTUFBQUEsU0FBUyxFQUFFLElBREU7QUFFYkMsTUFBQUEsT0FBTyxFQUFFLENBRkk7QUFHYkMsTUFBQUEsUUFBUSxFQUFFO0FBSEcsSztVQU1mQyxhLEdBQW9DLEk7Ozs7OztXQVVwQywyQkFBMkI7QUFDekIsYUFBTztBQUNMQyxRQUFBQSxPQUFPLEVBQUUsS0FBS0MsS0FBTCxDQUFXRDtBQURmLE9BQVA7QUFHRDs7O1dBRUQsNkJBQTBCO0FBQUE7O0FBQ3hCLFVBQUlFLE9BQUosRUFBYTtBQUNYLFlBQUksQ0FBQ0MsTUFBTSxDQUFDQyx1QkFBWixFQUFxQztBQUNuQyxlQUFLTCxhQUFMLEdBQXFCTSwrQkFBc0JDLFdBQXRCLENBQ25CLHdCQURtQixFQUVuQixZQUFNO0FBQ0osZ0JBQU1DLFNBQVMsR0FBR0MsT0FBTywwQkFBekI7O0FBQ0EsZ0JBQU1aLFNBQVMsR0FBRyxNQUFJLENBQUNELEtBQUwsQ0FBV0MsU0FBWCxHQUF1QixJQUF2QixHQUNoQixxQkFBQyxTQUFEO0FBQ0UsY0FBQSxhQUFhLEVBQUUsTUFBSSxDQUFDYSxRQUR0QjtBQUVFLGNBQUEsb0JBQW9CLEVBQUUsOEJBQUFDLG1CQUFtQixFQUFJO0FBQzNDLGdCQUFBLE1BQUksQ0FBQ0MsUUFBTCxDQUNFLFVBQUFDLENBQUM7QUFBQSx5QkFBSztBQUFDZixvQkFBQUEsT0FBTyxFQUFFZSxDQUFDLENBQUNmLE9BQUYsR0FBWTtBQUF0QixtQkFBTDtBQUFBLGlCQURILEVBRUU7QUFBQSx5QkFBTWEsbUJBQW1CLENBQUMsTUFBSSxDQUFDRCxRQUFOLENBQXpCO0FBQUEsaUJBRkY7QUFJRDtBQVBILGNBREY7O0FBV0EsWUFBQSxNQUFJLENBQUNFLFFBQUwsQ0FBYztBQUFDZixjQUFBQSxTQUFTLEVBQVRBO0FBQUQsYUFBZDtBQUNELFdBaEJrQixDQUFyQjtBQWtCRDtBQUNGO0FBQ0Y7OztXQUVELGdDQUE2QjtBQUMzQixVQUFJLEtBQUtHLGFBQUwsSUFBc0IsSUFBMUIsRUFBZ0M7QUFDOUIsYUFBS0EsYUFBTCxDQUFtQmMsTUFBbkI7QUFDRDtBQUNGOzs7V0FFRCxrQkFBcUI7QUFBQTs7QUFDbkIsVUFBSUMsTUFBTSxHQUFHLElBQWI7O0FBQ0EsVUFBSVosT0FBSixFQUFhO0FBQ1gsWUFDRSxDQUFDQyxNQUFNLENBQUNDLHVCQUFSLElBQ0EsQ0FBQyxLQUFLSCxLQUFMLENBQVdjLHNCQUZkLEVBR0U7QUFDQSxjQUFNQywyQkFBMkIsR0FBR1IsT0FBTyx5Q0FBUCxDQUNqQ1MsT0FESDs7QUFFQUgsVUFBQUEsTUFBTSxHQUFHLHFCQUFDLDJCQUFELEtBQVQ7QUFDRDtBQUNGOztBQUVELFVBQUlJLFNBQVMsR0FDWCxxQkFBQyxhQUFEO0FBQ0UsUUFBQSxXQUFXLEVBQUUsQ0FBQyxLQUFLdkIsS0FBTCxDQUFXQyxTQUQzQjtBQUdFLFFBQUEsYUFBYSxFQUFDLFVBSGhCO0FBSUUsUUFBQSxLQUFLLEVBQUV1QixNQUFNLENBQUNDLFlBSmhCO0FBS0UsUUFBQSxHQUFHLEVBQUUsYUFBQUMsSUFBRyxFQUFJO0FBQ1YsVUFBQSxNQUFJLENBQUNaLFFBQUwsR0FBZ0JZLElBQWhCO0FBQ0QsU0FQSDtBQUFBLGtCQVFHLEtBQUtwQixLQUFMLENBQVdxQjtBQVJkLFNBRU8sS0FBSzNCLEtBQUwsQ0FBV0UsT0FGbEIsQ0FERjtBQWFBLFVBQU0wQixPQUFPLEdBQUcsS0FBS3RCLEtBQUwsQ0FBV3VCLGdCQUEzQjs7QUFDQSxVQUFJRCxPQUFPLElBQUksSUFBZixFQUFxQjtBQUNuQkwsUUFBQUEsU0FBUyxHQUNQLHFCQUFDLE9BQUQ7QUFDRSxVQUFBLFlBQVksRUFBRSxLQUFLakIsS0FBTCxDQUFXd0IsWUFEM0I7QUFFRSxVQUFBLE1BQU0sRUFBRSxLQUFLeEIsS0FBTCxDQUFXeUIsTUFBWCxLQUFzQixJQUZoQztBQUdFLFVBQUEseUJBQXlCLEVBQ3ZCLEtBQUt6QixLQUFMLENBQVcwQix5QkFBWCxLQUF5QyxJQUo3QztBQUFBLG9CQU1HVDtBQU5ILFVBREY7QUFVRDs7QUFDRCxhQUNFLHFCQUFDLHVCQUFELENBQWdCLFFBQWhCO0FBQXlCLFFBQUEsS0FBSyxFQUFFLDRCQUFjLEtBQUtqQixLQUFMLENBQVdELE9BQXpCLENBQWhDO0FBQUEsa0JBQ0Usc0JBQUMsYUFBRDtBQUFNLFVBQUEsS0FBSyxFQUFFbUIsTUFBTSxDQUFDQyxZQUFwQjtBQUFrQyxVQUFBLGFBQWEsRUFBQyxVQUFoRDtBQUFBLHFCQUNHLENBQUMsS0FBS3pCLEtBQUwsQ0FBV0csUUFBWixJQUF3Qm9CLFNBRDNCLEVBRUcsS0FBS3ZCLEtBQUwsQ0FBV0MsU0FGZCxFQUdHa0IsTUFISDtBQUFBO0FBREYsUUFERjtBQVNEOzs7RUF0R3dCYyxLQUFLLENBQUNDLFM7O0FBQTNCbkMsWSxDQVNHb0Msd0IsR0FBZ0NDLFM7QUFUbkNyQyxZLENBV0dzQyxpQixHQUU2QztBQUNsRGhDLEVBQUFBLE9BQU8sRUFBRWlDLG1CQUFVQztBQUQrQixDOztBQTRGdEQsSUFBTWYsTUFBTSxHQUFHZ0Isb0JBQVdDLE1BQVgsQ0FBa0I7QUFDL0JoQixFQUFBQSxZQUFZLEVBQUU7QUFDWmlCLElBQUFBLElBQUksRUFBRTtBQURNO0FBRGlCLENBQWxCLENBQWY7O0FBTUEsSUFBSW5DLE9BQUosRUFBYTtBQUNYLE1BQUksQ0FBQ0MsTUFBTSxDQUFDQyx1QkFBWixFQUFxQztBQUNuQyxRQUFNa0MsTUFBTSxHQUFHOUIsT0FBTyxvQkFBdEI7O0FBQ0E4QixJQUFBQSxNQUFNLENBQUNDLE9BQVA7QUFDRDtBQUNGOztBQUVEQyxNQUFNLENBQUNDLE9BQVAsR0FBaUIvQyxZQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZvcm1hdFxuICogQGZsb3dcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBWaWV3IGZyb20gJy4uL0NvbXBvbmVudHMvVmlldy9WaWV3JztcbmltcG9ydCBSQ1REZXZpY2VFdmVudEVtaXR0ZXIgZnJvbSAnLi4vRXZlbnRFbWl0dGVyL1JDVERldmljZUV2ZW50RW1pdHRlcic7XG5pbXBvcnQgU3R5bGVTaGVldCBmcm9tICcuLi9TdHlsZVNoZWV0L1N0eWxlU2hlZXQnO1xuaW1wb3J0IHt0eXBlIEV2ZW50U3Vic2NyaXB0aW9ufSBmcm9tICcuLi92ZW5kb3IvZW1pdHRlci9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHtSb290VGFnQ29udGV4dCwgY3JlYXRlUm9vdFRhZ30gZnJvbSAnLi9Sb290VGFnJztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbnR5cGUgQ29udGV4dCA9IHtyb290VGFnOiBudW1iZXIsIC4uLn07XG5cbnR5cGUgUHJvcHMgPSAkUmVhZE9ubHk8e3xcbiAgY2hpbGRyZW4/OiBSZWFjdC5Ob2RlLFxuICBmYWJyaWM/OiBib29sZWFuLFxuICByb290VGFnOiBudW1iZXIsXG4gIGluaXRpYWxQcm9wcz86IHsuLi59LFxuICBzaG93QXJjaGl0ZWN0dXJlSW5kaWNhdG9yPzogYm9vbGVhbixcbiAgV3JhcHBlckNvbXBvbmVudD86ID9SZWFjdC5Db21wb25lbnRUeXBlPGFueT4sXG4gIGludGVybmFsX2V4Y2x1ZGVMb2dCb3g/OiA/Ym9vbGVhbixcbnx9PjtcblxudHlwZSBTdGF0ZSA9IHt8XG4gIGluc3BlY3RvcjogP1JlYWN0Lk5vZGUsXG4gIG1haW5LZXk6IG51bWJlcixcbiAgaGFzRXJyb3I6IGJvb2xlYW4sXG58fTtcblxuY2xhc3MgQXBwQ29udGFpbmVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xuICBzdGF0ZTogU3RhdGUgPSB7XG4gICAgaW5zcGVjdG9yOiBudWxsLFxuICAgIG1haW5LZXk6IDEsXG4gICAgaGFzRXJyb3I6IGZhbHNlLFxuICB9O1xuICBfbWFpblJlZjogP1JlYWN0LkVsZW1lbnRSZWY8dHlwZW9mIFZpZXc+O1xuICBfc3Vic2NyaXB0aW9uOiA/RXZlbnRTdWJzY3JpcHRpb24gPSBudWxsO1xuXG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3I6IGFueSA9IHVuZGVmaW5lZDtcblxuICBzdGF0aWMgY2hpbGRDb250ZXh0VHlwZXM6XG4gICAgfCBhbnlcbiAgICB8IHt8cm9vdFRhZzogUmVhY3QkUHJvcFR5cGUkUHJpbWl0aXZlPG51bWJlcj58fSA9IHtcbiAgICByb290VGFnOiBQcm9wVHlwZXMubnVtYmVyLFxuICB9O1xuXG4gIGdldENoaWxkQ29udGV4dCgpOiBDb250ZXh0IHtcbiAgICByZXR1cm4ge1xuICAgICAgcm9vdFRhZzogdGhpcy5wcm9wcy5yb290VGFnLFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpOiB2b2lkIHtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgaWYgKCFnbG9iYWwuX19SQ1RQcm9maWxlSXNQcm9maWxpbmcpIHtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9uID0gUkNURGV2aWNlRXZlbnRFbWl0dGVyLmFkZExpc3RlbmVyKFxuICAgICAgICAgICd0b2dnbGVFbGVtZW50SW5zcGVjdG9yJyxcbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBJbnNwZWN0b3IgPSByZXF1aXJlKCcuLi9JbnNwZWN0b3IvSW5zcGVjdG9yJyk7XG4gICAgICAgICAgICBjb25zdCBpbnNwZWN0b3IgPSB0aGlzLnN0YXRlLmluc3BlY3RvciA/IG51bGwgOiAoXG4gICAgICAgICAgICAgIDxJbnNwZWN0b3JcbiAgICAgICAgICAgICAgICBpbnNwZWN0ZWRWaWV3PXt0aGlzLl9tYWluUmVmfVxuICAgICAgICAgICAgICAgIG9uUmVxdWVzdFJlcmVuZGVyQXBwPXt1cGRhdGVJbnNwZWN0ZWRWaWV3ID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoXG4gICAgICAgICAgICAgICAgICAgIHMgPT4gKHttYWluS2V5OiBzLm1haW5LZXkgKyAxfSksXG4gICAgICAgICAgICAgICAgICAgICgpID0+IHVwZGF0ZUluc3BlY3RlZFZpZXcodGhpcy5fbWFpblJlZiksXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aW5zcGVjdG9yfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc3Vic2NyaXB0aW9uICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbi5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKTogUmVhY3QuTm9kZSB7XG4gICAgbGV0IGxvZ0JveCA9IG51bGw7XG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIGlmIChcbiAgICAgICAgIWdsb2JhbC5fX1JDVFByb2ZpbGVJc1Byb2ZpbGluZyAmJlxuICAgICAgICAhdGhpcy5wcm9wcy5pbnRlcm5hbF9leGNsdWRlTG9nQm94XG4gICAgICApIHtcbiAgICAgICAgY29uc3QgTG9nQm94Tm90aWZpY2F0aW9uQ29udGFpbmVyID0gcmVxdWlyZSgnLi4vTG9nQm94L0xvZ0JveE5vdGlmaWNhdGlvbkNvbnRhaW5lcicpXG4gICAgICAgICAgLmRlZmF1bHQ7XG4gICAgICAgIGxvZ0JveCA9IDxMb2dCb3hOb3RpZmljYXRpb25Db250YWluZXIgLz47XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGlubmVyVmlldyA9IChcbiAgICAgIDxWaWV3XG4gICAgICAgIGNvbGxhcHNhYmxlPXshdGhpcy5zdGF0ZS5pbnNwZWN0b3J9XG4gICAgICAgIGtleT17dGhpcy5zdGF0ZS5tYWluS2V5fVxuICAgICAgICBwb2ludGVyRXZlbnRzPVwiYm94LW5vbmVcIlxuICAgICAgICBzdHlsZT17c3R5bGVzLmFwcENvbnRhaW5lcn1cbiAgICAgICAgcmVmPXtyZWYgPT4ge1xuICAgICAgICAgIHRoaXMuX21haW5SZWYgPSByZWY7XG4gICAgICAgIH19PlxuICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgIDwvVmlldz5cbiAgICApO1xuXG4gICAgY29uc3QgV3JhcHBlciA9IHRoaXMucHJvcHMuV3JhcHBlckNvbXBvbmVudDtcbiAgICBpZiAoV3JhcHBlciAhPSBudWxsKSB7XG4gICAgICBpbm5lclZpZXcgPSAoXG4gICAgICAgIDxXcmFwcGVyXG4gICAgICAgICAgaW5pdGlhbFByb3BzPXt0aGlzLnByb3BzLmluaXRpYWxQcm9wc31cbiAgICAgICAgICBmYWJyaWM9e3RoaXMucHJvcHMuZmFicmljID09PSB0cnVlfVxuICAgICAgICAgIHNob3dBcmNoaXRlY3R1cmVJbmRpY2F0b3I9e1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5zaG93QXJjaGl0ZWN0dXJlSW5kaWNhdG9yID09PSB0cnVlXG4gICAgICAgICAgfT5cbiAgICAgICAgICB7aW5uZXJWaWV3fVxuICAgICAgICA8L1dyYXBwZXI+XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgPFJvb3RUYWdDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtjcmVhdGVSb290VGFnKHRoaXMucHJvcHMucm9vdFRhZyl9PlxuICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLmFwcENvbnRhaW5lcn0gcG9pbnRlckV2ZW50cz1cImJveC1ub25lXCI+XG4gICAgICAgICAgeyF0aGlzLnN0YXRlLmhhc0Vycm9yICYmIGlubmVyVmlld31cbiAgICAgICAgICB7dGhpcy5zdGF0ZS5pbnNwZWN0b3J9XG4gICAgICAgICAge2xvZ0JveH1cbiAgICAgICAgPC9WaWV3PlxuICAgICAgPC9Sb290VGFnQ29udGV4dC5Qcm92aWRlcj5cbiAgICApO1xuICB9XG59XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgYXBwQ29udGFpbmVyOiB7XG4gICAgZmxleDogMSxcbiAgfSxcbn0pO1xuXG5pZiAoX19ERVZfXykge1xuICBpZiAoIWdsb2JhbC5fX1JDVFByb2ZpbGVJc1Byb2ZpbGluZykge1xuICAgIGNvbnN0IExvZ0JveCA9IHJlcXVpcmUoJy4uL0xvZ0JveC9Mb2dCb3gnKTtcbiAgICBMb2dCb3guaW5zdGFsbCgpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQXBwQ29udGFpbmVyO1xuIl19