8531954eeb132367d597bef2e619fd04
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _slicedToArray2 = _interopRequireDefault2(require("@babel/runtime/helpers/slicedToArray"));

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = Screen;

var _native = require("@react-navigation/native");

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _reactNativeSafeAreaContext = require("react-native-safe-area-context");

var _Background = _interopRequireDefault(require("./Background"));

var _getDefaultHeaderHeight = _interopRequireDefault(require("./Header/getDefaultHeaderHeight"));

var _HeaderHeightContext = _interopRequireDefault(require("./Header/HeaderHeightContext"));

var _HeaderShownContext = _interopRequireDefault(require("./Header/HeaderShownContext"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _getRequireWildcardCache(nodeInterop) {
  if (typeof WeakMap !== "function") return null;
  var cacheBabelInterop = new WeakMap();
  var cacheNodeInterop = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {
    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
  })(nodeInterop);
}

function _interopRequireWildcard(obj, nodeInterop) {
  if (!nodeInterop && obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache(nodeInterop);

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function Screen(props) {
  var dimensions = (0, _reactNativeSafeAreaContext.useSafeAreaFrame)();
  var insets = (0, _reactNativeSafeAreaContext.useSafeAreaInsets)();
  var isParentHeaderShown = React.useContext(_HeaderShownContext.default);
  var parentHeaderHeight = React.useContext(_HeaderHeightContext.default);
  var focused = props.focused,
      _props$modal = props.modal,
      modal = _props$modal === void 0 ? false : _props$modal,
      header = props.header,
      _props$headerShown = props.headerShown,
      headerShown = _props$headerShown === void 0 ? true : _props$headerShown,
      headerTransparent = props.headerTransparent,
      _props$headerStatusBa = props.headerStatusBarHeight,
      headerStatusBarHeight = _props$headerStatusBa === void 0 ? isParentHeaderShown ? 0 : insets.top : _props$headerStatusBa,
      navigation = props.navigation,
      route = props.route,
      children = props.children,
      style = props.style;

  var _React$useState = React.useState(function () {
    return (0, _getDefaultHeaderHeight.default)(dimensions, modal, headerStatusBarHeight);
  }),
      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),
      headerHeight = _React$useState2[0],
      setHeaderHeight = _React$useState2[1];

  return React.createElement(_Background.default, {
    accessibilityElementsHidden: !focused,
    importantForAccessibility: focused ? 'auto' : 'no-hide-descendants',
    style: [styles.container, style]
  }, React.createElement(_reactNative.View, {
    style: styles.content
  }, React.createElement(_HeaderShownContext.default.Provider, {
    value: isParentHeaderShown || headerShown !== false
  }, React.createElement(_HeaderHeightContext.default.Provider, {
    value: headerShown ? headerHeight : parentHeaderHeight !== null && parentHeaderHeight !== void 0 ? parentHeaderHeight : 0
  }, children))), headerShown ? React.createElement(_native.NavigationContext.Provider, {
    value: navigation
  }, React.createElement(_native.NavigationRouteContext.Provider, {
    value: route
  }, React.createElement(_reactNative.View, {
    onLayout: function onLayout(e) {
      var height = e.nativeEvent.layout.height;
      setHeaderHeight(height);
    },
    style: headerTransparent ? styles.absolute : null
  }, header))) : null);
}

var styles = _reactNative.StyleSheet.create({
  container: {
    flex: 1,
    flexDirection: 'column-reverse'
  },
  content: {
    flex: 1
  },
  absolute: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNjcmVlbi50c3giXSwibmFtZXMiOlsiZGltZW5zaW9ucyIsImluc2V0cyIsImlzUGFyZW50SGVhZGVyU2hvd24iLCJSZWFjdCIsIkhlYWRlclNob3duQ29udGV4dCIsInBhcmVudEhlYWRlckhlaWdodCIsIkhlYWRlckhlaWdodENvbnRleHQiLCJtb2RhbCIsImhlYWRlclNob3duIiwiaGVhZGVyU3RhdHVzQmFySGVpZ2h0Iiwic3R5bGUiLCJmb2N1c2VkIiwic3R5bGVzIiwiY29udGVudCIsIm5hdmlnYXRpb24iLCJyb3V0ZSIsImUiLCJoZWlnaHQiLCJzZXRIZWFkZXJIZWlnaHQiLCJoZWFkZXJUcmFuc3BhcmVudCIsImNvbnRhaW5lciIsImZsZXgiLCJmbGV4RGlyZWN0aW9uIiwiYWJzb2x1dGUiLCJwb3NpdGlvbiIsInRvcCIsImxlZnQiLCJyaWdodCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxJQUFBLE9BQUEsR0FBQSxPQUFBLENBQUEsMEJBQUEsQ0FBQTs7QUFPQSxJQUFBLEtBQUEsR0FBQSx1QkFBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBLENBQUEsQ0FBQTs7QUFDQSxJQUFBLFlBQUEsR0FBQSxPQUFBLENBQUEsY0FBQSxDQUFBOztBQUNBLElBQUEsMkJBQUEsR0FBQSxPQUFBLENBQUEsZ0NBQUEsQ0FBQTs7QUFLQSxJQUFBLFdBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsZ0JBQUEsQ0FBQTs7QUFDQSxJQUFBLHVCQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLG1DQUFBLENBQUE7O0FBQ0EsSUFBQSxvQkFBQSxHQUFBLHNCQUFBLENBQUEsT0FBQSxnQ0FBQSxDQUFBOztBQUNBLElBQUEsbUJBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsK0JBQUEsQ0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWVlLFNBQUEsTUFBQSxDQUFBLEtBQUEsRUFBOEI7QUFDM0MsTUFBTUEsVUFB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QUFlLENBQWZBLE1BQWUsQ0FBZkE7QUFKSixLQUFBO0FBTUUsSUFBQSxLQUFLLEVBQUVDLGlCQUFpQixHQUFHUCxNQUFNLENBQVQsUUFBQSxHQUFxQjtBQU4vQyxHQUFBLEVBSE0sTUFHTixDQURGLENBREYsQ0FEVSxHQWpCaEIsSUFDRSxDQURGO0FBbUNEOztBQUVELElBQU1BLE1BQU0sR0FBRyxZQUFBLENBQUEsVUFBQSxDQUFBLE1BQUEsQ0FBa0I7QUFDL0JRLEVBQUFBLFNBQVMsRUFBRTtBQUNUQyxJQUFBQSxJQUFJLEVBREssQ0FBQTtBQUVUQyxJQUFBQSxhQUFhLEVBQUU7QUFGTixHQURvQjtBQU0vQlQsRUFBQUEsT0FBTyxFQUFFO0FBQ1BRLElBQUFBLElBQUksRUFBRTtBQURDLEdBTnNCO0FBUy9CRSxFQUFBQSxRQUFRLEVBQUU7QUFDUkMsSUFBQUEsUUFBUSxFQURBLFVBQUE7QUFFUkMsSUFBQUEsR0FBRyxFQUZLLENBQUE7QUFHUkMsSUFBQUEsSUFBSSxFQUhJLENBQUE7QUFJUkMsSUFBQUEsS0FBSyxFQUFFO0FBSkM7QUFUcUIsQ0FBbEIsQ0FBZiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIE5hdmlnYXRpb25Db250ZXh0LFxuICBOYXZpZ2F0aW9uUHJvcCxcbiAgTmF2aWdhdGlvblJvdXRlQ29udGV4dCxcbiAgUGFyYW1MaXN0QmFzZSxcbiAgUm91dGVQcm9wLFxufSBmcm9tICdAcmVhY3QtbmF2aWdhdGlvbi9uYXRpdmUnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU3R5bGVQcm9wLCBTdHlsZVNoZWV0LCBWaWV3LCBWaWV3U3R5bGUgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IHtcbiAgdXNlU2FmZUFyZWFGcmFtZSxcbiAgdXNlU2FmZUFyZWFJbnNldHMsXG59IGZyb20gJ3JlYWN0LW5hdGl2ZS1zYWZlLWFyZWEtY29udGV4dCc7XG5cbmltcG9ydCBCYWNrZ3JvdW5kIGZyb20gJy4vQmFja2dyb3VuZCc7XG5pbXBvcnQgZ2V0RGVmYXVsdEhlYWRlckhlaWdodCBmcm9tICcuL0hlYWRlci9nZXREZWZhdWx0SGVhZGVySGVpZ2h0JztcbmltcG9ydCBIZWFkZXJIZWlnaHRDb250ZXh0IGZyb20gJy4vSGVhZGVyL0hlYWRlckhlaWdodENvbnRleHQnO1xuaW1wb3J0IEhlYWRlclNob3duQ29udGV4dCBmcm9tICcuL0hlYWRlci9IZWFkZXJTaG93bkNvbnRleHQnO1xuXG50eXBlIFByb3BzID0ge1xuICBmb2N1c2VkOiBib29sZWFuO1xuICBtb2RhbD86IGJvb2xlYW47XG4gIG5hdmlnYXRpb246IE5hdmlnYXRpb25Qcm9wPFBhcmFtTGlzdEJhc2U+O1xuICByb3V0ZTogUm91dGVQcm9wPFBhcmFtTGlzdEJhc2U+O1xuICBoZWFkZXI6IFJlYWN0LlJlYWN0Tm9kZTtcbiAgaGVhZGVyU2hvd24/OiBib29sZWFuO1xuICBoZWFkZXJTdGF0dXNCYXJIZWlnaHQ/OiBudW1iZXI7XG4gIGhlYWRlclRyYW5zcGFyZW50PzogYm9vbGVhbjtcbiAgc3R5bGU/OiBTdHlsZVByb3A8Vmlld1N0eWxlPjtcbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNjcmVlbihwcm9wczogUHJvcHMpIHtcbiAgY29uc3QgZGltZW5zaW9ucyA9IHVzZVNhZmVBcmVhRnJhbWUoKTtcbiAgY29uc3QgaW5zZXRzID0gdXNlU2FmZUFyZWFJbnNldHMoKTtcblxuICBjb25zdCBpc1BhcmVudEhlYWRlclNob3duID0gUmVhY3QudXNlQ29udGV4dChIZWFkZXJTaG93bkNvbnRleHQpO1xuICBjb25zdCBwYXJlbnRIZWFkZXJIZWlnaHQgPSBSZWFjdC51c2VDb250ZXh0KEhlYWRlckhlaWdodENvbnRleHQpO1xuXG4gIGNvbnN0IHtcbiAgICBmb2N1c2VkLFxuICAgIG1vZGFsID0gZmFsc2UsXG4gICAgaGVhZGVyLFxuICAgIGhlYWRlclNob3duID0gdHJ1ZSxcbiAgICBoZWFkZXJUcmFuc3BhcmVudCxcbiAgICBoZWFkZXJTdGF0dXNCYXJIZWlnaHQgPSBpc1BhcmVudEhlYWRlclNob3duID8gMCA6IGluc2V0cy50b3AsXG4gICAgbmF2aWdhdGlvbixcbiAgICByb3V0ZSxcbiAgICBjaGlsZHJlbixcbiAgICBzdHlsZSxcbiAgfSA9IHByb3BzO1xuXG4gIGNvbnN0IFtoZWFkZXJIZWlnaHQsIHNldEhlYWRlckhlaWdodF0gPSBSZWFjdC51c2VTdGF0ZSgoKSA9PlxuICAgIGdldERlZmF1bHRIZWFkZXJIZWlnaHQoZGltZW5zaW9ucywgbW9kYWwsIGhlYWRlclN0YXR1c0JhckhlaWdodClcbiAgKTtcblxuICByZXR1cm4gKFxuICAgIDxCYWNrZ3JvdW5kXG4gICAgICBhY2Nlc3NpYmlsaXR5RWxlbWVudHNIaWRkZW49eyFmb2N1c2VkfVxuICAgICAgaW1wb3J0YW50Rm9yQWNjZXNzaWJpbGl0eT17Zm9jdXNlZCA/ICdhdXRvJyA6ICduby1oaWRlLWRlc2NlbmRhbnRzJ31cbiAgICAgIHN0eWxlPXtbc3R5bGVzLmNvbnRhaW5lciwgc3R5bGVdfVxuICAgID5cbiAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuY29udGVudH0+XG4gICAgICAgIDxIZWFkZXJTaG93bkNvbnRleHQuUHJvdmlkZXJcbiAgICAgICAgICB2YWx1ZT17aXNQYXJlbnRIZWFkZXJTaG93biB8fCBoZWFkZXJTaG93biAhPT0gZmFsc2V9XG4gICAgICAgID5cbiAgICAgICAgICA8SGVhZGVySGVpZ2h0Q29udGV4dC5Qcm92aWRlclxuICAgICAgICAgICAgdmFsdWU9e2hlYWRlclNob3duID8gaGVhZGVySGVpZ2h0IDogcGFyZW50SGVhZGVySGVpZ2h0ID8/IDB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgIDwvSGVhZGVySGVpZ2h0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgPC9IZWFkZXJTaG93bkNvbnRleHQuUHJvdmlkZXI+XG4gICAgICA8L1ZpZXc+XG4gICAgICB7aGVhZGVyU2hvd24gPyAoXG4gICAgICAgIDxOYXZpZ2F0aW9uQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17bmF2aWdhdGlvbn0+XG4gICAgICAgICAgPE5hdmlnYXRpb25Sb3V0ZUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3JvdXRlfT5cbiAgICAgICAgICAgIDxWaWV3XG4gICAgICAgICAgICAgIG9uTGF5b3V0PXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgaGVpZ2h0IH0gPSBlLm5hdGl2ZUV2ZW50LmxheW91dDtcblxuICAgICAgICAgICAgICAgIHNldEhlYWRlckhlaWdodChoZWlnaHQpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBzdHlsZT17aGVhZGVyVHJhbnNwYXJlbnQgPyBzdHlsZXMuYWJzb2x1dGUgOiBudWxsfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7aGVhZGVyfVxuICAgICAgICAgICAgPC9WaWV3PlxuICAgICAgICAgIDwvTmF2aWdhdGlvblJvdXRlQ29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgPC9OYXZpZ2F0aW9uQ29udGV4dC5Qcm92aWRlcj5cbiAgICAgICkgOiBudWxsfVxuICAgIDwvQmFja2dyb3VuZD5cbiAgKTtcbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICBjb250YWluZXI6IHtcbiAgICBmbGV4OiAxLFxuICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4tcmV2ZXJzZScsXG4gIH0sXG4gIC8vIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGF2b2lkIGFwcGx5aW5nICdjb2x1bW4tcmV2ZXJzZScgdG8gc2NyZWVuIGNvbnRlbnRcbiAgY29udGVudDoge1xuICAgIGZsZXg6IDEsXG4gIH0sXG4gIGFic29sdXRlOiB7XG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgdG9wOiAwLFxuICAgIGxlZnQ6IDAsXG4gICAgcmlnaHQ6IDAsXG4gIH0sXG59KTtcbiJdfQ==