3595dde1b347fe67c22d18be9123b299
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _ScrollViewCommands = _interopRequireDefault(require("./ScrollView/ScrollViewCommands"));

var Dimensions = require("../Utilities/Dimensions");

var FrameRateLogger = require("../Interaction/FrameRateLogger");

var Keyboard = require("./Keyboard/Keyboard");

var Platform = require("../Utilities/Platform");

var React = require('react');

var ReactNative = require("../Renderer/shims/ReactNative");

var TextInputState = require("./TextInput/TextInputState");

var UIManager = require("../ReactNative/UIManager");

var invariant = require('invariant');

var IS_ANIMATING_TOUCH_START_THRESHOLD_MS = 16;
var ScrollResponderMixin = {
  _subscriptionKeyboardWillShow: null,
  _subscriptionKeyboardWillHide: null,
  _subscriptionKeyboardDidShow: null,
  _subscriptionKeyboardDidHide: null,
  scrollResponderMixinGetInitialState: function scrollResponderMixinGetInitialState() {
    return {
      isTouching: false,
      lastMomentumScrollBeginTime: 0,
      lastMomentumScrollEndTime: 0,
      observedScrollSinceBecomingResponder: false,
      becameResponderWhileAnimating: false
    };
  },
  scrollResponderHandleScrollShouldSetResponder: function scrollResponderHandleScrollShouldSetResponder() {
    if (this.props.disableScrollViewPanResponder === true) {
      return false;
    }

    return this.state.isTouching;
  },
  scrollResponderHandleStartShouldSetResponder: function scrollResponderHandleStartShouldSetResponder(e) {
    if (this.props.disableScrollViewPanResponder === true) {
      return false;
    }

    var currentlyFocusedInput = TextInputState.currentlyFocusedInput();

    if (this.props.keyboardShouldPersistTaps === 'handled' && this.scrollResponderKeyboardIsDismissible() && e.target !== currentlyFocusedInput) {
      return true;
    }

    return false;
  },
  scrollResponderHandleStartShouldSetResponderCapture: function scrollResponderHandleStartShouldSetResponderCapture(e) {
    if (this.scrollResponderIsAnimating()) {
      return true;
    }

    if (this.props.disableScrollViewPanResponder === true) {
      return false;
    }

    var keyboardShouldPersistTaps = this.props.keyboardShouldPersistTaps;
    var keyboardNeverPersistTaps = !keyboardShouldPersistTaps || keyboardShouldPersistTaps === 'never';

    if (typeof e.target === 'number') {
      if (__DEV__) {
        console.error('Did not expect event target to be a number. Should have been a native component');
      }

      return false;
    }

    if (keyboardNeverPersistTaps && this.scrollResponderKeyboardIsDismissible() && e.target != null && !TextInputState.isTextInput(e.target)) {
      return true;
    }

    return false;
  },
  scrollResponderKeyboardIsDismissible: function scrollResponderKeyboardIsDismissible() {
    var currentlyFocusedInput = TextInputState.currentlyFocusedInput();
    var hasFocusedTextInput = currentlyFocusedInput != null && TextInputState.isTextInput(currentlyFocusedInput);
    var softKeyboardMayBeOpen = this.keyboardWillOpenTo != null || Platform.OS === 'android';
    return hasFocusedTextInput && softKeyboardMayBeOpen;
  },
  scrollResponderHandleResponderReject: function scrollResponderHandleResponderReject() {},
  scrollResponderHandleTerminationRequest: function scrollResponderHandleTerminationRequest() {
    return !this.state.observedScrollSinceBecomingResponder;
  },
  scrollResponderHandleTouchEnd: function scrollResponderHandleTouchEnd(e) {
    var nativeEvent = e.nativeEvent;
    this.state.isTouching = nativeEvent.touches.length !== 0;
    this.props.onTouchEnd && this.props.onTouchEnd(e);
  },
  scrollResponderHandleTouchCancel: function scrollResponderHandleTouchCancel(e) {
    this.state.isTouching = false;
    this.props.onTouchCancel && this.props.onTouchCancel(e);
  },
  scrollResponderHandleResponderRelease: function scrollResponderHandleResponderRelease(e) {
    this.props.onResponderRelease && this.props.onResponderRelease(e);

    if (typeof e.target === 'number') {
      if (__DEV__) {
        console.error('Did not expect event target to be a number. Should have been a native component');
      }

      return;
    }

    var currentlyFocusedTextInput = TextInputState.currentlyFocusedInput();

    if (this.props.keyboardShouldPersistTaps !== true && this.props.keyboardShouldPersistTaps !== 'always' && this.scrollResponderKeyboardIsDismissible() && e.target !== currentlyFocusedTextInput && !this.state.observedScrollSinceBecomingResponder && !this.state.becameResponderWhileAnimating) {
      this.props.onScrollResponderKeyboardDismissed && this.props.onScrollResponderKeyboardDismissed(e);
      TextInputState.blurTextInput(currentlyFocusedTextInput);
    }
  },
  scrollResponderHandleScroll: function scrollResponderHandleScroll(e) {
    this.state.observedScrollSinceBecomingResponder = true;
    this.props.onScroll && this.props.onScroll(e);
  },
  scrollResponderHandleResponderGrant: function scrollResponderHandleResponderGrant(e) {
    this.state.observedScrollSinceBecomingResponder = false;
    this.props.onResponderGrant && this.props.onResponderGrant(e);
    this.state.becameResponderWhileAnimating = this.scrollResponderIsAnimating();
  },
  scrollResponderHandleScrollBeginDrag: function scrollResponderHandleScrollBeginDrag(e) {
    FrameRateLogger.beginScroll();
    this.props.onScrollBeginDrag && this.props.onScrollBeginDrag(e);
  },
  scrollResponderHandleScrollEndDrag: function scrollResponderHandleScrollEndDrag(e) {
    var velocity = e.nativeEvent.velocity;

    if (!this.scrollResponderIsAnimating() && (!velocity || velocity.x === 0 && velocity.y === 0)) {
      FrameRateLogger.endScroll();
    }

    this.props.onScrollEndDrag && this.props.onScrollEndDrag(e);
  },
  scrollResponderHandleMomentumScrollBegin: function scrollResponderHandleMomentumScrollBegin(e) {
    this.state.lastMomentumScrollBeginTime = global.performance.now();
    this.props.onMomentumScrollBegin && this.props.onMomentumScrollBegin(e);
  },
  scrollResponderHandleMomentumScrollEnd: function scrollResponderHandleMomentumScrollEnd(e) {
    FrameRateLogger.endScroll();
    this.state.lastMomentumScrollEndTime = global.performance.now();
    this.props.onMomentumScrollEnd && this.props.onMomentumScrollEnd(e);
  },
  scrollResponderHandleTouchStart: function scrollResponderHandleTouchStart(e) {
    this.state.isTouching = true;
    this.props.onTouchStart && this.props.onTouchStart(e);
  },
  scrollResponderHandleTouchMove: function scrollResponderHandleTouchMove(e) {
    this.props.onTouchMove && this.props.onTouchMove(e);
  },
  scrollResponderIsAnimating: function scrollResponderIsAnimating() {
    var now = global.performance.now();
    var timeSinceLastMomentumScrollEnd = now - this.state.lastMomentumScrollEndTime;
    var isAnimating = timeSinceLastMomentumScrollEnd < IS_ANIMATING_TOUCH_START_THRESHOLD_MS || this.state.lastMomentumScrollEndTime < this.state.lastMomentumScrollBeginTime;
    return isAnimating;
  },
  scrollResponderGetScrollableNode: function scrollResponderGetScrollableNode() {
    return this.getScrollableNode ? this.getScrollableNode() : ReactNative.findNodeHandle(this);
  },
  scrollResponderScrollTo: function scrollResponderScrollTo(x, y, animated) {
    if (typeof x === 'number') {
      console.warn('`scrollResponderScrollTo(x, y, animated)` is deprecated. Use `scrollResponderScrollTo({x: 5, y: 5, animated: true})` instead.');
    } else {
      var _ref = x || {};

      x = _ref.x;
      y = _ref.y;
      animated = _ref.animated;
    }

    var that = this;
    invariant(that.getNativeScrollRef != null, 'Expected scrollTo to be called on a scrollViewRef. If this exception occurs it is likely a bug in React Native');
    var nativeScrollRef = that.getNativeScrollRef();

    if (nativeScrollRef == null) {
      return;
    }

    _ScrollViewCommands.default.scrollTo(nativeScrollRef, x || 0, y || 0, animated !== false);
  },
  scrollResponderScrollToEnd: function scrollResponderScrollToEnd(options) {
    var animated = (options && options.animated) !== false;
    var that = this;
    invariant(that.getNativeScrollRef != null, 'Expected scrollToEnd to be called on a scrollViewRef. If this exception occurs it is likely a bug in React Native');
    var nativeScrollRef = that.getNativeScrollRef();

    if (nativeScrollRef == null) {
      return;
    }

    _ScrollViewCommands.default.scrollToEnd(nativeScrollRef, animated);
  },
  scrollResponderZoomTo: function scrollResponderZoomTo(rect, animated) {
    invariant(Platform.OS === 'ios', 'zoomToRect is not implemented');

    if ('animated' in rect) {
      animated = rect.animated;
      delete rect.animated;
    } else if (typeof animated !== 'undefined') {
      console.warn('`scrollResponderZoomTo` `animated` argument is deprecated. Use `options.animated` instead');
    }

    var that = this;
    invariant(that.getNativeScrollRef != null, 'Expected zoomToRect to be called on a scrollViewRef. If this exception occurs it is likely a bug in React Native');
    var nativeScrollRef = that.getNativeScrollRef();

    if (nativeScrollRef == null) {
      return;
    }

    _ScrollViewCommands.default.zoomToRect(nativeScrollRef, rect, animated !== false);
  },
  scrollResponderFlashScrollIndicators: function scrollResponderFlashScrollIndicators() {
    var that = this;
    invariant(that.getNativeScrollRef != null, 'Expected flashScrollIndicators to be called on a scrollViewRef. If this exception occurs it is likely a bug in React Native');
    var nativeScrollRef = that.getNativeScrollRef();

    if (nativeScrollRef == null) {
      return;
    }

    _ScrollViewCommands.default.flashScrollIndicators(nativeScrollRef);
  },
  scrollResponderScrollNativeHandleToKeyboard: function scrollResponderScrollNativeHandleToKeyboard(nodeHandle, additionalOffset, preventNegativeScrollOffset) {
    this.additionalScrollOffset = additionalOffset || 0;
    this.preventNegativeScrollOffset = !!preventNegativeScrollOffset;

    if (typeof nodeHandle === 'number') {
      UIManager.measureLayout(nodeHandle, ReactNative.findNodeHandle(this.getInnerViewNode()), this.scrollResponderTextInputFocusError, this.scrollResponderInputMeasureAndScrollToKeyboard);
    } else {
      var innerRef = this.getInnerViewRef();

      if (innerRef == null) {
        return;
      }

      nodeHandle.measureLayout(innerRef, this.scrollResponderInputMeasureAndScrollToKeyboard, this.scrollResponderTextInputFocusError);
    }
  },
  scrollResponderInputMeasureAndScrollToKeyboard: function scrollResponderInputMeasureAndScrollToKeyboard(left, top, width, height) {
    var keyboardScreenY = Dimensions.get('window').height;

    if (this.keyboardWillOpenTo) {
      keyboardScreenY = this.keyboardWillOpenTo.endCoordinates.screenY;
    }

    var scrollOffsetY = top - keyboardScreenY + height + this.additionalScrollOffset;

    if (this.preventNegativeScrollOffset) {
      scrollOffsetY = Math.max(0, scrollOffsetY);
    }

    this.scrollResponderScrollTo({
      x: 0,
      y: scrollOffsetY,
      animated: true
    });
    this.additionalOffset = 0;
    this.preventNegativeScrollOffset = false;
  },
  scrollResponderTextInputFocusError: function scrollResponderTextInputFocusError(msg) {
    console.error('Error measuring text field: ', msg);
  },
  UNSAFE_componentWillMount: function UNSAFE_componentWillMount() {
    var _ref2 = this.props,
        keyboardShouldPersistTaps = _ref2.keyboardShouldPersistTaps;

    if (typeof keyboardShouldPersistTaps === 'boolean') {
      console.warn("'keyboardShouldPersistTaps={" + (keyboardShouldPersistTaps === true ? 'true' : 'false') + "}' is deprecated. " + ("Use 'keyboardShouldPersistTaps=\"" + (keyboardShouldPersistTaps ? 'always' : 'never') + "\"' instead"));
    }

    this.keyboardWillOpenTo = null;
    this.additionalScrollOffset = 0;
    this._subscriptionKeyboardWillShow = Keyboard.addListener('keyboardWillShow', this.scrollResponderKeyboardWillShow);
    this._subscriptionKeyboardWillHide = Keyboard.addListener('keyboardWillHide', this.scrollResponderKeyboardWillHide);
    this._subscriptionKeyboardDidShow = Keyboard.addListener('keyboardDidShow', this.scrollResponderKeyboardDidShow);
    this._subscriptionKeyboardDidHide = Keyboard.addListener('keyboardDidHide', this.scrollResponderKeyboardDidHide);
  },
  componentWillUnmount: function componentWillUnmount() {
    if (this._subscriptionKeyboardWillShow != null) {
      this._subscriptionKeyboardWillShow.remove();
    }

    if (this._subscriptionKeyboardWillHide != null) {
      this._subscriptionKeyboardWillHide.remove();
    }

    if (this._subscriptionKeyboardDidShow != null) {
      this._subscriptionKeyboardDidShow.remove();
    }

    if (this._subscriptionKeyboardDidHide != null) {
      this._subscriptionKeyboardDidHide.remove();
    }
  },
  scrollResponderKeyboardWillShow: function scrollResponderKeyboardWillShow(e) {
    this.keyboardWillOpenTo = e;
    this.props.onKeyboardWillShow && this.props.onKeyboardWillShow(e);
  },
  scrollResponderKeyboardWillHide: function scrollResponderKeyboardWillHide(e) {
    this.keyboardWillOpenTo = null;
    this.props.onKeyboardWillHide && this.props.onKeyboardWillHide(e);
  },
  scrollResponderKeyboardDidShow: function scrollResponderKeyboardDidShow(e) {
    if (e) {
      this.keyboardWillOpenTo = e;
    }

    this.props.onKeyboardDidShow && this.props.onKeyboardDidShow(e);
  },
  scrollResponderKeyboardDidHide: function scrollResponderKeyboardDidHide(e) {
    this.keyboardWillOpenTo = null;
    this.props.onKeyboardDidHide && this.props.onKeyboardDidHide(e);
  }
};
var ScrollResponder = {
  Mixin: ScrollResponderMixin
};
module.exports = ScrollResponder;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNjcm9sbFJlc3BvbmRlci5qcyJdLCJuYW1lcyI6WyJEaW1lbnNpb25zIiwicmVxdWlyZSIsIkZyYW1lUmF0ZUxvZ2dlciIsIktleWJvYXJkIiwiUGxhdGZvcm0iLCJSZWFjdCIsIlJlYWN0TmF0aXZlIiwiVGV4dElucHV0U3RhdGUiLCJVSU1hbmFnZXIiLCJpbnZhcmlhbnQiLCJJU19BTklNQVRJTkdfVE9VQ0hfU1RBUlRfVEhSRVNIT0xEX01TIiwiU2Nyb2xsUmVzcG9uZGVyTWl4aW4iLCJfc3Vic2NyaXB0aW9uS2V5Ym9hcmRXaWxsU2hvdyIsIl9zdWJzY3JpcHRpb25LZXlib2FyZFdpbGxIaWRlIiwiX3N1YnNjcmlwdGlvbktleWJvYXJkRGlkU2hvdyIsIl9zdWJzY3JpcHRpb25LZXlib2FyZERpZEhpZGUiLCJzY3JvbGxSZXNwb25kZXJNaXhpbkdldEluaXRpYWxTdGF0ZSIsImlzVG91Y2hpbmciLCJsYXN0TW9tZW50dW1TY3JvbGxCZWdpblRpbWUiLCJsYXN0TW9tZW50dW1TY3JvbGxFbmRUaW1lIiwib2JzZXJ2ZWRTY3JvbGxTaW5jZUJlY29taW5nUmVzcG9uZGVyIiwiYmVjYW1lUmVzcG9uZGVyV2hpbGVBbmltYXRpbmciLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVTY3JvbGxTaG91bGRTZXRSZXNwb25kZXIiLCJwcm9wcyIsImRpc2FibGVTY3JvbGxWaWV3UGFuUmVzcG9uZGVyIiwic3RhdGUiLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVTdGFydFNob3VsZFNldFJlc3BvbmRlciIsImUiLCJjdXJyZW50bHlGb2N1c2VkSW5wdXQiLCJrZXlib2FyZFNob3VsZFBlcnNpc3RUYXBzIiwic2Nyb2xsUmVzcG9uZGVyS2V5Ym9hcmRJc0Rpc21pc3NpYmxlIiwidGFyZ2V0Iiwic2Nyb2xsUmVzcG9uZGVySGFuZGxlU3RhcnRTaG91bGRTZXRSZXNwb25kZXJDYXB0dXJlIiwic2Nyb2xsUmVzcG9uZGVySXNBbmltYXRpbmciLCJrZXlib2FyZE5ldmVyUGVyc2lzdFRhcHMiLCJfX0RFVl9fIiwiY29uc29sZSIsImVycm9yIiwiaXNUZXh0SW5wdXQiLCJoYXNGb2N1c2VkVGV4dElucHV0Iiwic29mdEtleWJvYXJkTWF5QmVPcGVuIiwia2V5Ym9hcmRXaWxsT3BlblRvIiwiT1MiLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVSZXNwb25kZXJSZWplY3QiLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVUZXJtaW5hdGlvblJlcXVlc3QiLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVUb3VjaEVuZCIsIm5hdGl2ZUV2ZW50IiwidG91Y2hlcyIsImxlbmd0aCIsIm9uVG91Y2hFbmQiLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVUb3VjaENhbmNlbCIsIm9uVG91Y2hDYW5jZWwiLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVSZXNwb25kZXJSZWxlYXNlIiwib25SZXNwb25kZXJSZWxlYXNlIiwiY3VycmVudGx5Rm9jdXNlZFRleHRJbnB1dCIsIm9uU2Nyb2xsUmVzcG9uZGVyS2V5Ym9hcmREaXNtaXNzZWQiLCJibHVyVGV4dElucHV0Iiwic2Nyb2xsUmVzcG9uZGVySGFuZGxlU2Nyb2xsIiwib25TY3JvbGwiLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVSZXNwb25kZXJHcmFudCIsIm9uUmVzcG9uZGVyR3JhbnQiLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVTY3JvbGxCZWdpbkRyYWciLCJiZWdpblNjcm9sbCIsIm9uU2Nyb2xsQmVnaW5EcmFnIiwic2Nyb2xsUmVzcG9uZGVySGFuZGxlU2Nyb2xsRW5kRHJhZyIsInZlbG9jaXR5IiwieCIsInkiLCJlbmRTY3JvbGwiLCJvblNjcm9sbEVuZERyYWciLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVNb21lbnR1bVNjcm9sbEJlZ2luIiwiZ2xvYmFsIiwicGVyZm9ybWFuY2UiLCJub3ciLCJvbk1vbWVudHVtU2Nyb2xsQmVnaW4iLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVNb21lbnR1bVNjcm9sbEVuZCIsIm9uTW9tZW50dW1TY3JvbGxFbmQiLCJzY3JvbGxSZXNwb25kZXJIYW5kbGVUb3VjaFN0YXJ0Iiwib25Ub3VjaFN0YXJ0Iiwic2Nyb2xsUmVzcG9uZGVySGFuZGxlVG91Y2hNb3ZlIiwib25Ub3VjaE1vdmUiLCJ0aW1lU2luY2VMYXN0TW9tZW50dW1TY3JvbGxFbmQiLCJpc0FuaW1hdGluZyIsInNjcm9sbFJlc3BvbmRlckdldFNjcm9sbGFibGVOb2RlIiwiZ2V0U2Nyb2xsYWJsZU5vZGUiLCJmaW5kTm9kZUhhbmRsZSIsInNjcm9sbFJlc3BvbmRlclNjcm9sbFRvIiwiYW5pbWF0ZWQiLCJ3YXJuIiwidGhhdCIsImdldE5hdGl2ZVNjcm9sbFJlZiIsIm5hdGl2ZVNjcm9sbFJlZiIsIkNvbW1hbmRzIiwic2Nyb2xsVG8iLCJzY3JvbGxSZXNwb25kZXJTY3JvbGxUb0VuZCIsIm9wdGlvbnMiLCJzY3JvbGxUb0VuZCIsInNjcm9sbFJlc3BvbmRlclpvb21UbyIsInJlY3QiLCJ6b29tVG9SZWN0Iiwic2Nyb2xsUmVzcG9uZGVyRmxhc2hTY3JvbGxJbmRpY2F0b3JzIiwiZmxhc2hTY3JvbGxJbmRpY2F0b3JzIiwic2Nyb2xsUmVzcG9uZGVyU2Nyb2xsTmF0aXZlSGFuZGxlVG9LZXlib2FyZCIsIm5vZGVIYW5kbGUiLCJhZGRpdGlvbmFsT2Zmc2V0IiwicHJldmVudE5lZ2F0aXZlU2Nyb2xsT2Zmc2V0IiwiYWRkaXRpb25hbFNjcm9sbE9mZnNldCIsIm1lYXN1cmVMYXlvdXQiLCJnZXRJbm5lclZpZXdOb2RlIiwic2Nyb2xsUmVzcG9uZGVyVGV4dElucHV0Rm9jdXNFcnJvciIsInNjcm9sbFJlc3BvbmRlcklucHV0TWVhc3VyZUFuZFNjcm9sbFRvS2V5Ym9hcmQiLCJpbm5lclJlZiIsImdldElubmVyVmlld1JlZiIsImxlZnQiLCJ0b3AiLCJ3aWR0aCIsImhlaWdodCIsImtleWJvYXJkU2NyZWVuWSIsImdldCIsImVuZENvb3JkaW5hdGVzIiwic2NyZWVuWSIsInNjcm9sbE9mZnNldFkiLCJNYXRoIiwibWF4IiwibXNnIiwiVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudCIsImFkZExpc3RlbmVyIiwic2Nyb2xsUmVzcG9uZGVyS2V5Ym9hcmRXaWxsU2hvdyIsInNjcm9sbFJlc3BvbmRlcktleWJvYXJkV2lsbEhpZGUiLCJzY3JvbGxSZXNwb25kZXJLZXlib2FyZERpZFNob3ciLCJzY3JvbGxSZXNwb25kZXJLZXlib2FyZERpZEhpZGUiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsInJlbW92ZSIsIm9uS2V5Ym9hcmRXaWxsU2hvdyIsIm9uS2V5Ym9hcmRXaWxsSGlkZSIsIm9uS2V5Ym9hcmREaWRTaG93Iiwib25LZXlib2FyZERpZEhpZGUiLCJTY3JvbGxSZXNwb25kZXIiLCJNaXhpbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQVVBOzs7O0FBbUJBOztBQWpCQSxJQUFNQSxVQUFVLEdBQUdDLE9BQU8sMkJBQTFCOztBQUNBLElBQU1DLGVBQWUsR0FBR0QsT0FBTyxrQ0FBL0I7O0FBQ0EsSUFBTUUsUUFBUSxHQUFHRixPQUFPLHVCQUF4Qjs7QUFDQSxJQUFNRyxRQUFRLEdBQUdILE9BQU8seUJBQXhCOztBQUNBLElBQU1JLEtBQUssR0FBR0osT0FBTyxDQUFDLE9BQUQsQ0FBckI7O0FBQ0EsSUFBTUssV0FBVyxHQUFHTCxPQUFPLGlDQUEzQjs7QUFDQSxJQUFNTSxjQUFjLEdBQUdOLE9BQU8sOEJBQTlCOztBQUNBLElBQU1PLFNBQVMsR0FBR1AsT0FBTyw0QkFBekI7O0FBRUEsSUFBTVEsU0FBUyxHQUFHUixPQUFPLENBQUMsV0FBRCxDQUF6Qjs7QUF3RkEsSUFBTVMscUNBQXFDLEdBQUcsRUFBOUM7QUFVQSxJQUFNQyxvQkFBb0IsR0FBRztBQUMzQkMsRUFBQUEsNkJBQTZCLEVBQUcsSUFETDtBQUUzQkMsRUFBQUEsNkJBQTZCLEVBQUcsSUFGTDtBQUczQkMsRUFBQUEsNEJBQTRCLEVBQUcsSUFISjtBQUkzQkMsRUFBQUEsNEJBQTRCLEVBQUcsSUFKSjtBQUszQkMsRUFBQUEsbUNBQW1DLEVBQUUsK0NBQWtCO0FBQ3JELFdBQU87QUFDTEMsTUFBQUEs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RyxDQUFULEVBQTJCO0FBQzFELFNBQUtjLGtCQUFMLEdBQTBCZCxDQUExQjtBQUNBLFNBQUtKLEtBQUwsQ0FBVzhHLGtCQUFYLElBQWlDLEtBQUs5RyxLQUFMLENBQVc4RyxrQkFBWCxDQUE4QjFHLENBQTlCLENBQWpDO0FBQ0QsR0Exb0IwQjtBQTRvQjNCcUcsRUFBQUEsK0JBQStCLEVBQUUseUNBQVNyRyxDQUFULEVBQTJCO0FBQzFELFNBQUtjLGtCQUFMLEdBQTBCLElBQTFCO0FBQ0EsU0FBS2xCLEtBQUwsQ0FBVytHLGtCQUFYLElBQWlDLEtBQUsvRyxLQUFMLENBQVcrRyxrQkFBWCxDQUE4QjNHLENBQTlCLENBQWpDO0FBQ0QsR0Evb0IwQjtBQWlwQjNCc0csRUFBQUEsOEJBQThCLEVBQUUsd0NBQVN0RyxDQUFULEVBQTJCO0FBR3pELFFBQUlBLENBQUosRUFBTztBQUNMLFdBQUtjLGtCQUFMLEdBQTBCZCxDQUExQjtBQUNEOztBQUNELFNBQUtKLEtBQUwsQ0FBV2dILGlCQUFYLElBQWdDLEtBQUtoSCxLQUFMLENBQVdnSCxpQkFBWCxDQUE2QjVHLENBQTdCLENBQWhDO0FBQ0QsR0F4cEIwQjtBQTBwQjNCdUcsRUFBQUEsOEJBQThCLEVBQUUsd0NBQVN2RyxDQUFULEVBQTJCO0FBQ3pELFNBQUtjLGtCQUFMLEdBQTBCLElBQTFCO0FBQ0EsU0FBS2xCLEtBQUwsQ0FBV2lILGlCQUFYLElBQWdDLEtBQUtqSCxLQUFMLENBQVdpSCxpQkFBWCxDQUE2QjdHLENBQTdCLENBQWhDO0FBQ0Q7QUE3cEIwQixDQUE3QjtBQWdxQkEsSUFBTThHLGVBQWUsR0FBRztBQUN0QkMsRUFBQUEsS0FBSyxFQUFFL0g7QUFEZSxDQUF4QjtBQUlBZ0ksTUFBTSxDQUFDQyxPQUFQLEdBQWlCSCxlQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZvcm1hdFxuICogQGZsb3dcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IERpbWVuc2lvbnMgPSByZXF1aXJlKCcuLi9VdGlsaXRpZXMvRGltZW5zaW9ucycpO1xuY29uc3QgRnJhbWVSYXRlTG9nZ2VyID0gcmVxdWlyZSgnLi4vSW50ZXJhY3Rpb24vRnJhbWVSYXRlTG9nZ2VyJyk7XG5jb25zdCBLZXlib2FyZCA9IHJlcXVpcmUoJy4vS2V5Ym9hcmQvS2V5Ym9hcmQnKTtcbmNvbnN0IFBsYXRmb3JtID0gcmVxdWlyZSgnLi4vVXRpbGl0aWVzL1BsYXRmb3JtJyk7XG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5jb25zdCBSZWFjdE5hdGl2ZSA9IHJlcXVpcmUoJy4uL1JlbmRlcmVyL3NoaW1zL1JlYWN0TmF0aXZlJyk7XG5jb25zdCBUZXh0SW5wdXRTdGF0ZSA9IHJlcXVpcmUoJy4vVGV4dElucHV0L1RleHRJbnB1dFN0YXRlJyk7XG5jb25zdCBVSU1hbmFnZXIgPSByZXF1aXJlKCcuLi9SZWFjdE5hdGl2ZS9VSU1hbmFnZXInKTtcblxuY29uc3QgaW52YXJpYW50ID0gcmVxdWlyZSgnaW52YXJpYW50Jyk7XG5cbmltcG9ydCB0eXBlIHtIb3N0Q29tcG9uZW50fSBmcm9tICcuLi9SZW5kZXJlci9zaGltcy9SZWFjdE5hdGl2ZVR5cGVzJztcbmltcG9ydCB0eXBlIHtQcmVzc0V2ZW50LCBTY3JvbGxFdmVudH0gZnJvbSAnLi4vVHlwZXMvQ29yZUV2ZW50VHlwZXMnO1xuaW1wb3J0IHt0eXBlIEV2ZW50U3Vic2NyaXB0aW9ufSBmcm9tICcuLi92ZW5kb3IvZW1pdHRlci9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHR5cGUge0tleWJvYXJkRXZlbnR9IGZyb20gJy4vS2V5Ym9hcmQvS2V5Ym9hcmQnO1xuaW1wb3J0IHR5cGVvZiBTY3JvbGxWaWV3IGZyb20gJy4vU2Nyb2xsVmlldy9TY3JvbGxWaWV3JztcbmltcG9ydCB0eXBlIHtQcm9wcyBhcyBTY3JvbGxWaWV3UHJvcHN9IGZyb20gJy4vU2Nyb2xsVmlldy9TY3JvbGxWaWV3JztcbmltcG9ydCBDb21tYW5kcyBmcm9tICcuL1Njcm9sbFZpZXcvU2Nyb2xsVmlld0NvbW1hbmRzJztcblxuLyoqXG4gKiBNaXhpbiB0aGF0IGNhbiBiZSBpbnRlZ3JhdGVkIGluIG9yZGVyIHRvIGhhbmRsZSBzY3JvbGxpbmcgdGhhdCBwbGF5cyB3ZWxsXG4gKiB3aXRoIGBSZXNwb25kZXJFdmVudFBsdWdpbmAuIEludGVncmF0ZSB3aXRoIHlvdXIgcGxhdGZvcm0gc3BlY2lmaWMgc2Nyb2xsXG4gKiB2aWV3cywgb3IgZXZlbiB5b3VyIGN1c3RvbSBidWlsdCAoZXZlcnktZnJhbWUgYW5pbWF0aW5nKSBzY3JvbGwgdmlld3Mgc28gdGhhdFxuICogYWxsIG9mIHRoZXNlIHN5c3RlbXMgcGxheSB3ZWxsIHdpdGggdGhlIGBSZXNwb25kZXJFdmVudFBsdWdpbmAuXG4gKlxuICogaU9TIHNjcm9sbCBldmVudCB0aW1pbmcgbnVhbmNlczpcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqXG4gKlxuICogU2Nyb2xsaW5nIHdpdGhvdXQgYm91bmNpbmcsIGlmIHlvdSB0b3VjaCBkb3duOlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICpcbiAqIDEuIGBvbk1vbWVudHVtU2Nyb2xsQmVnaW5gICh3aGVuIGFuaW1hdGlvbiBiZWdpbnMgYWZ0ZXIgbGV0dGluZyB1cClcbiAqICAgIC4uLiBwaHlzaWNhbCB0b3VjaCBzdGFydHMgLi4uXG4gKiAyLiBgb25Ub3VjaFN0YXJ0Q2FwdHVyZWAgICAod2hlbiB5b3UgcHJlc3MgZG93biB0byBzdG9wIHRoZSBzY3JvbGwpXG4gKiAzLiBgb25Ub3VjaFN0YXJ0YCAgICAgICAgICAoc2FtZSwgYnV0IGJ1YmJsZSBwaGFzZSlcbiAqIDQuIGBvblJlc3BvbmRlclJlbGVhc2VgICAgICh3aGVuIGxpZnRpbmcgdXAgLSB5b3UgY291bGQgcGF1c2UgZm9yZXZlciBiZWZvcmUgKiBsaWZ0aW5nKVxuICogNS4gYG9uTW9tZW50dW1TY3JvbGxFbmRgXG4gKlxuICpcbiAqIFNjcm9sbGluZyB3aXRoIGJvdW5jaW5nLCBpZiB5b3UgdG91Y2ggZG93bjpcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqXG4gKiAxLiBgb25Nb21lbnR1bVNjcm9sbEJlZ2luYCAod2hlbiBhbmltYXRpb24gYmVnaW5zIGFmdGVyIGxldHRpbmcgdXApXG4gKiAgICAuLi4gYm91bmNlIGJlZ2lucyAuLi5cbiAqICAgIC4uLiBzb21lIHRpbWUgZWxhcHNlcyAuLi5cbiAqICAgIC4uLiBwaHlzaWNhbCB0b3VjaCBkdXJpbmcgYm91bmNlIC4uLlxuICogMi4gYG9uTW9tZW50dW1TY3JvbGxFbmRgICAgKE1ha2VzIG5vIHNlbnNlIHdoeSB0aGlzIG9jY3VycyBmaXJzdCBkdXJpbmcgYm91bmNlKVxuICogMy4gYG9uVG91Y2hTdGFydENhcHR1cmVgICAgKGltbWVkaWF0ZWx5IGFmdGVyIGBvbk1vbWVudHVtU2Nyb2xsRW5kYClcbiAqIDQuIGBvblRvdWNoU3RhcnRgICAgICAgICAgIChzYW1lLCBidXQgYnViYmxlIHBoYXNlKVxuICogNS4gYG9uVG91Y2hFbmRgICAgICAgICAgICAgKFlvdSBjb3VsZCBob2xkIHRoZSB0b3VjaCBzdGFydCBmb3IgYSBsb25nIHRpbWUpXG4gKiA2LiBgb25Nb21lbnR1bVNjcm9sbEJlZ2luYCAoV2hlbiByZWxlYXNpbmcgdGhlIHZpZXcgc3RhcnRzIGJvdW5jaW5nIGJhY2spXG4gKlxuICogU28gd2hlbiB3ZSByZWNlaXZlIGFuIGBvblRvdWNoU3RhcnRgLCBob3cgY2FuIHdlIHRlbGwgaWYgd2UgYXJlIHRvdWNoaW5nXG4gKiAqZHVyaW5nKiBhbiBhbmltYXRpb24gKHdoaWNoIHRoZW4gY2F1c2VzIHRoZSBhbmltYXRpb24gdG8gc3RvcCk/IFRoZSBvbmx5IHdheVxuICogdG8gdGVsbCBpcyBpZiB0aGUgYHRvdWNoU3RhcnRgIG9jY3VycmVkIGltbWVkaWF0ZWx5IGFmdGVyIHRoZVxuICogYG9uTW9tZW50dW1TY3JvbGxFbmRgLlxuICpcbiAqIFRoaXMgaXMgYWJzdHJhY3RlZCBvdXQgZm9yIHlvdSwgc28geW91IGNhbiBqdXN0IGNhbGwgdGhpcy5zY3JvbGxSZXNwb25kZXJJc0FuaW1hdGluZygpIGlmXG4gKiBuZWNlc3NhcnlcbiAqXG4gKiBgU2Nyb2xsUmVzcG9uZGVyYCBhbHNvIGluY2x1ZGVzIGxvZ2ljIGZvciBibHVycmluZyBhIGN1cnJlbnRseSBmb2N1c2VkIGlucHV0XG4gKiBpZiBvbmUgaXMgZm9jdXNlZCB3aGlsZSBzY3JvbGxpbmcuIFRoZSBgU2Nyb2xsUmVzcG9uZGVyYCBpcyBhIG5hdHVyYWwgcGxhY2VcbiAqIHRvIHB1dCB0aGlzIGxvZ2ljIHNpbmNlIGl0IGNhbiBzdXBwb3J0IG5vdCBkaXNtaXNzaW5nIHRoZSBrZXlib2FyZCB3aGlsZVxuICogc2Nyb2xsaW5nLCB1bmxlc3MgYSByZWNvZ25pemVkIFwidGFwXCItbGlrZSBnZXN0dXJlIGhhcyBvY2N1cnJlZC5cbiAqXG4gKiBUaGUgcHVibGljIGxpZmVjeWNsZSBBUEkgaW5jbHVkZXMgZXZlbnRzIGZvciBrZXlib2FyZCBpbnRlcmFjdGlvbiwgcmVzcG9uZGVyXG4gKiBpbnRlcmFjdGlvbiwgYW5kIHNjcm9sbGluZyAoYW1vbmcgb3RoZXJzKS4gVGhlIGtleWJvYXJkIGNhbGxiYWNrc1xuICogYG9uS2V5Ym9hcmRXaWxsL0RpZC8qYCBhcmUgKmdsb2JhbCogZXZlbnRzLCBidXQgYXJlIGludm9rZWQgb24gc2Nyb2xsXG4gKiByZXNwb25kZXIncyBwcm9wcyBzbyB0aGF0IHlvdSBjYW4gZ3VhcmFudGVlIHRoYXQgdGhlIHNjcm9sbCByZXNwb25kZXInc1xuICogaW50ZXJuYWwgc3RhdGUgaGFzIGJlZW4gdXBkYXRlZCBhY2NvcmRpbmdseSAoYW5kIGRldGVybWluaXN0aWNhbGx5KSBieVxuICogdGhlIHRpbWUgdGhlIHByb3BzIGNhbGxiYWNrcyBhcmUgaW52b2tlLiBPdGhlcndpc2UsIHlvdSB3b3VsZCBhbHdheXMgd29uZGVyXG4gKiBpZiB0aGUgc2Nyb2xsIHJlc3BvbmRlciBpcyBjdXJyZW50bHkgaW4gYSBzdGF0ZSB3aGVyZSBpdCByZWNvZ25pemVzIG5ld1xuICoga2V5Ym9hcmQgcG9zaXRpb25zIGV0Yy4gSWYgY29vcmRpbmF0aW5nIHNjcm9sbGluZyB3aXRoIGtleWJvYXJkIG1vdmVtZW50LFxuICogKmFsd2F5cyogdXNlIHRoZXNlIGhvb2tzIGluc3RlYWQgb2YgbGlzdGVuaW5nIHRvIHlvdXIgb3duIGdsb2JhbCBrZXlib2FyZFxuICogZXZlbnRzLlxuICpcbiAqIFB1YmxpYyBrZXlib2FyZCBsaWZlY3ljbGUgQVBJOiAocHJvcHMgY2FsbGJhY2tzKVxuICpcbiAqIFN0YW5kYXJkIEtleWJvYXJkIEFwcGVhcmFuY2UgU2VxdWVuY2U6XG4gKlxuICogICB0aGlzLnByb3BzLm9uS2V5Ym9hcmRXaWxsU2hvd1xuICogICB0aGlzLnByb3BzLm9uS2V5Ym9hcmREaWRTaG93XG4gKlxuICogYG9uU2Nyb2xsUmVzcG9uZGVyS2V5Ym9hcmREaXNtaXNzZWRgIHdpbGwgYmUgaW52b2tlZCBpZiBhbiBhcHByb3ByaWF0ZVxuICogdGFwIGluc2lkZSB0aGUgc2Nyb2xsIHJlc3BvbmRlcidzIHNjcm9sbGFibGUgcmVnaW9uIHdhcyByZXNwb25zaWJsZVxuICogZm9yIHRoZSBkaXNtaXNzYWwgb2YgdGhlIGtleWJvYXJkLiBUaGVyZSBhcmUgb3RoZXIgcmVhc29ucyB3aHkgdGhlXG4gKiBrZXlib2FyZCBjb3VsZCBiZSBkaXNtaXNzZWQuXG4gKlxuICogICB0aGlzLnByb3BzLm9uU2Nyb2xsUmVzcG9uZGVyS2V5Ym9hcmREaXNtaXNzZWRcbiAqXG4gKiBTdGFuZGFyZCBLZXlib2FyZCBIaWRlIFNlcXVlbmNlOlxuICpcbiAqICAgdGhpcy5wcm9wcy5vbktleWJvYXJkV2lsbEhpZGVcbiAqICAgdGhpcy5wcm9wcy5vbktleWJvYXJkRGlkSGlkZVxuICovXG5cbmNvbnN0IElTX0FOSU1BVElOR19UT1VDSF9TVEFSVF9USFJFU0hPTERfTVMgPSAxNjtcblxuZXhwb3J0IHR5cGUgU3RhdGUgPSB7fFxuICBpc1RvdWNoaW5nOiBib29sZWFuLFxuICBsYXN0TW9tZW50dW1TY3JvbGxCZWdpblRpbWU6IG51bWJlcixcbiAgbGFzdE1vbWVudHVtU2Nyb2xsRW5kVGltZTogbnVtYmVyLFxuICBvYnNlcnZlZFNjcm9sbFNpbmNlQmVjb21pbmdSZXNwb25kZXI6IGJvb2xlYW4sXG4gIGJlY2FtZVJlc3BvbmRlcldoaWxlQW5pbWF0aW5nOiBib29sZWFuLFxufH07XG5cbmNvbnN0IFNjcm9sbFJlc3BvbmRlck1peGluID0ge1xuICBfc3Vic2NyaXB0aW9uS2V5Ym9hcmRXaWxsU2hvdzogKG51bGw6ID9FdmVudFN1YnNjcmlwdGlvbiksXG4gIF9zdWJzY3JpcHRpb25LZXlib2FyZFdpbGxIaWRlOiAobnVsbDogP0V2ZW50U3Vic2NyaXB0aW9uKSxcbiAgX3N1YnNjcmlwdGlvbktleWJvYXJkRGlkU2hvdzogKG51bGw6ID9FdmVudFN1YnNjcmlwdGlvbiksXG4gIF9zdWJzY3JpcHRpb25LZXlib2FyZERpZEhpZGU6IChudWxsOiA/RXZlbnRTdWJzY3JpcHRpb24pLFxuICBzY3JvbGxSZXNwb25kZXJNaXhpbkdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKTogU3RhdGUge1xuICAgIHJldHVybiB7XG4gICAgICBpc1RvdWNoaW5nOiBmYWxzZSxcbiAgICAgIGxhc3RNb21lbnR1bVNjcm9sbEJlZ2luVGltZTogMCxcbiAgICAgIGxhc3RNb21lbnR1bVNjcm9sbEVuZFRpbWU6IDAsXG5cbiAgICAgIC8vIFJlc2V0IHRvIGZhbHNlIGV2ZXJ5IHRpbWUgYmVjb21lcyByZXNwb25kZXIuIFRoaXMgaXMgdXNlZCB0bzpcbiAgICAgIC8vIC0gRGV0ZXJtaW5lIGlmIHRoZSBzY3JvbGwgdmlldyBoYXMgYmVlbiBzY3JvbGxlZCBhbmQgdGhlcmVmb3JlIHNob3VsZFxuICAgICAgLy8gcmVmdXNlIHRvIGdpdmUgdXAgaXRzIHJlc3BvbmRlciBsb2NrLlxuICAgICAgLy8gLSBEZXRlcm1pbmUgaWYgcmVsZWFzaW5nIHNob3VsZCBkaXNtaXNzIHRoZSBrZXlib2FyZCB3aGVuIHdlIGFyZSBpblxuICAgICAgLy8gdGFwLXRvLWRpc21pc3MgbW9kZSAodGhpcy5wcm9wcy5rZXlib2FyZFNob3VsZFBlcnNpc3RUYXBzICE9PSAnYWx3YXlzJykuXG4gICAgICBvYnNlcnZlZFNjcm9sbFNpbmNlQmVjb21pbmdSZXNwb25kZXI6IGZhbHNlLFxuICAgICAgYmVjYW1lUmVzcG9uZGVyV2hpbGVBbmltYXRpbmc6IGZhbHNlLFxuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEludm9rZSB0aGlzIGZyb20gYW4gYG9uU2Nyb2xsYCBldmVudC5cbiAgICovXG4gIHNjcm9sbFJlc3BvbmRlckhhbmRsZVNjcm9sbFNob3VsZFNldFJlc3BvbmRlcjogZnVuY3Rpb24oKTogYm9vbGVhbiB7XG4gICAgLy8gQWxsb3cgYW55IGV2ZW50IHRvdWNoIHBhc3MgdGhyb3VnaCBpZiB0aGUgZGVmYXVsdCBwYW4gcmVzcG9uZGVyIGlzIGRpc2FibGVkXG4gICAgaWYgKHRoaXMucHJvcHMuZGlzYWJsZVNjcm9sbFZpZXdQYW5SZXNwb25kZXIgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuaXNUb3VjaGluZztcbiAgfSxcblxuICAvKipcbiAgICogTWVyZWx5IHRvdWNoIHN0YXJ0aW5nIGlzIG5vdCBzdWZmaWNpZW50IGZvciBhIHNjcm9sbCB2aWV3IHRvIGJlY29tZSB0aGVcbiAgICogcmVzcG9uZGVyLiBCZWluZyB0aGUgXCJyZXNwb25kZXJcIiBtZWFucyB0aGF0IHRoZSB2ZXJ5IG5leHQgdG91Y2ggbW92ZS9lbmRcbiAgICogZXZlbnQgd2lsbCByZXN1bHQgaW4gYW4gYWN0aW9uL21vdmVtZW50LlxuICAgKlxuICAgKiBJbnZva2UgdGhpcyBmcm9tIGFuIGBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyYCBldmVudC5cbiAgICpcbiAgICogYG9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXJgIGlzIHVzZWQgd2hlbiB0aGUgbmV4dCBtb3ZlL2VuZCB3aWxsIHRyaWdnZXJcbiAgICogc29tZSBVSSBtb3ZlbWVudC9hY3Rpb24sIGJ1dCB3aGVuIHlvdSB3YW50IHRvIHlpZWxkIHByaW9yaXR5IHRvIHZpZXdzXG4gICAqIG5lc3RlZCBpbnNpZGUgb2YgdGhlIHZpZXcuXG4gICAqXG4gICAqIFRoZXJlIG1heSBiZSBzb21lIGNhc2VzIHdoZXJlIHNjcm9sbCB2aWV3cyBhY3R1YWxseSBzaG91bGQgcmV0dXJuIGB0cnVlYFxuICAgKiBmcm9tIGBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyYDogQW55IHRpbWUgd2UgYXJlIGRldGVjdGluZyBhIHN0YW5kYXJkIHRhcFxuICAgKiB0aGF0IGdpdmVzIHByaW9yaXR5IHRvIG5lc3RlZCB2aWV3cy5cbiAgICpcbiAgICogLSBJZiBhIHNpbmdsZSB0YXAgb24gdGhlIHNjcm9sbCB2aWV3IHRyaWdnZXJzIGFuIGFjdGlvbiBzdWNoIGFzXG4gICAqICAgcmVjZW50ZXJpbmcgYSBtYXAgc3R5bGUgdmlldyB5ZXQgd2FudHMgdG8gZ2l2ZSBwcmlvcml0eSB0byBpbnRlcmFjdGlvblxuICAgKiAgIHZpZXdzIGluc2lkZSAoc3VjaCBhcyBkcm9wcGVkIHBpbnMgb3IgbGFiZWxzKSwgdGhlbiB3ZSB3b3VsZCByZXR1cm4gdHJ1ZVxuICAgKiAgIGZyb20gdGhpcyBtZXRob2Qgd2hlbiB0aGVyZSBpcyBhIHNpbmdsZSB0b3VjaC5cbiAgICpcbiAgICogLSBTaW1pbGFyIHRvIHRoZSBwcmV2aW91cyBjYXNlLCBpZiBhIHR3byBmaW5nZXIgXCJ0YXBcIiBzaG91bGQgdHJpZ2dlciBhXG4gICAqICAgem9vbSwgd2Ugd291bGQgY2hlY2sgdGhlIGB0b3VjaGVzYCBjb3VudCwgYW5kIGlmIGA+PSAyYCwgd2Ugd291bGQgcmV0dXJuXG4gICAqICAgdHJ1ZS5cbiAgICpcbiAgICovXG4gIHNjcm9sbFJlc3BvbmRlckhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyOiBmdW5jdGlvbihcbiAgICBlOiBQcmVzc0V2ZW50LFxuICApOiBib29sZWFuIHtcbiAgICAvLyBBbGxvdyBhbnkgZXZlbnQgdG91Y2ggcGFzcyB0aHJvdWdoIGlmIHRoZSBkZWZhdWx0IHBhbiByZXNwb25kZXIgaXMgZGlzYWJsZWRcbiAgICBpZiAodGhpcy5wcm9wcy5kaXNhYmxlU2Nyb2xsVmlld1BhblJlc3BvbmRlciA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRseUZvY3VzZWRJbnB1dCA9IFRleHRJbnB1dFN0YXRlLmN1cnJlbnRseUZvY3VzZWRJbnB1dCgpO1xuXG4gICAgaWYgKFxuICAgICAgdGhpcy5wcm9wcy5rZXlib2FyZFNob3VsZFBlcnNpc3RUYXBzID09PSAnaGFuZGxlZCcgJiZcbiAgICAgIHRoaXMuc2Nyb2xsUmVzcG9uZGVyS2V5Ym9hcmRJc0Rpc21pc3NpYmxlKCkgJiZcbiAgICAgIGUudGFyZ2V0ICE9PSBjdXJyZW50bHlGb2N1c2VkSW5wdXRcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoZXJlIGFyZSB0aW1lcyB3aGVuIHRoZSBzY3JvbGwgdmlldyB3YW50cyB0byBiZWNvbWUgdGhlIHJlc3BvbmRlclxuICAgKiAobWVhbmluZyByZXNwb25kIHRvIHRoZSBuZXh0IGltbWVkaWF0ZSBgdG91Y2hTdGFydC90b3VjaEVuZGApLCBpbiBhIHdheVxuICAgKiB0aGF0ICpkb2Vzbid0KiBnaXZlIHByaW9yaXR5IHRvIG5lc3RlZCB2aWV3cyAoaGVuY2UgdGhlIGNhcHR1cmUgcGhhc2UpOlxuICAgKlxuICAgKiAtIEN1cnJlbnRseSBhbmltYXRpbmcuXG4gICAqIC0gVGFwcGluZyBhbnl3aGVyZSB0aGF0IGlzIG5vdCBhIHRleHQgaW5wdXQsIHdoaWxlIHRoZSBrZXlib2FyZCBpc1xuICAgKiAgIHVwICh3aGljaCBzaG91bGQgZGlzbWlzcyB0aGUga2V5Ym9hcmQpLlxuICAgKlxuICAgKiBJbnZva2UgdGhpcyBmcm9tIGFuIGBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyQ2FwdHVyZWAgZXZlbnQuXG4gICAqL1xuICBzY3JvbGxSZXNwb25kZXJIYW5kbGVTdGFydFNob3VsZFNldFJlc3BvbmRlckNhcHR1cmU6IGZ1bmN0aW9uKFxuICAgIGU6IFByZXNzRXZlbnQsXG4gICk6IGJvb2xlYW4ge1xuICAgIC8vIFRoZSBzY3JvbGwgdmlldyBzaG91bGQgcmVjZWl2ZSB0YXBzIGluc3RlYWQgb2YgaXRzIGRlc2NlbmRhbnRzIGlmOlxuICAgIC8vICogaXQgaXMgYWxyZWFkeSBhbmltYXRpbmcvZGVjZWxlcmF0aW5nXG4gICAgaWYgKHRoaXMuc2Nyb2xsUmVzcG9uZGVySXNBbmltYXRpbmcoKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gQWxsb3cgYW55IGV2ZW50IHRvdWNoIHBhc3MgdGhyb3VnaCBpZiB0aGUgZGVmYXVsdCBwYW4gcmVzcG9uZGVyIGlzIGRpc2FibGVkXG4gICAgaWYgKHRoaXMucHJvcHMuZGlzYWJsZVNjcm9sbFZpZXdQYW5SZXNwb25kZXIgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyAqIHRoZSBrZXlib2FyZCBpcyB1cCwga2V5Ym9hcmRTaG91bGRQZXJzaXN0VGFwcyBpcyAnbmV2ZXInICh0aGUgZGVmYXVsdCksXG4gICAgLy8gYW5kIGEgbmV3IHRvdWNoIHN0YXJ0cyB3aXRoIGEgbm9uLXRleHRpbnB1dCB0YXJnZXQgKGluIHdoaWNoIGNhc2UgdGhlXG4gICAgLy8gZmlyc3QgdGFwIHNob3VsZCBiZSBzZW50IHRvIHRoZSBzY3JvbGwgdmlldyBhbmQgZGlzbWlzcyB0aGUga2V5Ym9hcmQsXG4gICAgLy8gdGhlbiB0aGUgc2Vjb25kIHRhcCBnb2VzIHRvIHRoZSBhY3R1YWwgaW50ZXJpb3IgdmlldylcbiAgICBjb25zdCB7a2V5Ym9hcmRTaG91bGRQZXJzaXN0VGFwc30gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGtleWJvYXJkTmV2ZXJQZXJzaXN0VGFwcyA9XG4gICAgICAha2V5Ym9hcmRTaG91bGRQZXJzaXN0VGFwcyB8fCBrZXlib2FyZFNob3VsZFBlcnNpc3RUYXBzID09PSAnbmV2ZXInO1xuXG4gICAgaWYgKHR5cGVvZiBlLnRhcmdldCA9PT0gJ251bWJlcicpIHtcbiAgICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgJ0RpZCBub3QgZXhwZWN0IGV2ZW50IHRhcmdldCB0byBiZSBhIG51bWJlci4gU2hvdWxkIGhhdmUgYmVlbiBhIG5hdGl2ZSBjb21wb25lbnQnLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAga2V5Ym9hcmROZXZlclBlcnNpc3RUYXBzICYmXG4gICAgICB0aGlzLnNjcm9sbFJlc3BvbmRlcktleWJvYXJkSXNEaXNtaXNzaWJsZSgpICYmXG4gICAgICBlLnRhcmdldCAhPSBudWxsICYmXG4gICAgICAhVGV4dElucHV0U3RhdGUuaXNUZXh0SW5wdXQoZS50YXJnZXQpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERvIHdlIGNvbnNpZGVyIHRoZXJlIHRvIGJlIGEgZGlzbWlzc2libGUgc29mdC1rZXlib2FyZCBvcGVuP1xuICAgKi9cbiAgc2Nyb2xsUmVzcG9uZGVyS2V5Ym9hcmRJc0Rpc21pc3NpYmxlOiBmdW5jdGlvbigpOiBib29sZWFuIHtcbiAgICBjb25zdCBjdXJyZW50bHlGb2N1c2VkSW5wdXQgPSBUZXh0SW5wdXRTdGF0ZS5jdXJyZW50bHlGb2N1c2VkSW5wdXQoKTtcblxuICAgIC8vIFdlIGNhbm5vdCBkaXNtaXNzIHRoZSBrZXlib2FyZCB3aXRob3V0IGFuIGlucHV0IHRvIGJsdXIsIGV2ZW4gaWYgYSBzb2Z0XG4gICAgLy8ga2V5Ym9hcmQgaXMgb3BlbiAoZS5nLiB3aGVuIGtleWJvYXJkIGlzIG9wZW4gZHVlIHRvIGEgbmF0aXZlIGNvbXBvbmVudFxuICAgIC8vIG5vdCBwYXJ0aWNpcGF0aW5nIGluIFRleHRJbnB1dFN0YXRlKS4gSXQncyBhbHNvIHBvc3NpYmxlIHRoYXQgdGhlXG4gICAgLy8gY3VycmVudGx5IGZvY3VzZWQgaW5wdXQgaXNuJ3QgYSBUZXh0SW5wdXQgKHN1Y2ggYXMgYnkgY2FsbGluZyByZWYuZm9jdXNcbiAgICAvLyBvbiBhIG5vbi1UZXh0SW5wdXQpLlxuICAgIGNvbnN0IGhhc0ZvY3VzZWRUZXh0SW5wdXQgPVxuICAgICAgY3VycmVudGx5Rm9jdXNlZElucHV0ICE9IG51bGwgJiZcbiAgICAgIFRleHRJbnB1dFN0YXRlLmlzVGV4dElucHV0KGN1cnJlbnRseUZvY3VzZWRJbnB1dCk7XG5cbiAgICAvLyBFdmVuIGlmIGFuIGlucHV0IGlzIGZvY3VzZWQsIHdlIG1heSBub3QgaGF2ZSBhIGtleWJvYXJkIHRvIGRpc21pc3MuIEUuZ1xuICAgIC8vIHdoZW4gdXNpbmcgYSBwaHlzaWNhbCBrZXlib2FyZC4gRW5zdXJlIHdlIGhhdmUgYW4gZXZlbnQgZm9yIGFuIG9wZW5lZFxuICAgIC8vIGtleWJvYXJkLCBleGNlcHQgb24gQW5kcm9pZCB3aGVyZSBzZXR0aW5nIHdpbmRvd1NvZnRJbnB1dE1vZGUgdG9cbiAgICAvLyBhZGp1c3ROb25lIGxlYWRzIHRvIG1pc3Npbmcga2V5Ym9hcmQgZXZlbnRzLlxuICAgIGNvbnN0IHNvZnRLZXlib2FyZE1heUJlT3BlbiA9XG4gICAgICB0aGlzLmtleWJvYXJkV2lsbE9wZW5UbyAhPSBudWxsIHx8IFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCc7XG5cbiAgICByZXR1cm4gaGFzRm9jdXNlZFRleHRJbnB1dCAmJiBzb2Z0S2V5Ym9hcmRNYXlCZU9wZW47XG4gIH0sXG5cbiAgLyoqXG4gICAqIEludm9rZSB0aGlzIGZyb20gYW4gYG9uUmVzcG9uZGVyUmVqZWN0YCBldmVudC5cbiAgICpcbiAgICogU29tZSBvdGhlciBlbGVtZW50IGlzIG5vdCB5aWVsZGluZyBpdHMgcm9sZSBhcyByZXNwb25kZXIuIE5vcm1hbGx5LCB3ZSdkXG4gICAqIGp1c3QgZGlzYWJsZSB0aGUgYFVJU2Nyb2xsVmlld2AsIGJ1dCBhIHRvdWNoIGhhcyBhbHJlYWR5IGJlZ2FuIG9uIGl0LCB0aGVcbiAgICogYFVJU2Nyb2xsVmlld2Agd2lsbCBub3QgYWNjZXB0IGJlaW5nIGRpc2FibGVkIGFmdGVyIHRoYXQuIFRoZSBlYXNpZXN0XG4gICAqIHNvbHV0aW9uIGZvciBub3cgaXMgdG8gYWNjZXB0IHRoZSBsaW1pdGF0aW9uIG9mIGRpc2FsbG93aW5nIHRoaXNcbiAgICogYWx0b2dldGhlci4gVG8gaW1wcm92ZSB0aGlzLCBmaW5kIGEgd2F5IHRvIGRpc2FibGUgdGhlIGBVSVNjcm9sbFZpZXdgIGFmdGVyXG4gICAqIGEgdG91Y2ggaGFzIGFscmVhZHkgc3RhcnRlZC5cbiAgICovXG4gIHNjcm9sbFJlc3BvbmRlckhhbmRsZVJlc3BvbmRlclJlamVjdDogZnVuY3Rpb24oKSB7fSxcblxuICAvKipcbiAgICogV2Ugd2lsbCBhbGxvdyB0aGUgc2Nyb2xsIHZpZXcgdG8gZ2l2ZSB1cCBpdHMgbG9jayBpZmYgaXQgYWNxdWlyZWQgdGhlIGxvY2tcbiAgICogZHVyaW5nIGFuIGFuaW1hdGlvbi4gVGhpcyBpcyBhIHZlcnkgdXNlZnVsIGRlZmF1bHQgdGhhdCBoYXBwZW5zIHRvIHNhdGlzZnlcbiAgICogbWFueSBjb21tb24gdXNlciBleHBlcmllbmNlcy5cbiAgICpcbiAgICogLSBTdG9wIGEgc2Nyb2xsIG9uIHRoZSBsZWZ0IGVkZ2UsIHRoZW4gdHVybiB0aGF0IGludG8gYW4gb3V0ZXIgdmlldydzXG4gICAqICAgYmFja3N3aXBlLlxuICAgKiAtIFN0b3AgYSBzY3JvbGwgbWlkLWJvdW5jZSBhdCB0aGUgdG9wLCBjb250aW51ZSBwdWxsaW5nIHRvIGhhdmUgdGhlIG91dGVyXG4gICAqICAgdmlldyBkaXNtaXNzLlxuICAgKiAtIEhvd2V2ZXIsIHdpdGhvdXQgY2F0Y2hpbmcgdGhlIHNjcm9sbCB2aWV3IG1pZC1ib3VuY2UgKHdoaWxlIGl0IGlzXG4gICAqICAgbW90aW9ubGVzcyksIGlmIHlvdSBkcmFnIGZhciBlbm91Z2ggZm9yIHRoZSBzY3JvbGwgdmlldyB0byBiZWNvbWVcbiAgICogICByZXNwb25kZXIgKGFuZCB0aGVyZWZvcmUgZHJhZyB0aGUgc2Nyb2xsIHZpZXcgYSBiaXQpLCBhbnkgYmFja3N3aXBlXG4gICAqICAgbmF2aWdhdGlvbiBvZiBhIHN3aXBlIGdlc3R1cmUgaGlnaGVyIGluIHRoZSB2aWV3IGhpZXJhcmNoeSwgc2hvdWxkIGJlXG4gICAqICAgcmVqZWN0ZWQuXG4gICAqL1xuICBzY3JvbGxSZXNwb25kZXJIYW5kbGVUZXJtaW5hdGlvblJlcXVlc3Q6IGZ1bmN0aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5zdGF0ZS5vYnNlcnZlZFNjcm9sbFNpbmNlQmVjb21pbmdSZXNwb25kZXI7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEludm9rZSB0aGlzIGZyb20gYW4gYG9uVG91Y2hFbmRgIGV2ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1ByZXNzRXZlbnR9IGUgRXZlbnQuXG4gICAqL1xuICBzY3JvbGxSZXNwb25kZXJIYW5kbGVUb3VjaEVuZDogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIGNvbnN0IG5hdGl2ZUV2ZW50ID0gZS5uYXRpdmVFdmVudDtcbiAgICB0aGlzLnN0YXRlLmlzVG91Y2hpbmcgPSBuYXRpdmVFdmVudC50b3VjaGVzLmxlbmd0aCAhPT0gMDtcbiAgICB0aGlzLnByb3BzLm9uVG91Y2hFbmQgJiYgdGhpcy5wcm9wcy5vblRvdWNoRW5kKGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJbnZva2UgdGhpcyBmcm9tIGFuIGBvblRvdWNoQ2FuY2VsYCBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtQcmVzc0V2ZW50fSBlIEV2ZW50LlxuICAgKi9cbiAgc2Nyb2xsUmVzcG9uZGVySGFuZGxlVG91Y2hDYW5jZWw6IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICB0aGlzLnN0YXRlLmlzVG91Y2hpbmcgPSBmYWxzZTtcbiAgICB0aGlzLnByb3BzLm9uVG91Y2hDYW5jZWwgJiYgdGhpcy5wcm9wcy5vblRvdWNoQ2FuY2VsKGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJbnZva2UgdGhpcyBmcm9tIGFuIGBvblJlc3BvbmRlclJlbGVhc2VgIGV2ZW50LlxuICAgKi9cbiAgc2Nyb2xsUmVzcG9uZGVySGFuZGxlUmVzcG9uZGVyUmVsZWFzZTogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIHRoaXMucHJvcHMub25SZXNwb25kZXJSZWxlYXNlICYmIHRoaXMucHJvcHMub25SZXNwb25kZXJSZWxlYXNlKGUpO1xuXG4gICAgaWYgKHR5cGVvZiBlLnRhcmdldCA9PT0gJ251bWJlcicpIHtcbiAgICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgJ0RpZCBub3QgZXhwZWN0IGV2ZW50IHRhcmdldCB0byBiZSBhIG51bWJlci4gU2hvdWxkIGhhdmUgYmVlbiBhIG5hdGl2ZSBjb21wb25lbnQnLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQnkgZGVmYXVsdCBzY3JvbGwgdmlld3Mgd2lsbCB1bmZvY3VzIGEgdGV4dEZpZWxkXG4gICAgLy8gaWYgYW5vdGhlciB0b3VjaCBvY2N1cnMgb3V0c2lkZSBvZiBpdFxuICAgIGNvbnN0IGN1cnJlbnRseUZvY3VzZWRUZXh0SW5wdXQgPSBUZXh0SW5wdXRTdGF0ZS5jdXJyZW50bHlGb2N1c2VkSW5wdXQoKTtcbiAgICBpZiAoXG4gICAgICB0aGlzLnByb3BzLmtleWJvYXJkU2hvdWxkUGVyc2lzdFRhcHMgIT09IHRydWUgJiZcbiAgICAgIHRoaXMucHJvcHMua2V5Ym9hcmRTaG91bGRQZXJzaXN0VGFwcyAhPT0gJ2Fsd2F5cycgJiZcbiAgICAgIHRoaXMuc2Nyb2xsUmVzcG9uZGVyS2V5Ym9hcmRJc0Rpc21pc3NpYmxlKCkgJiZcbiAgICAgIGUudGFyZ2V0ICE9PSBjdXJyZW50bHlGb2N1c2VkVGV4dElucHV0ICYmXG4gICAgICAhdGhpcy5zdGF0ZS5vYnNlcnZlZFNjcm9sbFNpbmNlQmVjb21pbmdSZXNwb25kZXIgJiZcbiAgICAgICF0aGlzLnN0YXRlLmJlY2FtZVJlc3BvbmRlcldoaWxlQW5pbWF0aW5nXG4gICAgKSB7XG4gICAgICB0aGlzLnByb3BzLm9uU2Nyb2xsUmVzcG9uZGVyS2V5Ym9hcmREaXNtaXNzZWQgJiZcbiAgICAgICAgdGhpcy5wcm9wcy5vblNjcm9sbFJlc3BvbmRlcktleWJvYXJkRGlzbWlzc2VkKGUpO1xuICAgICAgVGV4dElucHV0U3RhdGUuYmx1clRleHRJbnB1dChjdXJyZW50bHlGb2N1c2VkVGV4dElucHV0KTtcbiAgICB9XG4gIH0sXG5cbiAgc2Nyb2xsUmVzcG9uZGVySGFuZGxlU2Nyb2xsOiBmdW5jdGlvbihlOiBTY3JvbGxFdmVudCkge1xuICAgICh0aGlzOiBhbnkpLnN0YXRlLm9ic2VydmVkU2Nyb2xsU2luY2VCZWNvbWluZ1Jlc3BvbmRlciA9IHRydWU7XG4gICAgKHRoaXM6IGFueSkucHJvcHMub25TY3JvbGwgJiYgKHRoaXM6IGFueSkucHJvcHMub25TY3JvbGwoZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEludm9rZSB0aGlzIGZyb20gYW4gYG9uUmVzcG9uZGVyR3JhbnRgIGV2ZW50LlxuICAgKi9cbiAgc2Nyb2xsUmVzcG9uZGVySGFuZGxlUmVzcG9uZGVyR3JhbnQ6IGZ1bmN0aW9uKGU6IFNjcm9sbEV2ZW50KSB7XG4gICAgdGhpcy5zdGF0ZS5vYnNlcnZlZFNjcm9sbFNpbmNlQmVjb21pbmdSZXNwb25kZXIgPSBmYWxzZTtcbiAgICB0aGlzLnByb3BzLm9uUmVzcG9uZGVyR3JhbnQgJiYgdGhpcy5wcm9wcy5vblJlc3BvbmRlckdyYW50KGUpO1xuICAgIHRoaXMuc3RhdGUuYmVjYW1lUmVzcG9uZGVyV2hpbGVBbmltYXRpbmcgPSB0aGlzLnNjcm9sbFJlc3BvbmRlcklzQW5pbWF0aW5nKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVuZm9ydHVuYXRlbHksIGBvblNjcm9sbEJlZ2luRHJhZ2AgYWxzbyBmaXJlcyB3aGVuICpzdG9wcGluZyogdGhlIHNjcm9sbFxuICAgKiBhbmltYXRpb24sIGFuZCB0aGVyZSdzIG5vdCBhbiBlYXN5IHdheSB0byBkaXN0aW5ndWlzaCBhIGRyYWcgdnMuIHN0b3BwaW5nXG4gICAqIG1vbWVudHVtLlxuICAgKlxuICAgKiBJbnZva2UgdGhpcyBmcm9tIGFuIGBvblNjcm9sbEJlZ2luRHJhZ2AgZXZlbnQuXG4gICAqL1xuICBzY3JvbGxSZXNwb25kZXJIYW5kbGVTY3JvbGxCZWdpbkRyYWc6IGZ1bmN0aW9uKGU6IFNjcm9sbEV2ZW50KSB7XG4gICAgRnJhbWVSYXRlTG9nZ2VyLmJlZ2luU2Nyb2xsKCk7IC8vIFRPRE86IHRyYWNrIGFsbCBzY3JvbGxzIGFmdGVyIGltcGxlbWVudGluZyBvblNjcm9sbEVuZEFuaW1hdGlvblxuICAgIHRoaXMucHJvcHMub25TY3JvbGxCZWdpbkRyYWcgJiYgdGhpcy5wcm9wcy5vblNjcm9sbEJlZ2luRHJhZyhlKTtcbiAgfSxcblxuICAvKipcbiAgICogSW52b2tlIHRoaXMgZnJvbSBhbiBgb25TY3JvbGxFbmREcmFnYCBldmVudC5cbiAgICovXG4gIHNjcm9sbFJlc3BvbmRlckhhbmRsZVNjcm9sbEVuZERyYWc6IGZ1bmN0aW9uKGU6IFNjcm9sbEV2ZW50KSB7XG4gICAgY29uc3Qge3ZlbG9jaXR5fSA9IGUubmF0aXZlRXZlbnQ7XG4gICAgLy8gLSBJZiB3ZSBhcmUgYW5pbWF0aW5nLCB0aGVuIHRoaXMgaXMgYSBcImRyYWdcIiB0aGF0IGlzIHN0b3BwaW5nIHRoZSBzY3JvbGx2aWV3IGFuZCBtb21lbnR1bSBlbmRcbiAgICAvLyAgIHdpbGwgZmlyZS5cbiAgICAvLyAtIElmIHZlbG9jaXR5IGlzIG5vbi16ZXJvLCB0aGVuIHRoZSBpbnRlcmFjdGlvbiB3aWxsIHN0b3Agd2hlbiBtb21lbnR1bSBzY3JvbGwgZW5kcyBvclxuICAgIC8vICAgYW5vdGhlciBkcmFnIHN0YXJ0cyBhbmQgZW5kcy5cbiAgICAvLyAtIElmIHdlIGRvbid0IGdldCB2ZWxvY2l0eSwgYmV0dGVyIHRvIHN0b3AgdGhlIGludGVyYWN0aW9uIHR3aWNlIHRoYW4gbm90IHN0b3AgaXQuXG4gICAgaWYgKFxuICAgICAgIXRoaXMuc2Nyb2xsUmVzcG9uZGVySXNBbmltYXRpbmcoKSAmJlxuICAgICAgKCF2ZWxvY2l0eSB8fCAodmVsb2NpdHkueCA9PT0gMCAmJiB2ZWxvY2l0eS55ID09PSAwKSlcbiAgICApIHtcbiAgICAgIEZyYW1lUmF0ZUxvZ2dlci5lbmRTY3JvbGwoKTtcbiAgICB9XG4gICAgdGhpcy5wcm9wcy5vblNjcm9sbEVuZERyYWcgJiYgdGhpcy5wcm9wcy5vblNjcm9sbEVuZERyYWcoZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEludm9rZSB0aGlzIGZyb20gYW4gYG9uTW9tZW50dW1TY3JvbGxCZWdpbmAgZXZlbnQuXG4gICAqL1xuICBzY3JvbGxSZXNwb25kZXJIYW5kbGVNb21lbnR1bVNjcm9sbEJlZ2luOiBmdW5jdGlvbihlOiBTY3JvbGxFdmVudCkge1xuICAgIHRoaXMuc3RhdGUubGFzdE1vbWVudHVtU2Nyb2xsQmVnaW5UaW1lID0gZ2xvYmFsLnBlcmZvcm1hbmNlLm5vdygpO1xuICAgIHRoaXMucHJvcHMub25Nb21lbnR1bVNjcm9sbEJlZ2luICYmIHRoaXMucHJvcHMub25Nb21lbnR1bVNjcm9sbEJlZ2luKGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJbnZva2UgdGhpcyBmcm9tIGFuIGBvbk1vbWVudHVtU2Nyb2xsRW5kYCBldmVudC5cbiAgICovXG4gIHNjcm9sbFJlc3BvbmRlckhhbmRsZU1vbWVudHVtU2Nyb2xsRW5kOiBmdW5jdGlvbihlOiBTY3JvbGxFdmVudCkge1xuICAgIEZyYW1lUmF0ZUxvZ2dlci5lbmRTY3JvbGwoKTtcbiAgICB0aGlzLnN0YXRlLmxhc3RNb21lbnR1bVNjcm9sbEVuZFRpbWUgPSBnbG9iYWwucGVyZm9ybWFuY2Uubm93KCk7XG4gICAgdGhpcy5wcm9wcy5vbk1vbWVudHVtU2Nyb2xsRW5kICYmIHRoaXMucHJvcHMub25Nb21lbnR1bVNjcm9sbEVuZChlKTtcbiAgfSxcblxuICAvKipcbiAgICogSW52b2tlIHRoaXMgZnJvbSBhbiBgb25Ub3VjaFN0YXJ0YCBldmVudC5cbiAgICpcbiAgICogU2luY2Ugd2Uga25vdyB0aGF0IHRoZSBgU2ltcGxlRXZlbnRQbHVnaW5gIG9jY3VycyBsYXRlciBpbiB0aGUgcGx1Z2luXG4gICAqIG9yZGVyLCBhZnRlciBgUmVzcG9uZGVyRXZlbnRQbHVnaW5gLCB3ZSBjYW4gZGV0ZWN0IHRoYXQgd2Ugd2VyZSAqbm90KlxuICAgKiBwZXJtaXR0ZWQgdG8gYmUgdGhlIHJlc3BvbmRlciAocHJlc3VtYWJseSBiZWNhdXNlIGEgY29udGFpbmVkIHZpZXcgYmVjYW1lXG4gICAqIHJlc3BvbmRlcikuIFRoZSBgb25SZXNwb25kZXJSZWplY3RgIHdvbid0IGZpcmUgaW4gdGhhdCBjYXNlIC0gaXQgb25seVxuICAgKiBmaXJlcyB3aGVuIGEgKmN1cnJlbnQqIHJlc3BvbmRlciByZWplY3RzIG91ciByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0ge1ByZXNzRXZlbnR9IGUgVG91Y2ggU3RhcnQgZXZlbnQuXG4gICAqL1xuICBzY3JvbGxSZXNwb25kZXJIYW5kbGVUb3VjaFN0YXJ0OiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgdGhpcy5zdGF0ZS5pc1RvdWNoaW5nID0gdHJ1ZTtcbiAgICB0aGlzLnByb3BzLm9uVG91Y2hTdGFydCAmJiB0aGlzLnByb3BzLm9uVG91Y2hTdGFydChlKTtcbiAgfSxcblxuICAvKipcbiAgICogSW52b2tlIHRoaXMgZnJvbSBhbiBgb25Ub3VjaE1vdmVgIGV2ZW50LlxuICAgKlxuICAgKiBTaW5jZSB3ZSBrbm93IHRoYXQgdGhlIGBTaW1wbGVFdmVudFBsdWdpbmAgb2NjdXJzIGxhdGVyIGluIHRoZSBwbHVnaW5cbiAgICogb3JkZXIsIGFmdGVyIGBSZXNwb25kZXJFdmVudFBsdWdpbmAsIHdlIGNhbiBkZXRlY3QgdGhhdCB3ZSB3ZXJlICpub3QqXG4gICAqIHBlcm1pdHRlZCB0byBiZSB0aGUgcmVzcG9uZGVyIChwcmVzdW1hYmx5IGJlY2F1c2UgYSBjb250YWluZWQgdmlldyBiZWNhbWVcbiAgICogcmVzcG9uZGVyKS4gVGhlIGBvblJlc3BvbmRlclJlamVjdGAgd29uJ3QgZmlyZSBpbiB0aGF0IGNhc2UgLSBpdCBvbmx5XG4gICAqIGZpcmVzIHdoZW4gYSAqY3VycmVudCogcmVzcG9uZGVyIHJlamVjdHMgb3VyIHJlcXVlc3QuXG4gICAqXG4gICAqIEBwYXJhbSB7UHJlc3NFdmVudH0gZSBUb3VjaCBTdGFydCBldmVudC5cbiAgICovXG4gIHNjcm9sbFJlc3BvbmRlckhhbmRsZVRvdWNoTW92ZTogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIHRoaXMucHJvcHMub25Ub3VjaE1vdmUgJiYgdGhpcy5wcm9wcy5vblRvdWNoTW92ZShlKTtcbiAgfSxcblxuICAvKipcbiAgICogQSBoZWxwZXIgZnVuY3Rpb24gZm9yIHRoaXMgY2xhc3MgdGhhdCBsZXRzIHVzIHF1aWNrbHkgZGV0ZXJtaW5lIGlmIHRoZVxuICAgKiB2aWV3IGlzIGN1cnJlbnRseSBhbmltYXRpbmcuIFRoaXMgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCB0byBrbm93IHdoZW5cbiAgICogYSB0b3VjaCBoYXMganVzdCBzdGFydGVkIG9yIGVuZGVkLlxuICAgKi9cbiAgc2Nyb2xsUmVzcG9uZGVySXNBbmltYXRpbmc6IGZ1bmN0aW9uKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG5vdyA9IGdsb2JhbC5wZXJmb3JtYW5jZS5ub3coKTtcbiAgICBjb25zdCB0aW1lU2luY2VMYXN0TW9tZW50dW1TY3JvbGxFbmQgPVxuICAgICAgbm93IC0gdGhpcy5zdGF0ZS5sYXN0TW9tZW50dW1TY3JvbGxFbmRUaW1lO1xuICAgIGNvbnN0IGlzQW5pbWF0aW5nID1cbiAgICAgIHRpbWVTaW5jZUxhc3RNb21lbnR1bVNjcm9sbEVuZCA8IElTX0FOSU1BVElOR19UT1VDSF9TVEFSVF9USFJFU0hPTERfTVMgfHxcbiAgICAgIHRoaXMuc3RhdGUubGFzdE1vbWVudHVtU2Nyb2xsRW5kVGltZSA8XG4gICAgICAgIHRoaXMuc3RhdGUubGFzdE1vbWVudHVtU2Nyb2xsQmVnaW5UaW1lO1xuICAgIHJldHVybiBpc0FuaW1hdGluZztcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbm9kZSB0aGF0IHJlcHJlc2VudHMgbmF0aXZlIHZpZXcgdGhhdCBjYW4gYmUgc2Nyb2xsZWQuXG4gICAqIENvbXBvbmVudHMgY2FuIHBhc3Mgd2hhdCBub2RlIHRvIHVzZSBieSBkZWZpbmluZyBhIGBnZXRTY3JvbGxhYmxlTm9kZWBcbiAgICogZnVuY3Rpb24gb3RoZXJ3aXNlIGB0aGlzYCBpcyB1c2VkLlxuICAgKi9cbiAgc2Nyb2xsUmVzcG9uZGVyR2V0U2Nyb2xsYWJsZU5vZGU6IGZ1bmN0aW9uKCk6ID9udW1iZXIge1xuICAgIHJldHVybiB0aGlzLmdldFNjcm9sbGFibGVOb2RlXG4gICAgICA/IHRoaXMuZ2V0U2Nyb2xsYWJsZU5vZGUoKVxuICAgICAgOiBSZWFjdE5hdGl2ZS5maW5kTm9kZUhhbmRsZSh0aGlzKTtcbiAgfSxcblxuICAvKipcbiAgICogQSBoZWxwZXIgZnVuY3Rpb24gdG8gc2Nyb2xsIHRvIGEgc3BlY2lmaWMgcG9pbnQgaW4gdGhlIFNjcm9sbFZpZXcuXG4gICAqIFRoaXMgaXMgY3VycmVudGx5IHVzZWQgdG8gaGVscCBmb2N1cyBjaGlsZCBUZXh0Vmlld3MsIGJ1dCBjYW4gYWxzb1xuICAgKiBiZSB1c2VkIHRvIHF1aWNrbHkgc2Nyb2xsIHRvIGFueSBlbGVtZW50IHdlIHdhbnQgdG8gZm9jdXMuIFN5bnRheDpcbiAgICpcbiAgICogYHNjcm9sbFJlc3BvbmRlclNjcm9sbFRvKG9wdGlvbnM6IHt4OiBudW1iZXIgPSAwOyB5OiBudW1iZXIgPSAwOyBhbmltYXRlZDogYm9vbGVhbiA9IHRydWV9KWBcbiAgICpcbiAgICogTm90ZTogVGhlIHdlaXJkIGFyZ3VtZW50IHNpZ25hdHVyZSBpcyBkdWUgdG8gdGhlIGZhY3QgdGhhdCwgZm9yIGhpc3RvcmljYWwgcmVhc29ucyxcbiAgICogdGhlIGZ1bmN0aW9uIGFsc28gYWNjZXB0cyBzZXBhcmF0ZSBhcmd1bWVudHMgYXMgYXMgYWx0ZXJuYXRpdmUgdG8gdGhlIG9wdGlvbnMgb2JqZWN0LlxuICAgKiBUaGlzIGlzIGRlcHJlY2F0ZWQgZHVlIHRvIGFtYmlndWl0eSAoeSBiZWZvcmUgeCksIGFuZCBTSE9VTEQgTk9UIEJFIFVTRUQuXG4gICAqL1xuICBzY3JvbGxSZXNwb25kZXJTY3JvbGxUbzogZnVuY3Rpb24oXG4gICAgeD86XG4gICAgICB8IG51bWJlclxuICAgICAgfCB7XG4gICAgICAgICAgeD86IG51bWJlcixcbiAgICAgICAgICB5PzogbnVtYmVyLFxuICAgICAgICAgIGFuaW1hdGVkPzogYm9vbGVhbixcbiAgICAgICAgICAuLi5cbiAgICAgICAgfSxcbiAgICB5PzogbnVtYmVyLFxuICAgIGFuaW1hdGVkPzogYm9vbGVhbixcbiAgKSB7XG4gICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnYHNjcm9sbFJlc3BvbmRlclNjcm9sbFRvKHgsIHksIGFuaW1hdGVkKWAgaXMgZGVwcmVjYXRlZC4gVXNlIGBzY3JvbGxSZXNwb25kZXJTY3JvbGxUbyh7eDogNSwgeTogNSwgYW5pbWF0ZWQ6IHRydWV9KWAgaW5zdGVhZC4nLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgKHt4LCB5LCBhbmltYXRlZH0gPSB4IHx8IHt9KTtcbiAgICB9XG5cbiAgICBjb25zdCB0aGF0OiBSZWFjdC5FbGVtZW50UmVmPFNjcm9sbFZpZXc+ID0gKHRoaXM6IGFueSk7XG4gICAgaW52YXJpYW50KFxuICAgICAgdGhhdC5nZXROYXRpdmVTY3JvbGxSZWYgIT0gbnVsbCxcbiAgICAgICdFeHBlY3RlZCBzY3JvbGxUbyB0byBiZSBjYWxsZWQgb24gYSBzY3JvbGxWaWV3UmVmLiBJZiB0aGlzIGV4Y2VwdGlvbiBvY2N1cnMgaXQgaXMgbGlrZWx5IGEgYnVnIGluIFJlYWN0IE5hdGl2ZScsXG4gICAgKTtcbiAgICBjb25zdCBuYXRpdmVTY3JvbGxSZWYgPSB0aGF0LmdldE5hdGl2ZVNjcm9sbFJlZigpO1xuICAgIGlmIChuYXRpdmVTY3JvbGxSZWYgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBDb21tYW5kcy5zY3JvbGxUbyhuYXRpdmVTY3JvbGxSZWYsIHggfHwgMCwgeSB8fCAwLCBhbmltYXRlZCAhPT0gZmFsc2UpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTY3JvbGxzIHRvIHRoZSBlbmQgb2YgdGhlIFNjcm9sbFZpZXcsIGVpdGhlciBpbW1lZGlhdGVseSBvciB3aXRoIGEgc21vb3RoXG4gICAqIGFuaW1hdGlvbi5cbiAgICpcbiAgICogRXhhbXBsZTpcbiAgICpcbiAgICogYHNjcm9sbFJlc3BvbmRlclNjcm9sbFRvRW5kKHthbmltYXRlZDogdHJ1ZX0pYFxuICAgKi9cbiAgc2Nyb2xsUmVzcG9uZGVyU2Nyb2xsVG9FbmQ6IGZ1bmN0aW9uKG9wdGlvbnM/OiB7YW5pbWF0ZWQ/OiBib29sZWFuLCAuLi59KSB7XG4gICAgLy8gRGVmYXVsdCB0byB0cnVlXG4gICAgY29uc3QgYW5pbWF0ZWQgPSAob3B0aW9ucyAmJiBvcHRpb25zLmFuaW1hdGVkKSAhPT0gZmFsc2U7XG5cbiAgICBjb25zdCB0aGF0OiBSZWFjdC5FbGVtZW50UmVmPFNjcm9sbFZpZXc+ID0gKHRoaXM6IGFueSk7XG4gICAgaW52YXJpYW50KFxuICAgICAgdGhhdC5nZXROYXRpdmVTY3JvbGxSZWYgIT0gbnVsbCxcbiAgICAgICdFeHBlY3RlZCBzY3JvbGxUb0VuZCB0byBiZSBjYWxsZWQgb24gYSBzY3JvbGxWaWV3UmVmLiBJZiB0aGlzIGV4Y2VwdGlvbiBvY2N1cnMgaXQgaXMgbGlrZWx5IGEgYnVnIGluIFJlYWN0IE5hdGl2ZScsXG4gICAgKTtcbiAgICBjb25zdCBuYXRpdmVTY3JvbGxSZWYgPSB0aGF0LmdldE5hdGl2ZVNjcm9sbFJlZigpO1xuICAgIGlmIChuYXRpdmVTY3JvbGxSZWYgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIENvbW1hbmRzLnNjcm9sbFRvRW5kKG5hdGl2ZVNjcm9sbFJlZiwgYW5pbWF0ZWQpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBIGhlbHBlciBmdW5jdGlvbiB0byB6b29tIHRvIGEgc3BlY2lmaWMgcmVjdCBpbiB0aGUgc2Nyb2xsdmlldy4gVGhlIGFyZ3VtZW50IGhhcyB0aGUgc2hhcGVcbiAgICoge3g6IG51bWJlcjsgeTogbnVtYmVyOyB3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlcjsgYW5pbWF0ZWQ6IGJvb2xlYW4gPSB0cnVlfVxuICAgKlxuICAgKiBAcGxhdGZvcm0gaW9zXG4gICAqL1xuICBzY3JvbGxSZXNwb25kZXJab29tVG86IGZ1bmN0aW9uKFxuICAgIHJlY3Q6IHt8XG4gICAgICB4OiBudW1iZXIsXG4gICAgICB5OiBudW1iZXIsXG4gICAgICB3aWR0aDogbnVtYmVyLFxuICAgICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgICBhbmltYXRlZD86IGJvb2xlYW4sXG4gICAgfH0sXG4gICAgYW5pbWF0ZWQ/OiBib29sZWFuLCAvLyBkZXByZWNhdGVkLCBwdXQgdGhpcyBpbnNpZGUgdGhlIHJlY3QgYXJndW1lbnQgaW5zdGVhZFxuICApIHtcbiAgICBpbnZhcmlhbnQoUGxhdGZvcm0uT1MgPT09ICdpb3MnLCAnem9vbVRvUmVjdCBpcyBub3QgaW1wbGVtZW50ZWQnKTtcbiAgICBpZiAoJ2FuaW1hdGVkJyBpbiByZWN0KSB7XG4gICAgICBhbmltYXRlZCA9IHJlY3QuYW5pbWF0ZWQ7XG4gICAgICBkZWxldGUgcmVjdC5hbmltYXRlZDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhbmltYXRlZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ2BzY3JvbGxSZXNwb25kZXJab29tVG9gIGBhbmltYXRlZGAgYXJndW1lbnQgaXMgZGVwcmVjYXRlZC4gVXNlIGBvcHRpb25zLmFuaW1hdGVkYCBpbnN0ZWFkJyxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgdGhhdDogUmVhY3QuRWxlbWVudFJlZjxTY3JvbGxWaWV3PiA9IHRoaXM7XG4gICAgaW52YXJpYW50KFxuICAgICAgdGhhdC5nZXROYXRpdmVTY3JvbGxSZWYgIT0gbnVsbCxcbiAgICAgICdFeHBlY3RlZCB6b29tVG9SZWN0IHRvIGJlIGNhbGxlZCBvbiBhIHNjcm9sbFZpZXdSZWYuIElmIHRoaXMgZXhjZXB0aW9uIG9jY3VycyBpdCBpcyBsaWtlbHkgYSBidWcgaW4gUmVhY3QgTmF0aXZlJyxcbiAgICApO1xuICAgIGNvbnN0IG5hdGl2ZVNjcm9sbFJlZiA9IHRoYXQuZ2V0TmF0aXZlU2Nyb2xsUmVmKCk7XG4gICAgaWYgKG5hdGl2ZVNjcm9sbFJlZiA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIENvbW1hbmRzLnpvb21Ub1JlY3QobmF0aXZlU2Nyb2xsUmVmLCByZWN0LCBhbmltYXRlZCAhPT0gZmFsc2UpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEaXNwbGF5cyB0aGUgc2Nyb2xsIGluZGljYXRvcnMgbW9tZW50YXJpbHkuXG4gICAqL1xuICBzY3JvbGxSZXNwb25kZXJGbGFzaFNjcm9sbEluZGljYXRvcnM6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHRoYXQ6IFJlYWN0LkVsZW1lbnRSZWY8U2Nyb2xsVmlldz4gPSAodGhpczogYW55KTtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0aGF0LmdldE5hdGl2ZVNjcm9sbFJlZiAhPSBudWxsLFxuICAgICAgJ0V4cGVjdGVkIGZsYXNoU2Nyb2xsSW5kaWNhdG9ycyB0byBiZSBjYWxsZWQgb24gYSBzY3JvbGxWaWV3UmVmLiBJZiB0aGlzIGV4Y2VwdGlvbiBvY2N1cnMgaXQgaXMgbGlrZWx5IGEgYnVnIGluIFJlYWN0IE5hdGl2ZScsXG4gICAgKTtcbiAgICBjb25zdCBuYXRpdmVTY3JvbGxSZWYgPSB0aGF0LmdldE5hdGl2ZVNjcm9sbFJlZigpO1xuICAgIGlmIChuYXRpdmVTY3JvbGxSZWYgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBDb21tYW5kcy5mbGFzaFNjcm9sbEluZGljYXRvcnMobmF0aXZlU2Nyb2xsUmVmKTtcbiAgfSxcblxuICAvKipcbiAgICogVGhpcyBtZXRob2Qgc2hvdWxkIGJlIHVzZWQgYXMgdGhlIGNhbGxiYWNrIHRvIG9uRm9jdXMgaW4gYSBUZXh0SW5wdXRzJ1xuICAgKiBwYXJlbnQgdmlldy4gTm90ZSB0aGF0IGFueSBtb2R1bGUgdXNpbmcgdGhpcyBtaXhpbiBuZWVkcyB0byByZXR1cm5cbiAgICogdGhlIHBhcmVudCB2aWV3J3MgcmVmIGluIGdldFNjcm9sbFZpZXdSZWYoKSBpbiBvcmRlciB0byB1c2UgdGhpcyBtZXRob2QuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBub2RlSGFuZGxlIFRoZSBUZXh0SW5wdXQgbm9kZSBoYW5kbGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IGFkZGl0aW9uYWxPZmZzZXQgVGhlIHNjcm9sbCB2aWV3J3MgYm90dG9tIFwiY29udGVudEluc2V0XCIuXG4gICAqICAgICAgICBEZWZhdWx0IGlzIDAuXG4gICAqIEBwYXJhbSB7Ym9vbH0gcHJldmVudE5lZ2F0aXZlU2Nyb2xsaW5nIFdoZXRoZXIgdG8gYWxsb3cgcHVsbGluZyB0aGUgY29udGVudFxuICAgKiAgICAgICAgZG93biB0byBtYWtlIGl0IG1lZXQgdGhlIGtleWJvYXJkJ3MgdG9wLiBEZWZhdWx0IGlzIGZhbHNlLlxuICAgKi9cbiAgc2Nyb2xsUmVzcG9uZGVyU2Nyb2xsTmF0aXZlSGFuZGxlVG9LZXlib2FyZDogZnVuY3Rpb248VD4oXG4gICAgbm9kZUhhbmRsZTogbnVtYmVyIHwgUmVhY3QuRWxlbWVudFJlZjxIb3N0Q29tcG9uZW50PFQ+PixcbiAgICBhZGRpdGlvbmFsT2Zmc2V0PzogbnVtYmVyLFxuICAgIHByZXZlbnROZWdhdGl2ZVNjcm9sbE9mZnNldD86IGJvb2xlYW4sXG4gICkge1xuICAgIHRoaXMuYWRkaXRpb25hbFNjcm9sbE9mZnNldCA9IGFkZGl0aW9uYWxPZmZzZXQgfHwgMDtcbiAgICB0aGlzLnByZXZlbnROZWdhdGl2ZVNjcm9sbE9mZnNldCA9ICEhcHJldmVudE5lZ2F0aXZlU2Nyb2xsT2Zmc2V0O1xuXG4gICAgaWYgKHR5cGVvZiBub2RlSGFuZGxlID09PSAnbnVtYmVyJykge1xuICAgICAgVUlNYW5hZ2VyLm1lYXN1cmVMYXlvdXQoXG4gICAgICAgIG5vZGVIYW5kbGUsXG4gICAgICAgIFJlYWN0TmF0aXZlLmZpbmROb2RlSGFuZGxlKHRoaXMuZ2V0SW5uZXJWaWV3Tm9kZSgpKSxcbiAgICAgICAgdGhpcy5zY3JvbGxSZXNwb25kZXJUZXh0SW5wdXRGb2N1c0Vycm9yLFxuICAgICAgICB0aGlzLnNjcm9sbFJlc3BvbmRlcklucHV0TWVhc3VyZUFuZFNjcm9sbFRvS2V5Ym9hcmQsXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpbm5lclJlZiA9IHRoaXMuZ2V0SW5uZXJWaWV3UmVmKCk7XG5cbiAgICAgIGlmIChpbm5lclJlZiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbm9kZUhhbmRsZS5tZWFzdXJlTGF5b3V0KFxuICAgICAgICBpbm5lclJlZixcbiAgICAgICAgdGhpcy5zY3JvbGxSZXNwb25kZXJJbnB1dE1lYXN1cmVBbmRTY3JvbGxUb0tleWJvYXJkLFxuICAgICAgICB0aGlzLnNjcm9sbFJlc3BvbmRlclRleHRJbnB1dEZvY3VzRXJyb3IsXG4gICAgICApO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVGhlIGNhbGN1bGF0aW9ucyBwZXJmb3JtZWQgaGVyZSBhc3N1bWUgdGhlIHNjcm9sbCB2aWV3IHRha2VzIHVwIHRoZSBlbnRpcmVcbiAgICogc2NyZWVuIC0gZXZlbiBpZiBoYXMgc29tZSBjb250ZW50IGluc2V0LiBXZSB0aGVuIG1lYXN1cmUgdGhlIG9mZnNldHMgb2YgdGhlXG4gICAqIGtleWJvYXJkLCBhbmQgY29tcGVuc2F0ZSBib3RoIGZvciB0aGUgc2Nyb2xsIHZpZXcncyBcImNvbnRlbnRJbnNldFwiLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbGVmdCBQb3NpdGlvbiBvZiBpbnB1dCB3LnIudC4gdGFibGUgdmlldy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHRvcCBQb3NpdGlvbiBvZiBpbnB1dCB3LnIudC4gdGFibGUgdmlldy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFdpZHRoIG9mIHRoZSB0ZXh0IGlucHV0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IEhlaWdodCBvZiB0aGUgdGV4dCBpbnB1dC5cbiAgICovXG4gIHNjcm9sbFJlc3BvbmRlcklucHV0TWVhc3VyZUFuZFNjcm9sbFRvS2V5Ym9hcmQ6IGZ1bmN0aW9uKFxuICAgIGxlZnQ6IG51bWJlcixcbiAgICB0b3A6IG51bWJlcixcbiAgICB3aWR0aDogbnVtYmVyLFxuICAgIGhlaWdodDogbnVtYmVyLFxuICApIHtcbiAgICBsZXQga2V5Ym9hcmRTY3JlZW5ZID0gRGltZW5zaW9ucy5nZXQoJ3dpbmRvdycpLmhlaWdodDtcbiAgICBpZiAodGhpcy5rZXlib2FyZFdpbGxPcGVuVG8pIHtcbiAgICAgIGtleWJvYXJkU2NyZWVuWSA9IHRoaXMua2V5Ym9hcmRXaWxsT3BlblRvLmVuZENvb3JkaW5hdGVzLnNjcmVlblk7XG4gICAgfVxuICAgIGxldCBzY3JvbGxPZmZzZXRZID1cbiAgICAgIHRvcCAtIGtleWJvYXJkU2NyZWVuWSArIGhlaWdodCArIHRoaXMuYWRkaXRpb25hbFNjcm9sbE9mZnNldDtcblxuICAgIC8vIEJ5IGRlZmF1bHQsIHRoaXMgY2FuIHNjcm9sbCB3aXRoIG5lZ2F0aXZlIG9mZnNldCwgcHVsbGluZyB0aGUgY29udGVudFxuICAgIC8vIGRvd24gc28gdGhhdCB0aGUgdGFyZ2V0IGNvbXBvbmVudCdzIGJvdHRvbSBtZWV0cyB0aGUga2V5Ym9hcmQncyB0b3AuXG4gICAgLy8gSWYgcmVxdWVzdGVkIG90aGVyd2lzZSwgY2FwIHRoZSBvZmZzZXQgYXQgMCBtaW5pbXVtIHRvIGF2b2lkIGNvbnRlbnRcbiAgICAvLyBzaGlmdGluZyBkb3duLlxuICAgIGlmICh0aGlzLnByZXZlbnROZWdhdGl2ZVNjcm9sbE9mZnNldCkge1xuICAgICAgc2Nyb2xsT2Zmc2V0WSA9IE1hdGgubWF4KDAsIHNjcm9sbE9mZnNldFkpO1xuICAgIH1cbiAgICB0aGlzLnNjcm9sbFJlc3BvbmRlclNjcm9sbFRvKHt4OiAwLCB5OiBzY3JvbGxPZmZzZXRZLCBhbmltYXRlZDogdHJ1ZX0pO1xuXG4gICAgdGhpcy5hZGRpdGlvbmFsT2Zmc2V0ID0gMDtcbiAgICB0aGlzLnByZXZlbnROZWdhdGl2ZVNjcm9sbE9mZnNldCA9IGZhbHNlO1xuICB9LFxuXG4gIHNjcm9sbFJlc3BvbmRlclRleHRJbnB1dEZvY3VzRXJyb3I6IGZ1bmN0aW9uKG1zZzogc3RyaW5nKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgbWVhc3VyaW5nIHRleHQgZmllbGQ6ICcsIG1zZyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIGBjb21wb25lbnRXaWxsTW91bnRgIGlzIHRoZSBjbG9zZXN0IHRoaW5nIHRvIGEgIHN0YW5kYXJkIFwiY29uc3RydWN0b3JcIiBmb3JcbiAgICogUmVhY3QgY29tcG9uZW50cy5cbiAgICpcbiAgICogVGhlIGBrZXlib2FyZFdpbGxTaG93YCBpcyBjYWxsZWQgYmVmb3JlIGlucHV0IGZvY3VzLlxuICAgKi9cbiAgVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgY29uc3Qge2tleWJvYXJkU2hvdWxkUGVyc2lzdFRhcHN9ID0gKCh0aGlzOiBhbnkpLnByb3BzOiBTY3JvbGxWaWV3UHJvcHMpO1xuICAgIGlmICh0eXBlb2Yga2V5Ym9hcmRTaG91bGRQZXJzaXN0VGFwcyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGAna2V5Ym9hcmRTaG91bGRQZXJzaXN0VGFwcz17JHtcbiAgICAgICAgICBrZXlib2FyZFNob3VsZFBlcnNpc3RUYXBzID09PSB0cnVlID8gJ3RydWUnIDogJ2ZhbHNlJ1xuICAgICAgICB9fScgaXMgZGVwcmVjYXRlZC4gYCArXG4gICAgICAgICAgYFVzZSAna2V5Ym9hcmRTaG91bGRQZXJzaXN0VGFwcz1cIiR7XG4gICAgICAgICAgICBrZXlib2FyZFNob3VsZFBlcnNpc3RUYXBzID8gJ2Fsd2F5cycgOiAnbmV2ZXInXG4gICAgICAgICAgfVwiJyBpbnN0ZWFkYCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgKHRoaXM6IGFueSkua2V5Ym9hcmRXaWxsT3BlblRvID0gbnVsbDtcbiAgICAodGhpczogYW55KS5hZGRpdGlvbmFsU2Nyb2xsT2Zmc2V0ID0gMDtcbiAgICB0aGlzLl9zdWJzY3JpcHRpb25LZXlib2FyZFdpbGxTaG93ID0gS2V5Ym9hcmQuYWRkTGlzdGVuZXIoXG4gICAgICAna2V5Ym9hcmRXaWxsU2hvdycsXG4gICAgICB0aGlzLnNjcm9sbFJlc3BvbmRlcktleWJvYXJkV2lsbFNob3csXG4gICAgKTtcblxuICAgIHRoaXMuX3N1YnNjcmlwdGlvbktleWJvYXJkV2lsbEhpZGUgPSBLZXlib2FyZC5hZGRMaXN0ZW5lcihcbiAgICAgICdrZXlib2FyZFdpbGxIaWRlJyxcbiAgICAgIHRoaXMuc2Nyb2xsUmVzcG9uZGVyS2V5Ym9hcmRXaWxsSGlkZSxcbiAgICApO1xuICAgIHRoaXMuX3N1YnNjcmlwdGlvbktleWJvYXJkRGlkU2hvdyA9IEtleWJvYXJkLmFkZExpc3RlbmVyKFxuICAgICAgJ2tleWJvYXJkRGlkU2hvdycsXG4gICAgICB0aGlzLnNjcm9sbFJlc3BvbmRlcktleWJvYXJkRGlkU2hvdyxcbiAgICApO1xuICAgIHRoaXMuX3N1YnNjcmlwdGlvbktleWJvYXJkRGlkSGlkZSA9IEtleWJvYXJkLmFkZExpc3RlbmVyKFxuICAgICAgJ2tleWJvYXJkRGlkSGlkZScsXG4gICAgICB0aGlzLnNjcm9sbFJlc3BvbmRlcktleWJvYXJkRGlkSGlkZSxcbiAgICApO1xuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fc3Vic2NyaXB0aW9uS2V5Ym9hcmRXaWxsU2hvdyAhPSBudWxsKSB7XG4gICAgICB0aGlzLl9zdWJzY3JpcHRpb25LZXlib2FyZFdpbGxTaG93LnJlbW92ZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fc3Vic2NyaXB0aW9uS2V5Ym9hcmRXaWxsSGlkZSAhPSBudWxsKSB7XG4gICAgICB0aGlzLl9zdWJzY3JpcHRpb25LZXlib2FyZFdpbGxIaWRlLnJlbW92ZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fc3Vic2NyaXB0aW9uS2V5Ym9hcmREaWRTaG93ICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbktleWJvYXJkRGlkU2hvdy5yZW1vdmUoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3N1YnNjcmlwdGlvbktleWJvYXJkRGlkSGlkZSAhPSBudWxsKSB7XG4gICAgICB0aGlzLl9zdWJzY3JpcHRpb25LZXlib2FyZERpZEhpZGUucmVtb3ZlKCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBXYXJuaW5nLCB0aGlzIG1heSBiZSBjYWxsZWQgc2V2ZXJhbCB0aW1lcyBmb3IgYSBzaW5nbGUga2V5Ym9hcmQgb3BlbmluZy5cbiAgICogSXQncyBiZXN0IHRvIHN0b3JlIHRoZSBpbmZvcm1hdGlvbiBpbiB0aGlzIG1ldGhvZCBhbmQgdGhlbiB0YWtlIGFueSBhY3Rpb25cbiAgICogYXQgYSBsYXRlciBwb2ludCAoZWl0aGVyIGluIGBrZXlib2FyZERpZFNob3dgIG9yIG90aGVyKS5cbiAgICpcbiAgICogSGVyZSdzIHRoZSBvcmRlciB0aGF0IGV2ZW50cyBvY2N1ciBpbjpcbiAgICogLSBmb2N1c1xuICAgKiAtIHdpbGxTaG93IHtzdGFydENvb3JkaW5hdGVzLCBlbmRDb29yZGluYXRlc30gc2V2ZXJhbCB0aW1lc1xuICAgKiAtIGRpZFNob3cgc2V2ZXJhbCB0aW1lc1xuICAgKiAtIGJsdXJcbiAgICogLSB3aWxsSGlkZSB7c3RhcnRDb29yZGluYXRlcywgZW5kQ29vcmRpbmF0ZXN9IHNldmVyYWwgdGltZXNcbiAgICogLSBkaWRIaWRlIHNldmVyYWwgdGltZXNcbiAgICpcbiAgICogVGhlIGBTY3JvbGxSZXNwb25kZXJgIG1vZHVsZSBjYWxsYmFja3MgZm9yIGVhY2ggb2YgdGhlc2UgZXZlbnRzLlxuICAgKiBFdmVuIHRob3VnaCBhbnkgdXNlciBjb3VsZCBoYXZlIGVhc2lseSBsaXN0ZW5lZCB0byBrZXlib2FyZCBldmVudHNcbiAgICogdGhlbXNlbHZlcywgdXNpbmcgdGhlc2UgYHByb3BzYCBjYWxsYmFja3MgZW5zdXJlcyB0aGF0IG9yZGVyaW5nIG9mIGV2ZW50c1xuICAgKiBpcyBjb25zaXN0ZW50IC0gYW5kIG5vdCBkZXBlbmRlbnQgb24gdGhlIG9yZGVyIHRoYXQgdGhlIGtleWJvYXJkIGV2ZW50cyBhcmVcbiAgICogc3Vic2NyaWJlZCB0by4gVGhpcyBtYXR0ZXJzIHdoZW4gdGVsbGluZyB0aGUgc2Nyb2xsIHZpZXcgdG8gc2Nyb2xsIHRvIHdoZXJlXG4gICAqIHRoZSBrZXlib2FyZCBpcyBoZWFkZWQgLSB0aGUgc2Nyb2xsIHJlc3BvbmRlciBiZXR0ZXIgaGF2ZSBiZWVuIG5vdGlmaWVkIG9mXG4gICAqIHRoZSBrZXlib2FyZCBkZXN0aW5hdGlvbiBiZWZvcmUgYmVpbmcgaW5zdHJ1Y3RlZCB0byBzY3JvbGwgdG8gd2hlcmUgdGhlXG4gICAqIGtleWJvYXJkIHdpbGwgYmUuIFN0aWNrIHRvIHRoZSBgU2Nyb2xsUmVzcG9uZGVyYCBjYWxsYmFja3MsIGFuZCBldmVyeXRoaW5nXG4gICAqIHdpbGwgd29yay5cbiAgICpcbiAgICogV0FSTklORzogVGhlc2UgY2FsbGJhY2tzIHdpbGwgZmlyZSBldmVuIGlmIGEga2V5Ym9hcmQgaXMgZGlzcGxheWVkIGluIGFcbiAgICogZGlmZmVyZW50IG5hdmlnYXRpb24gcGFuZS4gRmlsdGVyIG91dCB0aGUgZXZlbnRzIHRvIGRldGVybWluZSBpZiB0aGV5IGFyZVxuICAgKiByZWxldmFudCB0byB5b3UuIChGb3IgZXhhbXBsZSwgb25seSBpZiB5b3UgcmVjZWl2ZSB0aGVzZSBjYWxsYmFja3MgYWZ0ZXJcbiAgICogeW91IGhhZCBleHBsaWNpdGx5IGZvY3VzZWQgYSBub2RlIGV0YykuXG4gICAqL1xuICBzY3JvbGxSZXNwb25kZXJLZXlib2FyZFdpbGxTaG93OiBmdW5jdGlvbihlOiBLZXlib2FyZEV2ZW50KSB7XG4gICAgdGhpcy5rZXlib2FyZFdpbGxPcGVuVG8gPSBlO1xuICAgIHRoaXMucHJvcHMub25LZXlib2FyZFdpbGxTaG93ICYmIHRoaXMucHJvcHMub25LZXlib2FyZFdpbGxTaG93KGUpO1xuICB9LFxuXG4gIHNjcm9sbFJlc3BvbmRlcktleWJvYXJkV2lsbEhpZGU6IGZ1bmN0aW9uKGU6IEtleWJvYXJkRXZlbnQpIHtcbiAgICB0aGlzLmtleWJvYXJkV2lsbE9wZW5UbyA9IG51bGw7XG4gICAgdGhpcy5wcm9wcy5vbktleWJvYXJkV2lsbEhpZGUgJiYgdGhpcy5wcm9wcy5vbktleWJvYXJkV2lsbEhpZGUoZSk7XG4gIH0sXG5cbiAgc2Nyb2xsUmVzcG9uZGVyS2V5Ym9hcmREaWRTaG93OiBmdW5jdGlvbihlOiBLZXlib2FyZEV2ZW50KSB7XG4gICAgLy8gVE9ETyg3NjkzOTYxKTogVGhlIGV2ZW50IGZvciBEaWRTaG93IGlzIG5vdCBhdmFpbGFibGUgb24gaU9TIHlldC5cbiAgICAvLyBVc2UgdGhlIG9uZSBmcm9tIFdpbGxTaG93IGFuZCBkbyBub3QgYXNzaWduLlxuICAgIGlmIChlKSB7XG4gICAgICB0aGlzLmtleWJvYXJkV2lsbE9wZW5UbyA9IGU7XG4gICAgfVxuICAgIHRoaXMucHJvcHMub25LZXlib2FyZERpZFNob3cgJiYgdGhpcy5wcm9wcy5vbktleWJvYXJkRGlkU2hvdyhlKTtcbiAgfSxcblxuICBzY3JvbGxSZXNwb25kZXJLZXlib2FyZERpZEhpZGU6IGZ1bmN0aW9uKGU6IEtleWJvYXJkRXZlbnQpIHtcbiAgICB0aGlzLmtleWJvYXJkV2lsbE9wZW5UbyA9IG51bGw7XG4gICAgdGhpcy5wcm9wcy5vbktleWJvYXJkRGlkSGlkZSAmJiB0aGlzLnByb3BzLm9uS2V5Ym9hcmREaWRIaWRlKGUpO1xuICB9LFxufTtcblxuY29uc3QgU2Nyb2xsUmVzcG9uZGVyID0ge1xuICBNaXhpbjogU2Nyb2xsUmVzcG9uZGVyTWl4aW4sXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNjcm9sbFJlc3BvbmRlcjtcbiJdfQ==